/* module-ebilling@v2.3.9 build with â™¥ by bb-lp-cli@v1.9.11 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("base"),require("core"),require("ui"),require("module-accounts"),require("module-payments"),require("module-enrollment")):"function"==typeof define&&define.amd?define(["base","core","ui","module-accounts","module-payments","module-enrollment"],t):"object"==typeof exports?exports["module-ebilling"]=t(require("base"),require("core"),require("ui"),require("module-accounts"),require("module-payments"),require("module-enrollment")):e["module-ebilling"]=t(e.base,e.core,e.ui,e["module-accounts"],e["module-payments"],e["module-enrollment"])}(this,function(e,t,n,i,a,l){return function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={exports:{},id:i,loaded:!1};return e[i].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,exports,t){e.exports=t(1)},function(e,exports,t){var n;(function(e){"use strict";n=function(require,exports,e){e.name="module-ebilling";var n=t(3),i=t(4),a=t(5),l=t(6),r=t(7),s=t(8),o=t(9),c=t(13),d=[a.name,i.name,l.name,r.name,s.name,o.name,c.name];e.exports=n.createModule(e.name,d).provider(t(15)).service(t(16).services).factory(t(16).factories).filter(t(17)).directive(t(18).directives).service(t(19)).service(t(20)).service(t(22))}.call(exports,t,exports,e),!(void 0!==n&&(e.exports=n))}).call(exports,t(2)(e))},function(e,exports){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(t,exports){t.exports=e},function(e,exports){e.exports=t},function(e,exports){e.exports=n},function(e,exports){e.exports=i},function(e,exports){e.exports=a},function(e,exports){e.exports=l},function(e,exports,t){var n;(function(e){"use strict";n=function(require,exports,e){e.name="new-payment-box";var n=t(3),i=t(4),a=t(5),l=[i.name,a.name];e.exports=n.createModule(e.name,l).directive(t(10)).directive(t(11)).directive(t(12))}.call(exports,t,exports,e),!(void 0!==n&&(e.exports=n))}).call(exports,t(2)(e))},function(e,exports,t){var n;n=function(require,exports,e){"use strict";var t='<form class="lp-new-payment-box"><div class="form-group lp-new-payment-balances" ng-if="eBill"><div class="clearfix" ng-if="eBill.outstandingBalance"><div class="col-xs-5 col-md-5"><div lp-custom-radio="" name="eBillAmount" ng-click="specificAmount.display = false" ng-model="paymentOrder.amount" value="{{ eBill.outstandingBalance }}"><span lp-i18n="Statement Balance"></span></div></div><div class="col-xs-7 col-md-7 text-right"><span class="radio h5" lp-amount="eBill.outstandingBalance" lp-amount-currency="paymentOrder.currencySym"></span></div></div><div class="clearfix" ng-if="eBill.amountDue"><div class="col-xs-5 col-md-5"><div lp-custom-radio="" name="eBillAmount" ng-click="specificAmount.display = false" ng-model="paymentOrder.amount" value="{{ eBill.amountDue }}"><span lp-i18n="Minimum Amount"></span></div></div><div class="col-xs-7 col-md-7 text-right"><span class="radio h5" lp-amount="eBill.amountDue" lp-amount-currency="paymentOrder.currencySym"></span></div></div><div class="form-group clearfix"><div class="col-xs-5 col-md-5"><div lp-custom-radio="" name="eBillAmount" ng-click="specificAmount.display = true" ng-model="paymentOrder.amount" ng-value="specificAmount.amount"><span lp-i18n="Specified Amount"></span></div></div><div class="col-xs-7 col-md-7 lp-currency-amount-input" ng-show="specificAmount.display""><div class="amount-area" name="amount" ng-model="specificAmount.amount"  e-bill-amount-input="{currencySym: paymentOrder.currencySym }"></div></div></div></div><div class="form-group clearfix" ng-if="!eBill"><div class="lp-st-section clearfix"><div class="pull-left lp-st-caption" lp-i18n="Amount to pay"></div><div class="pull-left lp-st-control lp-currency-amount-input"><div class="amount-area" name="amount" ng-model="paymentOrder.amount"  e-bill-amount-input="{currencySym: paymentOrder.currencySym}" required="required"></div></div></div></div><div class="form-group clearfix"><div class="lp-st-section clearfix"><div class="pull-left lp-st-caption" lp-i18n="Pay with"></div><div class="col-xs-12 col-sm-12"><div name="accountId" class="lp-accounts-header" ng-change=""lp-accounts-select="lp-accounts-select"ng-model="paymentOrder.account"lp-accounts="accounts" required="required"></div></div></div></div><div lp-payment-date-box payment-order="paymentOrder" show-urgent-transfer="showUrgentTransfer()"scheduled-transfer-frequencies="scheduledTransferFrequencies"scheduled-transfer-end-options="scheduledTransferEndOptions"></div><div class="memo"><textarea aria-label="payment description" class="form-control memo-area"placeholder="Description (optional) Maximum number of characters is 140"maxlength="140"ng-model="paymentOrder.memo"></textarea></div></form>';exports.lpNewPaymentBox=function(e){var n=function(t,n,i){t.specificAmount={},e(function(){!t.paymentOrder.amount&&t.eBill&&(t.paymentOrder.amount=t.eBill.amountDue)}),t.$watch("specificAmount.amount",function(e){t.paymentOrder.amount=e})};return{restrict:"A",scope:{paymentOrder:"=payment",accounts:"=accounts",eBill:"=?",showUrgentTransfer:"&",scheduledTransferFrequencies:"=?",scheduledTransferEndOptions:"=?"},replace:!0,link:n,template:t}},exports.lpNewPaymentBox.$inject=["$timeout"]}.call(exports,t,exports,e),!(void 0!==n&&(e.exports=n))},function(e,exports,t){var n;n=function(require,exports,e){"use strict";var t='<div class="lp-onetime-transfer"><div modal-dialog="" show="urgentTransferModalShown" closable="false"><div class="modal-header"><h2><i class="lp-icon lp-icon-xxl lp-icon-info-sign"></i> <span lp-i18n="Urgent Transfer"></span></h2></div><div class="modal-body" lp-i18n="If you need to send money fast and cannot wait for the usual bank time of approx. 1-2 days then Urgent Transfer allows you to pass the money across in a 5 minute window instead. However, it does come with a 5$ charge and this will appear as a separate transaction in your activity view."></div><div class="modal-footer"><button type="button" class="btn btn-primary" ng-click="toggleUrgentTransferModal()" lp-i18n="Close"></button></div></div><div class="one-time clearfix"><div class="lp-st-section clearfix"><div class="pull-left lp-st-caption" lp-i18n="Sending date"></div><div class="pull-left lp-st-control calendar"><input ng-click="isOpenDate = !isOpenDate" required="required" type="text" name="scheduleDate"ng-model="paymentOrder.scheduleDate" datepicker-popup="dd-MMM-yyyy"min-date="todaysDate" is-open="isOpenDate" class="form-control" lp-future-time=""datepicker-options="dateOptions" show-button-bar="false" tabindex="0" placeholder="select date"aria-label="select date" /><span ng-click="isOpenDate = !isOpenDate" class="lp-icon lp-icon-calendar calendar-icon"></span></div></div><div if="estimatedDeliveryDate" class="lp-st-section clearfix"><div class="pull-left lp-st-caption" lp-i18n="Delivery date"></div><div class="pull-left lp-st-caption"><div>{{estimatedDeliveryDate}}</div></div></div></div><div class="urgent-transfer" ng-show="showUrgentTransfer()"><div lp-custom-checkbox="" aria-label="{{ \'urgent transfer\' | translate }}" ng-model="paymentOrder.urgentTransfer"><span lp-i18n="Make transfer urgent"></span></div></div><p ng-show="paymentOrder.urgentTransfer" class="urgent-transfer-message"><span lp-i18n="Making an urgent transfer will incur an extra cost. This will appear on your transactions as a separate transaction."></span></p></div>';exports.lpOnetimeTransfer=function(){var e=function(e,t,n){};return{restrict:"A",scope:{paymentOrder:"=",estimatedDeliveryDate:"=?",showUrgentTransfer:"&"},link:e,replace:!0,template:t}}}.call(exports,t,exports,e),!(void 0!==n&&(e.exports=n))},function(e,exports,t){var n;n=function(require,exports,e){"use strict";var t='<form name="PaymentDateBoxForm" class="lp-payment-date-box"><div class="e-bill-info-wrapper"><ul tabset="tabset" class="tabset"><li tab="tab" select="onetimeTransfer()"><span tab-heading="tab-heading" class="tab-heading" lp-i18n="One Time"></span><div lp-onetime-transfer payment-order="paymentOrder" estimated-delivery-date="paymentOrder.estDeliveryDate" show-urgent-transfer="showUrgentTransfer()"></div></li><li tab="tab" select="scheduledTransfer()"><span tab-heading="tab-heading" class="tab-heading" lp-i18n="Recurring"></span><div lp-scheduled-transfer="lp-scheduled-transfer" ng-model="paymentOrder.scheduledTransfer" frequencies="frequencies" end-options="endOptions"></div></li></ul></div></form>';exports.lpPaymentDateBox=function(){var e=function(e,t,n){e.onetimeTransfer=function(){e.paymentOrder.isScheduledTransfer=!1},e.scheduledTransfer=function(){e.paymentOrder.isScheduledTransfer=!0}};return{restrict:"A",replace:!0,scope:{paymentOrder:"=",showUrgentTransfer:"&?",frequencies:"=?scheduledTransferFrequencies",endOptions:"=?scheduledTransferEndOptions"},template:t,link:e}}}.call(exports,t,exports,e),!(void 0!==n&&(e.exports=n))},function(e,exports,t){var n;(function(e){"use strict";n=function(require,exports,e){e.name="ebill-setup";var n=t(3),i=t(4),a=t(5),l=[i.name,a.name];e.exports=n.createModule(e.name,l).directive(t(14))}.call(exports,t,exports,e),!(void 0!==n&&(e.exports=n))}).call(exports,t(2)(e))},function(e,exports,t){var n;n=function(require,exports,e){"use strict";var n=t(3).utils;exports.lpEbillSetupView=function(e,t,i,a){var l='<div class="lp-alerts" tabindex="-1">  <div class="alert alert-danger" ng-if="errors">    <p ng-repeat="error in errors">      <i class="lp-icon lp-icon-alert-error"></i><span lp-i18n="{{error.code}}"></span>    </p>  </div></div>',r='<div class="panel-heading panel-title clearfix">  <strong lp-i18n="Select Billers Site"></strong></div><p lp-i18n="EBillsMultipleSitesFoundInstructions" translate-values="{ billerName: payee.name }"></p><div class="panel-body">  <p lp-i18n="Select site"></p>  <div lp-field="lp-field"    label="{{ \'Select biller site\' | translate }}"    aria-label="{{ \'Select biller sites\' | translate }}">    <div dropdown-select="dropdown-select"      ng-model="payee.ebills.billerSite"      ng-options="site as site.name for site in payee.ebills.nextAction.billerSites">    </div>  </div></div>',s='<div class="e-bill-setup-login">   <div class="row header">       <h3 class="col-ss-12 col-xs-12 col-sm-12 col-md-12 col-lg-12" lp-i18n="EBillsLoginTo" translate-values="{ billerName: payee.name }"></h3>   </div>   <div class="row instructions">       <div class="col-ss-12 col-xs-12 col-sm-12 col-md-6 col-lg-6" lp-i18n="EBillsLoginInstructions" translate-values="{ billerName: payee.name }"></div>   </div>   <div class="row">       <div class="col-ss-12 col-xs-12 col-sm-12 col-md-6 col-lg-6">           <div ng-repeat="credential in payee.ebills.nextAction.credentialsParams">                   <div lp-labeled-input-field="lp-labeled-input-field"                   input-type="{{ credential.inputFieldType }}"                   input-value="credential.fieldValue"                   is-required="true" input-pattern="/^[a-zA-Z0-9.\'-_\\s]{1,20}$/"                   pattern-error-msg="{{ \'Field is required\' }}" field-name="{{ credential.fieldLabel.replace(\' \',\'\') }}"                   placeholder-text="{{ credential.fieldLabel }}"></div>           </div>       </div>   </div></div>',o='<div class="e-bill-confirm-account">   <div class="row header">     <h3 class="col-ss-12 col-xs-12 col-sm-12 col-md-12 col-lg-12" lp-i18n="Select E-Bills Account"></h3>   </div>   <div class="row instructions" ng-switch="payee.ebills.nextAction.accounts.length">       <div class="col-ss-12 col-xs-12 col-sm-12 col-md-6 col-lg-6" ng-switch-when="0">         <div class="text-danger" lp-i18n="We were unable to locate an account using the logon credentials you provided."></div>       </div>       <div class="col-ss-12 col-xs-12 col-sm-12 col-md-6 col-lg-6" ng-switch-when="1" ng-init="payee.ebills.account = payee.ebills.nextAction.accounts[0]">         <div lp-i18n="EBillsConfirmAccountNumber" translate-values="{ accountNumber: payee.ebills.nextAction.accounts[0].name }"></div>       </div>       <div ng-switch-default>           <div lp-i18n="Select the account for which you would like to receive eBills."></div>               <div lp-field="lp-field"               label="{{ \'Select account\' | translate }}"               aria-label="{{ \'Select account\' | translate }}">               <div dropdown-select="dropdown-select"                   ng-model="payee.ebills.account"                   ng-options="val as val.name for val in payee.ebills.nextAction.accounts">               </div>           </div>       </div>   </div></div> ',c='<div class="row">   <div class="col-ss-12 col-xs-12 col-sm-12 col-md-6 col-lg-6">      <div class="row">          <div class="col-ss-12 col-xs-12 col-sm-12 col-md-6 col-lg-6">              <button type="submit" ng-disabled="continueButtonIsDisabled()" ng-click="confirm()" class="btn btn-primary col-sm-12 col-md-12 col-lg-12" lp-i18n="Continue"></button>          </div>          <div class="col-ss-12 col-xs-12 col-sm-12 col-md-6 col-lg-6">              <button type="button" ng-click="cancel()" class="btn btn-link col-sm-12 col-md-12 col-lg-12 text-left" lp-i18n="Cancel"></button>          </div>      </div>   </div></div>',d='<div progress-indicator="loading">'+l+'  <div ng-if="payee.ebills.nextAction">    <div ng-if="payee.ebills.nextAction.billerSites">'+r+c+'</div>    <div ng-if="payee.ebills.nextAction.credentialsParams">'+s+c+'</div>    <div ng-if="payee.ebills.nextAction.accounts">'+o+c+"</div>  </div></div>",u=function(t,l,r){function s(e){n.isUndefined(t.logErrors)?t.errors=e:t.logErrors(e)}function o(n){n.checkStatus?e(function(){i.checkStatus(t.payee.ebills).then(o,function(e){t.loading=!1,s(e.data.errors)})},2e3):(t.payee.ebills=n,n.furtherActionNeeded||(t.payee.eBillsStatus="ACTIVE",t.callback()),t.loading=!1)}t.loading=!1,t.continueButtonIsDisabled=function(){var e;return a.has(t.payee,"ebills.nextAction.credentialsParams")?(e=a.chain(t.payee.ebills.nextAction.credentialsParams).map("fieldValue").reduce(function(e,t){return e&&t}).value(),!e):!1},t.confirm=function(){t.loading=!0,s(null),i.performAction(t.payee.ebills).then(o,function(e){s(e.data.errors),t.loading=!1})},t.cancel=function(){t.payee.ebills=null,t.callback()}};return{restrict:"A",scope:{payee:"=",callback:"&",logErrors:"=?"},link:u,template:d}},exports.lpEbillSetupView.$inject=["$timeout","lpCoreTemplate","lpEBillService","lpCoreUtils"]}.call(exports,t,exports,e),!(void 0!==n&&(e.exports=n))},function(e,exports,t){var n;n=function(require,exports,e){"use strict";exports.lpEbilling=function(){this.$get=function(e,t,n,i,a,l){var r={baseUrl:"",locale:"en",debitOrdersSrc:"",mandatesSrc:"",dateListFormat:"MMM dd",showCurrencySym:!0,templates:{},cache:{enable:!1}},s=a;return s.init(r.cache),{getAccounts:function(){var t=e.defer(),n=s.get("accounts");return n?t.resolve(n):(l.setConfig({accountsEndpoint:r.accountsEndPoint}),l.load().then(function(e){e?(s.put("accounts",e),t.resolve(e)):t.reject()},function(e){t.reject(e)})),t.promise},getTemplate:function(e){if(!r.templates[e])throw new Error("Unable to resolve template : "+e);var t=r.baseUrl+r.templates[e];return t},setConfig:function(e){return r=n(e).chain().mapValues(n.resolvePortalPlaceholders).defaults(r).value(),this},getConfig:function(e){return e&&n.isString(e)?r[e]:r}}},this.$get.$inject=["$q","$http","lpCoreUtils","lpEbillingUtils","lpEbillingCache","AccountsModel"]}}.call(exports,t,exports,e),!(void 0!==n&&(e.exports=n))},function(e,exports,t){var n;n=function(require,exports,e){"use strict";var t={},n={},i={};n.lpEbillingDebitOrdersModel=function(e,t,n,i,a,l,r){function s(e){var t=i.CURRENCY_MAP[e.currency]||"",n={id:e.id,status:e.status,currencySym:t,dueDate:e.paymentDueDate,dueDateFiltered:p(e.paymentDueDate,"MMM dd y"),scheduledDate:e.paymentScheduledDate,scheduledDateFiltered:p(e.paymentScheduledDate,"MMM dd"),statusReasonInformation:e.statusReasonInformation,isOverdue:c.checkDueDate("isPast",e.paymentDueDate)};return e.amount&&(n.amount=parseFloat(e.amount,10),n.amountFiltered=m(e.amount,t)),e.minimalAmount&&(n.minAmount=parseFloat(e.minimalAmount,10),n.minAmountFiltered=m(e.minimalAmount,t)),e.mandate&&(n.autoPay=e.mandate.directDebit,n.mandate=new f(e.mandate)),e.amountPaid&&(n.amountPaid=e.amountPaid,n.amountPaidFiltered=r("eBillCurrency")(n.amountPaid,t)),e.modifiedDate&&(n.modifiedDate=e.modifiedDate,n.modifiedDateFiltered=p(e.modifiedDate,"MMM dd")),e.debtor&&(n.debtor=e.debtor),e.actions&&e.actions instanceof Array&&(n.actions={},e.actions.map(function(e){n.actions[e]=o[e]})),n}var o,c=n,d=e.getConfig(),u=c.resolvePreference(d.debitOrdersSrc),p=r("date"),m=r("eBillCurrency"),f=t;return o=a(u+"/:id/:action",{},{query:{method:"GET",isArray:!0,cache:d.cache.enable,interceptor:{response:function(e){var t=e.data;return t instanceof Array&&t.length>0?t.map(s):t}}},accept:{params:{action:"accept"},method:"POST"},decline:{params:{action:"decline"},method:"POST"},pay:{params:{action:"pay"},method:"POST"},reject:{params:{action:"reject"},method:"POST"}}),o.getAll=function(e){return e=c.extend(e||{},{status:["SCHEDULED","RECEIVED","HANDLING"].join(",")}),this.query(e).$promise},o.getAllNew=function(e){return e=c.extend(e||{},{status:["IN_PROGRESS"].join(",")}),this.query(e).$promise},o.getHistory=function(e){return e=c.extend(e||{},{status:["PAID","REJECTED","REFUSED"].join(",")}),this.query(e).$promise},o},n.lpEbillingDebitOrdersModel.$inject=["lpEbilling","lpEbillingMandateModel","lpEbillingUtils","lpCoreI18nUtils","$resource","$q","$filter"],n.lpEbillingMandateModel=function(e,t,n){function i(e){var t={id:e.id,creditorName:e.creditor.name,creditorReference:e.creditor.reference,creditorAddress:e.creditor.postalAddress,debitorName:e.debtor.name,debitorAccount:e.debtor.account,notifyOnNewOrders:e.notifyOnNewOrders};return e.actions&&e.actions instanceof Array&&(t.actions={},e.actions.map(function(e){t.actions[e]=a[e]})),t}var a,l=t,r=e.getConfig(),s=l.resolvePreference(r.mandatesSrc);return a=n(s+"/:id/:action",{id:"@id"},{get:{method:"GET",isArray:!1,cache:r.cache.enable,interceptor:{response:function(e){return i(e.data)}}},enableDirectDebit:{method:"POST"},disableDirectDebit:{method:"POST"},enableNotifyOnNewOrders:{method:"POST"},disableNotifyOnNewOrders:{method:"POST"}})},n.lpEbillingMandateModel.$inject=["lpEbilling","lpEbillingUtils","$resource"],n.lpEbillingCache=function(e){var t,n;return{init:function(i){n=i,t=e("EBill.Cache",n)},put:function(e,i){return!!n.enable&&t.put(e,i)},remove:function(e){return t.remove(e)},removeAll:function(){return t.removeAll()},get:function(e){return t.get(e)},info:function(){return t.info()},template:function(){}}},n.lpEbillingCache.$inject=["$cacheFactory"],i.lpEbillingBus=function(e,t,n){var i=n,a=i.isObject(t.gadgets.pubsub)&&i.isFunction(t.gadgets.pubsub.publish);this.channels={},this.publish=function(n,l,r){i.info("%c"+n,"color: blue"),e.$emit(n,l),"boolean"==typeof r&&r&&a&&t.gadgets.pubsub.publish(n,l)},this.subscribe=function(n,i,l){this.channels[n]=e.$on(n,i),"boolean"==typeof l&&l&&a&&t.gadgets.pubsub.subscribe(n,i)},this.unsubscribe=function(e,n,i){return this.channels[e]&&this.channels[e](),"boolean"==typeof i&&i&&a&&t.gadgets.pubsub.unsubscribe(e,n),this}},i.lpEbillingBus.$inject=["$rootScope","$window","lpEbillingUtils"],exports.providers=t,exports.factories=n,exports.services=i}.call(exports,t,exports,e),!(void 0!==n&&(e.exports=n))},function(e,exports,t){var n;n=function(require,exports,e){"use strict";exports.eBillCurrency=function(e,t){var n=e("currency"),i=t.getConfig(),a=i.showCurrencySym;return function(e,t){return t=a?t:"",n(e,t)}},exports.eBillCurrency.$inject=["$filter","lpEbilling"]}.call(exports,t,exports,e),!(void 0!==n&&(e.exports=n))},function(e,exports,t){var n;n=function(require,exports,e){"use strict";var t=window.jQuery,n={};n.eBillListItem=["$timeout","$compile","lpEbillingUtils",function(e,n,i){var a=["<div>",'<div class="list-view-container"','on-swipe="onSwipe($event)"','ng-click="onClick($event)"','ng-keypress="onKeyPressed($event)"','tabindex="0"',"ng-class=\"{'bill-overdue': bill.isOverdue}\"",'on-gesture-options="{ dragLockToAxisX: true,  dragBlockHorizontal: true }">','<div class="col-xs-7 e-bill-list-info column text-left">','<div class="centered">','<span class="sr-only">Name</span>','<div class="h4 counterparty-name"><strong>{{title}}</strong></div>','<div class="h6 text-muted">{{subtitle}}</div>',"</div>","</div>",'<div class="col-xs-5 e-bill-list-amount-wrapper column text-right">','<div class="centered">','<div class="e-bill-list-amount">','<span class="sr-only">Amount</span>','<span class="h4">{{amount}}</span>',"</div>",'<div class="e-bill-list-info-amount">','<span class="e-bill-auto-pay-stamp badge" ng-if="auto">Auto</span>','<span class="e-bill-list-due-date badge" ng-if="date">','<i class="glyphicon glyphicon-calendar"></i> {{date}}',"</span>","</div>","</div>","</div>",'<div class="toggle-list">',"<i class=\"lp-icon\" ng-class=\"{ 'lp-icon-angle-up' : bill.opened, 'lp-icon-angle-down': !bill.opened}\"></i>","</div>","</div>","<div ng-transclude></div>","</div>"].join(" "),l=function(e,n,i){var a=this;t(".list-view-container.swiped-out").css({left:0}).removeClass("swiped-out"),e.stop().animate({width:e.width()-n},0,function(){a.isSwiped=!0,"function"==typeof i&&i.call(null)}).addClass("swiped-out")},r=function(e,t){var n=this;e.stop().animate({width:"100%"},0,function(){n.isSwiped=!1,"function"==typeof t&&t.call(null)}).removeClass("swiped-out")},s=function(n,i,a,s){var o,c=i.find(".list-view-container");switch(n.isSwiped=!1,n.bill.opened=!1,"HANDLING"===n.bill.status&&(n.bill.processing=!0),n.title=n.bill.mandate.creditor.name,n.subtitle=n.bill.mandate.creditor.reference,n.amount=n.bill.amountFiltered,n.date=n.bill.scheduledDateFiltered,n.auto=n.bill.mandate.directDebit,a.eBillListItem){case"history":n.subtitle=n.bill.statusReasonInformation?n.bill.status+" - "+n.bill.statusReasonInformation:n.bill.status;break;case"newbills":n.subtitle=n.bill.mandate.creditor.reference}n.onKeyPressed=function(e){13!==e.keyCode&&32!==e.which||(n.onClick(e),e.preventDefault())},n.onClick=function(e){n.bill.opened=!n.bill.opened},n.onSwipe=function(t){var a=i.find(".list-view-container");o=i.find(".list-view-actions").width(),0>=+o||(n.bill.opened&&(n.bill.opened=!1),n.isSwiped&&t.srcEvent.stopPropagation(),e(function(){switch(t.direction){case 2:l.call(n,a,o);break;case 4:r.call(n,a,o)}},23))},n.$on("$destroy",function(){}),n.$watch("bill.opened",function(e){(n.isSwiped||n.isSwiped&&e)&&r.call(n,c)}),n.$watch("bill.autoPay",function(a){o=i.find(".list-view-actions").width(),e(function(){o=i.find(".list-view-actions").width(),n.isSwiped&&t(".list-view-container.swiped-out").css({left:-o})})})},o=function(){return s};return{restrict:"EA",require:"?ngModel",priority:Number.MAX_VALUE,transclude:!0,compile:o,template:a,scope:{bill:"=ngModel"}}}],n.eBillAmountInput=["$timeout",function(e){var t=['<div class="input-group clearfix">','<span class="input-group-addon" ng-bind="currencySym" ng-if="currencySym"></span>','<input name="noDecimal"  placeholder="0" lp-number-input lp-max-length="6" min="0" maxlength="6" max="999999" class="form-control whole-amount-input pull-left text-right" type="number" ng-model="noDecimal"/>','<div class="pull-left decimal"><span class="decimal-point">.</span></div>','<input name="decimal" lp-number-input type="number" ng-model="decimal" placeholder="0" lp-max-length="2" min="0" maxlength="2" max="99" class="text-right form-control pull-left decimal-amount-input" /> ',"</div>"].join(""),n=function(e,t,n,i){function a(e,t,n){return n=n||"0",e+="",e.length>=t?e:new Array(t-e.length+1).join(n)+e}function l(){var t=a(parseInt(e.decimal,10)||0,2),n=parseInt(e.noDecimal,10)||0;return parseFloat(n+"."+t).toFixed(2)}var r=e.config||{};e.currencySym=r.currencySym||"",e.decimal=0,e.noDecimal=0,t.one("click","input",function(){this.value=""}),t.on("keypress","input[name=noDecimal]",function(){return 0!==parseInt(this.value,10)?"valid_value":void(this.value="")}),t.find("input").on("input",function(){var e=this.maxLength;this.value.length>e&&(this.value=this.value.substr(0,e))}),e.$watch("noDecimal+decimal",function(){var t=l();e.amount=parseFloat(t),i.$setViewValue(e.amount)}),e.$on("$destroy",function(){})};return{restrict:"EA",require:"?ngModel",priority:Number.MAX_VALUE,transclude:!0,link:n,template:t,scope:{amount:"=ngModel",config:"=eBillAmountInput"}}}],exports.directives=n}.call(exports,t,exports,e),!(void 0!==n&&(e.exports=n))},function(e,exports,t){var n;n=function(require,exports,e){"use strict";var n=t(3).ng;exports.lpEbillingUtils=function(e,t,i){this.noop=n.noop,this.extend=n.extend,this.bind=n.bind,this.copy=n.copy,this.isObject=n.isObject,this.isFunction=n.isFunction,this.isUndefined=n.isUndefined,this.isTouch="ontouchstart"in window,this.keys=Object.keys,this.resolvePreference=function(t,n){return e.resolvePortalPlaceholders(t)},this.widgetStaticPath=function(e){var t=e.toString().split("/");t.pop();var n=t.join("/");return n=this.resolvePreference(n)},this.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===Object.prototype.toString.call(e)},this.filter=function(t,n){if(e.isEmpty(n))throw new Error("Specify an object criteria");var i=this.keys(n)[0];return t.filter(function(e){var t=!1;return e.hasOwnProperty(i)&&(t=e[i]===n[i]),t})[0]},this.findIndex=function(e,t){var n=this.filter(e,t);return e.indexOf(n)},this.sortBy=function(e,t,n){e.sort(function(e,i){return e[t]<=i[t]?n?1:-1:1})},this.checkDueDate=function(t,n){var i=e.date;return"undefined"!=typeof n?"isToday"===t?i().isSame(i(n),"day"):"isTomorrow"===t?i().add(1,"day").isSame(i(n),"day"):"isYesterday"===t?i().subtract(1,"day").isSame(i(n),"day"):"isPast"===t?i().isAfter(i(n),"day"):n:null},this.dueDateIndicator=function(e){return this.checkDueDate("isToday",e)?"(today)":this.checkDueDate("isTomorrow",e)?"(tommorow)":this.checkDueDate("isYesterday",e)?"(yesterday)":""},this.groupBy=function(e,n,i,a,l){var r,s="",o=[],c="";i=i||"",a=a||"";var d=["dueDate","amount","modifiedDate"];if(!e instanceof Array||e.length<=0)return o;if(d.indexOf(n)<=-1)throw new Error("Unsupported groupby attribute");return this.sortBy(e,n,l),e.forEach(function(e){switch(n){case"amount":c=t("eBillCurrency")(e[n],e.currencySym);break;case"dueDate":case"modifiedDate":i=i;var l=e[n];c=l&&t("date")(l,"MMM dd").toString().toLowerCase();var d=this.checkDueDate("isPast",l)?a:this.dueDateIndicator(l)}c!==s&&(r={label:[i,c,d].join(" "),bills:[]},s=c,o.push(r)),r&&r.bills instanceof Array&&r.bills.push(e)}.bind(this)),o},this.error=function(e){throw new Error(e)},this.log=function(){if("localhost"===location.hostname.toLowerCase()){var e=[].slice.call(arguments,0);this.isFunction(i.log)&&i.log.apply(i.log,e)}},this.info=function(){if("localhost"===location.hostname.toLowerCase()){var e=[].slice.call(arguments,0);this.isFunction(i.info)&&i.info.apply(i.info,e)}}},exports.lpEbillingUtils.$inject=["lpCoreUtils","$filter","$log"]}.call(exports,t,exports,e),!(void 0!==n&&(e.exports=n))},function(e,exports,t){var n;n=function(require,exports,e){"use strict";function n(e){return e.data}var i=t(3).utils,a={url:"/v1/bill-payments"},l=t(21),r=function(e,t){this.http=e};r.$inject=["$http","lpCoreError"];var s={setup:function(e){return this.http.post(this.config.url+"/e-bills",e).then(n).then(l)},stop:function(e){return this.http["delete"](this.config.url+"/e-bills/"+e).then(n).then(l)},checkStatus:function(e){return this.http.get(this.config.url+"/e-bills/status",{params:{sessionId:e.sessionId}}).then(n).then(l)},performAction:function(e){return this.http.post(this.config.url+e.nextAction.url,e).then(n).then(l)},checkErrors:function(e){return this.http.get(this.config.url+"/e-bills/errors",{params:{payeeId:e}}).then(n).then(l)},setConfig:function(e){return this.config=i.chain(e).mapValues(i.resolvePortalPlaceholders).defaults(a).value(),this},getConfig:function(e,t){return e&&i.isString(e)?this.config[e]||t:this.config}};i.assign(r.prototype,s),exports.lpEBillService=r}.call(exports,t,exports,e),!(void 0!==n&&(e.exports=n))},function(e,exports,t){var n;n=function(require,exports,e){"use strict";e.exports=function(e){return e?(e.furtherActionNeeded="true"===e.furtherActionNeeded,e.furtherActionNeeded?e.nextAction?(e.nextAction.credentialsParams&&(e.credentialsParams=e.nextAction.credentialsParams,e.credentialsParams.forEach(function(e){e.inputFieldType=e.masked?"PASSWORD":"TEXT"})),e):(e.checkStatus=!0,e):e):{}}}.call(exports,t,exports,e),!(void 0!==n&&(e.exports=n))},function(e,exports,t){var n;n=function(require,exports,e){"use strict";var n=t(3).utils,i=function(e){function t(){var t=this;t.endOptionsEnum={AFTER:"after",ON_DATE:"onDate",CANCEL:"onCancel"},t.endOptions=[{id:t.endOptionsEnum.AFTER},{id:t.endOptionsEnum.CANCEL},{id:t.endOptionsEnum.ON_DATE}],t.frequencies=[{id:"OneTime",schedule:null},{id:"Weekly",schedule:{transferFrequency:"WEEKLY",every:1}},{id:"EveryTwoWeeks",schedule:{transferFrequency:"WEEKLY",every:2}},{id:"EveryFourWeeks",schedule:{transferFrequency:"WEEKLY",every:4}},{id:"Monthly",schedule:{transferFrequency:"MONTHLY",every:1}},{id:"EveryTwoMonths",schedule:{transferFrequency:"MONTHLY",every:2}},{id:"Quarterly",schedule:{transferFrequency:"MONTHLY",every:3}},{id:"EveryFourMonths",schedule:{transferFrequency:"MONTHLY",every:4}},{id:"BiAnnual",schedule:{transferFrequency:"MONTHLY",every:6}},{id:"Annually",schedule:{transferFrequency:"YEARLY",every:1}}];var i=function(t){return e.date(t).format("YYYY-MM-DD")},a=function(e){return n(t.frequencies).find({id:e}).schedule},l=function(e){var l={startDate:i(e.startDate),on:0};return n.assign(l,a(e.frequency)),e.endOn===t.endOptionsEnum.AFTER?l.repeat=e.timesToRepeat:e.endOn===t.endOptionsEnum.ON_DATE&&(l.endDate=i(e.endDate)),l};t.transformPayment=function(e,t){var n={instructedAmount:t.amount,instructedCurrency:"USD",debitAccount:{id:t.account.identifier||t.account.id,source:"PRTYINTERNAL"},creditAccount:{id:e.payeeId,source:"EBILL"},additionalInfo:{memo:t.memo}},a=t.isScheduledTransfer&&t.scheduledTransfer&&"OneTime"===t.scheduledTransfer.frequency;if(t.isScheduledTransfer&&!a)n.paymentMode="RECURRING",n.schedule=l(t.scheduledTransfer);else{n.paymentMode="SINGLE";var r=a?t.scheduledTransfer.startDate:t.scheduleDate;n.executionDateTime=i(r),n.urgentTransfer=t.urgentTransfer}return n},t.createPaymentTemplate=function(){return{amount:0,scheduleDate:new Date,currencySym:"$",isScheduledTransfer:!1,scheduledTransfer:{startDate:new Date,intervals:[],timesToRepeat:1},memo:""}}}this.getModel=function(){return new t}};i.$inject=["lpCoreUtils"],exports.lpEBillPayService=i}.call(exports,t,exports,e),!(void 0!==n&&(e.exports=n))}])});
//# sourceMappingURL=main.js.map