!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("base"),require("core"),require("module-tags"),require("module-charts"),require("hammerjs"),require("ui"),require("module-contacts"),require("d3")):"function"==typeof define&&define.amd?define(["base","core","module-tags","module-charts","hammerjs","ui","module-contacts","d3"],n):"object"==typeof exports?exports["module-transactions"]=n(require("base"),require("core"),require("module-tags"),require("module-charts"),require("hammerjs"),require("ui"),require("module-contacts"),require("d3")):t["module-transactions"]=n(t.base,t.core,t["module-tags"],t["module-charts"],t.hammerjs,t.ui,t["module-contacts"],t.d3)}(this,function(t,n,e,a,i,o,r,s){return function(t){function n(a){if(e[a])return e[a].exports;var i=e[a]={exports:{},id:a,loaded:!1};return t[a].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){e(2),t.exports=e(6)},,function(t,n,e){var a=e(3);"string"==typeof a&&(a=[[t.id,a,""]]),e(5)(a,{}),a.locals&&(t.exports=a.locals)},function(t,n,e){n=t.exports=e(4)(),n.push([t.id,'.lp-transactions-list-authorizations .lp-auth-header {\n  padding-left: 15px;\n  cursor: pointer;\n  font-size: 1.3em;\n}\n.lp-transactions-list-authorizations .centered div {\n  line-height: 1.5;\n}\n@media (max-width: 1199px) {\n  .lp-transactions-list-authorizations .lp-auth-header {\n    font-size: 1.2em;\n  }\n}\n@media (max-width: 991px) {\n  .lp-transactions-list-authorizations .lp-auth-header {\n    font-size: 1.2em;\n  }\n}\n@media (max-width: 767px) {\n  .lp-transactions-list-authorizations .lp-auth-header {\n    font-size: 1.1em;\n  }\n}\n/**\n * Component Transactions Charts\n */\n.lp-chart-balances,\n.lp-chart-turnovers {\n  height: 260px;\n}\n.chart-progress-indicator .panel {\n  border: 0;\n}\n.chart-empty-data {\n  text-align: center;\n  padding: 80px 0;\n}\n/**\n * Component Transactions Search\n */\n.lp-search-right {\n  border-left: 1px solid #DEDEDE;\n}\n.lp-search-right .input-group-btn {\n  width: 170px;\n}\n.lp-search-right .input-group-btn > button > span {\n  font-size: 0.857em;\n  width: 100%;\n  display: inline-block;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  line-height: 1em;\n}\n.lp-search-right .input-group-btn > button > span:before {\n  font-family: \'Backbase-Neue\';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  content: "\\E603";\n  position: absolute;\n  right: 5px;\n}\n.lp-search-right .input-group-btn.open > button > span:before {\n  content: "\\E604";\n}\n.lp-search-right .dropdown-toggle i {\n  display: none;\n}\n.lp-search-right .dropdown .dropdown-menu {\n  margin-top: 4px;\n  right: 0;\n  border: 1px solid #ddd;\n}\n.lp-search-right .dropdown .dropdown-menu > li:first-child {\n  border-top: none;\n}\n.lp-search-right .dropdown .dropdown-menu > li:first-child > a {\n  border-top-right-radius: 4px;\n  border-top-left-radius: 4px;\n}\n.lp-search-right .dropdown .dropdown-menu > li:last-child > a {\n  border-bottom-right-radius: 4px;\n  border-bottom-left-radius: 4px;\n}\n.lp-search-right .dropdown .dropdown-menu > li > a {\n  padding: 20px;\n}\n.lp-search-right .dropdown .dropdown-menu > li > a i {\n  font-size: 1.2em;\n}\n.lp-search-right .dropdown .dropdown-menu > li > a .option-label {\n  font-size: 1em;\n  padding: 0 36px 0 18px;\n}\n.lp-search-right .dropdown .dropdown-menu > li > a > span > i.lp-icon-checkmark_fat {\n  visibility: hidden;\n  position: absolute;\n  top: 22px;\n  right: 20px;\n}\n.lp-search-right .dropdown .dropdown-menu > li > a > span > i.option-icon {\n  color: #337ab7;\n}\n.lp-search-right .dropdown .dropdown-menu > li.active > a > span > i.lp-icon-checkmark_fat {\n  visibility: visible;\n}\n.lp-search-right .dropdown .dropdown-menu > li.active > a > span > i.option-icon {\n  color: currentColor;\n}\n/**\n * Component Transactions List\n */\n.transaction-details .tab-content {\n  background-color: transparent !important;\n  padding: 0 19px 14px 19px !important;\n}\n.transaction-details .tab-content .lp-category-select {\n  margin-top: 14px;\n}\n.transaction-details .tab-content .lp-transaction-details .progress-indicator {\n  border: 0 none;\n}\n.transaction-details .tab-content .lp-transaction-details .row > div {\n  margin-top: 14px;\n  text-align: left;\n  padding-right: 10px;\n}\n.transaction-details .tab-content .lp-transaction-details .row > div .transaction-detail-label {\n  line-height: 1em;\n  margin-bottom: 10px;\n  font-weight: bold;\n}\n.transaction-details .tab-content .lp-transaction-details .row > div .transaction-detail-map {\n  width: 100%;\n  height: 90px;\n  max-width: 160px;\n}\n.transaction-details .tab-content .lp-transaction-details .row.transaction-detail-reference {\n  margin-top: 23px;\n}\n.transaction-details .tab-content .lp-transaction-details .row.transaction-detail-reference .transaction-detail-value {\n  white-space: nowrap;\n}\n.lp-transactions-list-category {\n  max-width: 150px;\n}\n.lp-transactions-list-category-noanim {\n  -webkit-transition: none !important;\n  transition: none !important;\n}\n/** Item head */\n.lp-transactions-list-item-head {\n  display: block !important;\n  padding-left: 9px;\n  white-space: nowrap;\n  -webkit-transition: padding-left 0.4s ease;\n  -moz-transition: padding-left 0.4s ease;\n  -o-transition: padding-left 0.4s ease;\n  transition: padding-left 0.4s ease;\n}\n.lp-transactions-list-item-head-noanim {\n  -webkit-transition: none;\n  -moz-transition: none;\n  -o-transition: none;\n  transition: none;\n}\n.preview-all .lp-transactions-list-item-head,\n.preview.lp-transactions-list-item-head {\n  padding-left: 160px;\n}\n/** Columns */\n.lp-transactions-list .column {\n  display: inline-block;\n  vertical-align: top;\n  -webkit-transition: padding .4s ease, width .4s ease;\n  -moz-transition: padding .4s ease, width .4s ease;\n  -o-transition: padding .4s ease, width .4s ease;\n  transition: padding .4s ease, width .4s ease;\n}\n.lp-transactions-list-large .column {\n  padding-left: 15px;\n  padding-right: 15px;\n}\n/** Item category */\n.lp-transactions-list-item-category {\n  display: block !important;\n}\n.lp-transactions-list-item-content {\n  height: 55px;\n  position: relative;\n  width: 100%;\n}\n/** Date */\n.lp-transactions-list-item-date {\n  width: 16.66666667%;\n}\n.lp-transactions-list-large .lp-transactions-list-item-date {\n  width: 8.33333333%;\n}\n.lp-transactions-list-no-icons .lp-transactions-list-item-date {\n  width: 16.66666667%;\n}\n.lp-transactions-list-item-date-value {\n  font-size: 16px;\n  font-weight: 500;\n  line-height: 1.1;\n  text-align: center;\n}\n/** Icon */\n.lp-transactions-list-item-icon {\n  width: 8.33333333%;\n}\n.lp-transactions-list-small .lp-transactions-list-item-icon,\n.lp-transactions-list-medium .lp-transactions-list-item-icon,\n.lp-transactions-list-no-icons .lp-transactions-list-item-icon {\n  display: none;\n}\n/** Summary */\n.lp-transactions-list-item-summary {\n  text-align: left;\n  width: 58.33333333%;\n}\n.lp-transactions-list-item-name {\n  font-size: 16px;\n  font-weight: 500;\n  line-height: 1.1;\n  margin-bottom: 3px;\n}\n.lp-transactions-list-item-type,\n.lp-transactions-list-item-info {\n  font-size: 12px;\n  font-weight: 500;\n  line-height: 1.1;\n  margin-top: 0;\n  margin-bottom: 0;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.lp-transactions-list-small .lp-transactions-list-item-type,\n.lp-transactions-list-medium .lp-transactions-list-item-type {\n  display: none;\n}\n.lp-transactions-list-large .lp-transactions-list-item-info {\n  display: none;\n}\n/** Transaction amount */\n.lp-transactions-list-item-amount {\n  font-weight: 500;\n  line-height: 1.1;\n  text-align: right;\n  white-space: nowrap;\n  width: 24.99999999%;\n}\n.lp-transactions-list-item-amount-value {\n  float: right;\n  font-size: 16px;\n}\n.lp-transactions-list-item-details {\n  height: 0;\n  overflow: hidden;\n}\n.lp-transactions-list-item.open .lp-transactions-list-item-details {\n  height: auto;\n}\n/** Category */\n.preview-all .lp-transactions-list-category {\n  width: 160px;\n}\n.lp-transactions-list-item-head-noanim .lp-transaction-category {\n  -webkit-transition: none;\n  -moz-transition: none;\n  -o-transition: none;\n  transition: none;\n}\n',""])},function(t,n){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],n=0;n<this.length;n++){var e=this[n];e[2]?t.push("@media "+e[2]+"{"+e[1]+"}"):t.push(e[1])}return t.join("")},t.i=function(n,e){"string"==typeof n&&(n=[[null,n,""]]);for(var a={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(a[o]=!0)}for(i=0;i<n.length;i++){var r=n[i];"number"==typeof r[0]&&a[r[0]]||(e&&!r[2]?r[2]=e:e&&(r[2]="("+r[2]+") and ("+e+")"),t.push(r))}},t}},function(t,n,e){function a(t,n){for(var e=0;e<t.length;e++){var a=t[e],i=u[a.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](a.parts[o]);for(;o<a.parts.length;o++)i.parts.push(s(a.parts[o],n))}else{for(var r=[],o=0;o<a.parts.length;o++)r.push(s(a.parts[o],n));u[a.id]={id:a.id,refs:1,parts:r}}}}function i(t){for(var n=[],e={},a=0;a<t.length;a++){var i=t[a],o=i[0],r=i[1],s=i[2],c=i[3],l={css:r,media:s,sourceMap:c};e[o]?e[o].parts.push(l):n.push(e[o]={id:o,parts:[l]})}return n}function o(){var t=document.createElement("style"),n=h();return t.type="text/css",n.appendChild(t),t}function r(){var t=document.createElement("link"),n=h();return t.rel="stylesheet",n.appendChild(t),t}function s(t,n){var e,a,i;if(n.singleton){var s=v++;e=f||(f=o()),a=c.bind(null,e,s,!1),i=c.bind(null,e,s,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(e=r(),a=d.bind(null,e),i=function(){e.parentNode.removeChild(e),e.href&&URL.revokeObjectURL(e.href)}):(e=o(),a=l.bind(null,e),i=function(){e.parentNode.removeChild(e)});return a(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;a(t=n)}else i()}}function c(t,n,e,a){var i=e?"":a.css;if(t.styleSheet)t.styleSheet.cssText=m(n,i);else{var o=document.createTextNode(i),r=t.childNodes;r[n]&&t.removeChild(r[n]),r.length?t.insertBefore(o,r[n]):t.appendChild(o)}}function l(t,n){var e=n.css,a=n.media;if(n.sourceMap,a&&t.setAttribute("media",a),t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}function d(t,n){var e=n.css,a=(n.media,n.sourceMap);a&&(e+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");var i=new Blob([e],{type:"text/css"}),o=t.href;t.href=URL.createObjectURL(i),o&&URL.revokeObjectURL(o)}var u={},p=function(t){var n;return function(){return"undefined"==typeof n&&(n=t.apply(this,arguments)),n}},g=p(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),h=p(function(){return document.head||document.getElementsByTagName("head")[0]}),f=null,v=0;t.exports=function(t,n){n=n||{},"undefined"==typeof n.singleton&&(n.singleton=g());var e=i(t);return a(e,n),function(t){for(var o=[],r=0;r<e.length;r++){var s=e[r],c=u[s.id];c.refs--,o.push(c)}if(t){var l=i(t);a(l,n)}for(var r=0;r<o.length;r++){var c=o[r];if(0===c.refs){for(var d=0;d<c.parts.length;d++)c.parts[d]();delete u[c.id]}}}};var m=function(){var t=[];return function(n,e){return t[n]=e,t.filter(Boolean).join("\n")}}()},function(t,n,e){var a;(function(t){a=function(t,n,a){"use strict";a.name="module-transactions-3";var i=e(8),o=e(9),r=e(10),s=e(11),c=e(12),l=e(17),d=e(19),u=e(21),p=e(28),g=e(32),h=e(37),f=e(41),v=e(19),m=[o.name,r.name,s.name,c.name,l.name,d.name,u.name,p.name,g.name,h.name,f.name,v.name];a.exports=i.createModule(a.name,m).provider(e(46)).directive(e(47))}.call(n,e,n,t),!(void 0!==a&&(t.exports=a))}).call(n,e(7)(t))},function(t,n){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(n,e){n.exports=t},function(t,e){t.exports=n},function(t,n){t.exports=e},function(t,n){t.exports=a},function(t,n,e){var a;(function(t){a=function(t,n,a){"use strict";a.name="component.transactions-categories";var i=e(8),o=e(9),r=[o.name];a.exports=i.createModule(a.name,r).provider(e(13)).directive(e(14)).filter(e(16))}.call(n,e,n,t),!(void 0!==a&&(t.exports=a))}).call(n,e(7)(t))},function(t,n,e){var a;a=function(t,n,e){"use strict";n.lpTransactionsCategory=function(t){var n={generic:"Generic error",badId:"The id must be a string"};this.$get=function(e,a,i){function o(){function a(){this.categories=[]}return a.prototype.getAll=function(){return e.get(r.endpoint).then(function(e){return t.isArray(e.data)?(this.categories=e.data,this.categories):void i.throwException(new Error(n.generic))}.bind(this),function(t,e,a,o){i.throwException(new Error(n.generic))})},a.prototype.getById=function(a){return t.isString(a)||i.throwException(new TypeError(n.badId)),e.get(r.endpoint+"/"+a).then(function(t){return t.data},function(t){i.throwException(new Error(n.generic))})},a.prototype.create=function(a){return t.isObject(a)&&a.name&&a.color||i.throwException(new Error("Bad category data: "+a)),e.post(r.endpoint,a).then(function(t){var n=t.data;return this.categories.push(n),n}.bind(this),function(t){i.throwException(new Error(n.generic))})},a.prototype.removeById=function(a){return t.isString(a)||i.throwException(new TypeError(n.badId)),e["delete"](r.endpoint+"/"+a).then(function(n){var e=t(this.categories).find({id:a});return this.categories.splice(t(this.categories).indexOf(e),1),e}.bind(this),function(t){i.throwException(new Error(n.generic))})},new a}var r={endpoint:""};return{setConfig:function(n){return r=t(n).chain().mapValues(t.resolvePortalPlaceholders).defaults(r).value(),this},api:o}},this.$get.$inject=["$http","$q","lpCoreError"]},n.lpTransactionsCategory.$inject=["lpCoreUtils"]}.call(n,e,n,t),!(void 0!==a&&(t.exports=a))},function(t,n,e){var a;a=function(t,n,a){"use strict";function i(){var t,n,e=arguments[0]/255,a=arguments[1]/255,i=arguments[2]/255,o=Math.max(e,a,i),r=Math.min(e,a,i),s=(o+r)/2;if(o===r)t=n=0;else{var c=o-r;switch(n=s>.5?c/(2-o-r):c/(o+r),o){case e:t=(a-i)/c+(i>a?6:0);break;case a:t=(i-e)/c+2;break;case i:t=(e-a)/c+4}t/=6}return{h:Math.round(360*t),s:Math.round(100*n),l:Math.round(100*s)}}var o=e(15),r=window.jQuery;n.lpCategoryDisplay=function(t,n){return t.put("$categoryDisplay.html",'<div class="lp-transaction-category" ng-click="onClick($event, transaction)"><span class="category-marker" ng-style="markerStyle"></span><div class="category-name"><span class="h4">{{category.name}}</span></div></div>'),{restrict:"A",replace:!0,require:"ngModel",scope:{isCategoryView:"=lpCategoryView",categoryList:"=lpCategoryList",transaction:"=ngModel",categoryClick:"&",categorySwipe:"&",categoryStartSwipe:"&",categoryEndSwipe:"&"},template:t.get("$categoryDisplay.html"),link:function(t,e,a){var i=e.parent().parent(),r=0;t.markerStyle={},t.category=null,t.onClick=function(n,e){t.categoryClick({$event:n,transaction:t.transaction})};var s={},c=i.data("touch"),l=function(n){n.srcEvent.stopPropagation(),n.preventDefault(),e.parent().addClass("no-animation");var a=r+Math.floor(n.deltaX);a>160&&(a=160),a>r&&e.parent().css("width",a+"px"),t.categorySwipe({$event:n,transaction:t.transaction})},d=function(n){n.srcEvent.stopPropagation(),n.preventDefault(),r=parseInt(e.css("width"),10),t.categoryStartSwipe({$event:n,transaction:t.transaction})},u=function(n){n.srcEvent.stopPropagation(),n.preventDefault(),e.parent().removeClass("no-animation");var a=r+Math.floor(n.deltaX);a>160&&(a=160),a>150&&t.categoryClick({$event:null,transaction:t.transaction}),e.parent().css("width",""),t.categoryEndSwipe({event:n,transaction:t.transaction})};t.isCategoryView||"undefined"==typeof o||(c||(c=new o(i[0]),i.data("touch",c)),s.panright=c.on("panright",l),s.panstart=c.on("panstart",d),s.panend=c.on("panend",u)),t.$on("$destroy",function(){Object.keys(s).forEach(function(t){var n=s[t];n.off(t,n.handlers[t][0])})}),t.$watch("transaction.categoryId",function(n){t.setCategory(n)}),t.setCategory=function(n){if(t.categoryList)for(var e=0;e<t.categoryList.length;e++)t.categoryList[e].id===n&&(t.category=t.categoryList[e]);t.category&&n?t.markerStyle.backgroundColor=t.category.color:t.transaction.categoryId="00cc9919-ba0c-4702-917b-1fba4c256b4d"},n.subscribe("launchpad-retail.categoryDelete",function(n){n.id===t.transaction.categoryId&&t.setCategory()})}}},n.lpCategoryDisplay.$inject=["$templateCache","lpCoreBus"],n.lpCategoryItem=function(){return{restrict:"A",replace:!0,template:'<div class="category-item btn btn-block btn-default" tabIndex="{{category.id !== transaction.categoryId ? 0 : -1}}" ng-style="{\'background-color\': category.id === newCategoryId ? category.color : \'#ffffff\'}" ng-click="markNewCategory(category.id)" ng-keydown="categoryKeyDown($event, category)"><div class="marker" ng-style="{\'background-color\':category.color}"></div><span class="name" ng-class="{ light: (category.id === newCategoryId && getTextColor(category.color)) }">{{category.name}}</span><button type="button" class="close" aria-hidden="true" ng-click="deleteCategory($event, category)" ng-if="category.type ===\'NORMAL\'">&times;</button></div>'}},n.lpCategorySelect=function(t,n,e,a){return t.put("$categorySelect.html",'<div class="lp-category-select clearfix"><div class="clearfix"><label class="control-label pull-left" lp-i18n="Current Category:"></label><div ng-repeat="category in transactionCategories | orderBy:\'-priority\' | selectedCategory:this" class="col-xs-6 col-sm-4 col-md-4"><div lp-category-item="lp-category-item"></div></div></div><label class="control-label pull-left" lp-i18n="Change category to:"></label><form class="form category-search clearfix" role="form" ng-submit="createCategory()"><input type="text" ng-model="categoryFilter" class="form-control" placeholder="{{\'Search categories / Create category\'|translate}}" maxlength="40" ng-disabled="showColorPicker" /></form><div class="category-list col-xs-12 col-sm-12 col-md-9"><div class="new-category col-xs-12 col-sm-12 col-md-12" ng-if="!categoryExists() && !showColorPicker && categoryFilter.length > 0"><label class="control-label pull-left" lp-i18n="Create new category:"></label><div ng-repeat="category in newCategory" class="col-xs-6 col-sm-6 col-md-6"><div lp-category-item="lp-category-item"></div></div></div><ul class="category-list col-xs-12 col-sm-12 col-md-12"><li ng-repeat="category in transactionCategories | orderBy:\'-priority\' | categoryList:this" class="col-xs-6 col-sm-4 col-md-4" ng-show="!showColorPicker"><div lp-category-item="lp-category-item"></div></li><div id="{{\'transaction-\' + transaction.id + \'-category-step-2\'}}" class="clearfix" ng-if="showColorPicker"><label class="clearfix" lp-i18n="Choose a color for the new category:"></label><div lp-color-picker="lp-color-picker" select-color="selectColor"></div></div></ul></div><div id="{{\'transaction-\' + transaction.id + \'-category-step-3\'}}" class="col-xs-12 col-sm-12 col-md-3 category-apply" ng-if="(smallLayout && newCategoryId.length) || !smallLayout"><div class="row" ng-if="smallLayout"><div class="col-xs-12 col-sm-12 clearfix"><label class="control-label pull-left" lp-i18n="You\'ve selected:"></label><div ng-repeat="category in transactionCategories | orderBy:\'-priority\' | markedCategory:this" class="col-xs-7 col-sm-6 col-md-4"><div lp-category-item="lp-category-item"></div></div></div><div class="col-xs-12 col-sm-12 clearfix"><p lp-i18n="Would you like to change the category for only this transaction or all similar transactions?"></p></div></div><div class="row"><div class="col-sm-12 col-md-12" ng-if="!smallLayout"><p lp-i18n="Apply category change to?"></p></div><div class="col-xs-6 col-sm-6 col-md-12"><button type="button" class="btn btn-default btn-block" ng-click="changeCategory(newCategoryId)" ng-disabled="!newCategoryId.length" lp-i18n="Only This"></button></div><div class="col-xs-6 col-sm-6 col-md-12"><button type="button" class="btn btn-default btn-block" ng-click="changeCategory(newCategoryId, true)" ng-disabled="!newCategoryId.length" lp-i18n="All Similar"></button></div></div></div></div>'),{restrict:"A",replace:!1,require:"ngModel",scope:{model:"=ngModel",transaction:"=",update:"=",smallLayout:"=",offsetTopCorrection:"="},template:t.get("$categorySelect.html"),link:function(t,o,s){t.showColorPicker=!1,t.searchResultNumber=t.model.categories.length;var c=function(){t.transactionCategories=[];for(var n=0;n<t.model.categories.length;n++)t.transactionCategories.push(a.cloneDeep(t.model.categories[n]))};c();var l=function(e){t.smallLayout&&n(function(){r("body").animate({scrollTop:r("#transaction-"+t.transaction.id+(e>1?"-category-step-"+e:"")).offset().top-5-(t.offsetTopCorrection||0)},500)},0)},d=function(){n(function(){r(o).find('button[ng-click^="changeCategory"]')[0].focus()},0)};t.$watch("categoryFilter",function(n){t.newCategory=[{id:null,name:n,color:"#cccccc"}]}),t.categoryExists=function(){var n=!1;if(t.categoryFilter&&t.categoryFilter.length>0)for(var e=0;e<t.model.categories.length;e++)t.categoryFilter.toLowerCase()===t.model.categories[e].name.toLowerCase()&&(n=!0);return n},t.getTextColor=function(t){var n=!0,e=t.substr(1,2),a=t.substr(3,2),o=t.substr(5,2);return 4===t.length&&(e=t.substr(1,1)+t.substr(1,1),a=t.substr(2,1)+t.substr(2,1),o=t.substr(3,1)+t.substr(3,1)),e=parseInt(e,16),a=parseInt(a,16),o=parseInt(o,16),i(e,a,o).l>45&&(n=!1),n},t.newCategoryId="",t.markNewCategory=function(n){if(null===n)return void t.createCategory();if(t.transaction.categoryId!==n){if(t.newCategoryId===n)return void(t.newCategoryId="");t.newCategoryId=n,l(3),d()}},t.categoryKeyDown=function(n,e){if(13===n.which||32===n.which){if(n.preventDefault(),n.stopPropagation(),"button"===n.target.tagName.toLowerCase())return void t.deleteCategory(n,e);t.markNewCategory(e.id)}},t.createCategory=function(){var e=!t.categoryExists()&&t.categoryFilter.length>0;e?(t.showColorPicker=!0,l(2)):t.searchResultNumber&&n(function(){r(".category-list .category-item")[0].focus()},0)},t.selectColor=function(n){t.model.create({name:t.categoryFilter,color:n}).then(function(n){t.categoryFilter="",t.showColorPicker=!1,c(),t.markNewCategory(n.id),e.publish("launchpad-retail.categoryListUpdate",null,!0),l(3),d()},function(n){e.publish("launchpad.add-notification",{notification:{id:"category-create-duplicate",level:"SEVERE",message:n.data.error,closable:!0}},!0),t.categoryFilter="",t.showColorPicker=!1})},t.deleteCategory=function(n,a){n.stopPropagation(),"NORMAL"===a.type&&t.model.removeById(a.id).then(function(){t.newCategoryId===a.id&&(t.newCategoryId=""),c(),e.publish("launchpad-retail.categoryDelete",{id:a.id},!0),e.publish("launchpad-retail.categoryListUpdate",null,!0)})},t.changeCategory=function(e,a){t.newCategoryId="",t.categoryFilter="",t.update(t.transaction,e,a),n(function(){t.transaction.showDetails=!1},100),l(1),r("#transaction-"+t.transaction.id)[0].focus()},e.subscribe("launchpad-retail.categoryListUpdate",function(){c()})}}},n.lpCategorySelect.$inject=["$templateCache","$timeout","lpCoreBus","lpCoreUtils"]}.call(n,e,n,t),!(void 0!==a&&(t.exports=a))},function(t,n){t.exports=i},function(t,n,e){var a;a=function(t,n,e){"use strict";n.categoryList=function(){return function(t,n){var e=t;n.initialSelected||(n.initialSelected=n.transaction.categoryId);for(var a=0;a<e.length;a++)"TEMPORARY"!==e[a].type?(e[a].priority=1,"CONTROL"===e[a].type&&(e[a].priority=0),e[a].id===n.initialSelected&&(e[a].priority=2)):(e.splice(a,1),a--);for(a=0;a<e.length;a++)n.categoryFilter&&n.categoryFilter.length&&-1===e[a].name.toLowerCase().indexOf(n.categoryFilter.toLowerCase())?(e.splice(a,1),a--):e[a].id===n.transaction.categoryId&&(e.splice(a,1),a--);return n.searchResultNumber=e.length,e}},n.selectedCategory=function(){return function(t,n){for(var e=t,a=0;a<e.length;a++)e[a].id!==n.transaction.categoryId&&(e.splice(a,1),a--);return e}},n.markedCategory=function(){return function(t,n){for(var e=t,a=0;a<e.length;a++)e[a].id!==n.newCategoryId&&(e.splice(a,1),a--);return e}}}.call(n,e,n,t),!(void 0!==a&&(t.exports=a))},function(t,n,e){var a;(function(t){a=function(t,n,a){"use strict";a.name="component.transactions-p2p";var i=e(8),o=e(9),r=[o.name];a.exports=i.createModule(a.name,r).provider(e(18))}.call(n,e,n,t),!(void 0!==a&&(t.exports=a))}).call(n,e(7)(t))},function(t,n,e){var a;a=function(t,n,e){"use strict";n.lpP2PTransactions=function(t){this.$get=function(n,e){function a(){var a=function(){this.transactions=[],this.from=i.from,this.moreAvailable=!0,this.accountsArray=[],this.errorCode=null};return a.prototype.clearTransactionsList=function(){this.transactions=[],this.moreAvailable=!0,this.from=i.from},a.prototype.loadTransactions=function(t){return this.clearTransactionsList(),this.accountsArray=t,this.loadMoreTransactions()},a.prototype.loadTransactions=function(t){return this.clearTransactionsList(),this.accountsArray=t,this.loadMoreTransactions()},a.prototype.loadMoreTransactions=function(){var t=this,a=e.defer();this.loading=!0;var o={accountIds:this.accountsArray.join(","),offset:this.from,limit:i.pageSize};return n.get(i.transactionsEndpoint,{params:o}).success(function(n){t.from+=i.pageSize;var e=t.preprocessTransactions(n);e&&e.length<i.pageSize&&(t.moreAvailable=!1),t.transactions=t.transactions.concat(e),a.resolve(t.transactions)}).error(function(n,e){0==n?gadgets.pubsub.publish("no.internet"):t.errorCode=e.errorCode||500})["finally"](function(){t.loading=!1}),a.promise},a.prototype.preprocessTransactions=function(n){var e=[];return n&&n.length>0&&(e=t.map(n,function(t,e){var a=new Date(t.initiationDateTime);if(t.showDate=!0,e>0){var i=new Date(n[e-1].initiationDateTime);t.showDate=i.getDate()!==a.getDate()||i.getMonth()!==a.getMonth()||i.getFullYear()!==a.getFullYear()}return t.requiresUserAction=!1,"CREDIT"===t.creditDebitIndicator&&"PENDING"===t.status&&(t.requiresUserAction=!0),t})),e},a.prototype.allowMoreResults=function(){return!this.loading&&this.moreAvailable&&!this.errorCode},a.prototype.noTransactionsFound=function(){return!this.loading&&0===this.transactions.length&&!this.errorCode},new a}var i={transactionsEndpoint:"/mock/v1/p2p-payments",pageSize:10,from:1};return{setConfig:function(n){return i=t(n).chain().mapValues(t.resolvePortalPlaceholders).defaults(i).value(),this},getConfig:function(n){return n&&t.isString(n)?i[n]:i},api:a}},this.$get.$inject=["$http","$q"]},n.lpP2PTransactions.$inject=["lpCoreUtils"]}.call(n,e,n,t),!(void 0!==a&&(t.exports=a))},function(t,n,e){var a;(function(t){a=function(t,n,a){"use strict";a.name="component.transactions-currency";var i=e(8),o=e(9),r=[o.name];a.exports=i.createModule(a.name,r).provider(e(20))}.call(n,e,n,t),!(void 0!==a&&(t.exports=a))}).call(n,e(7)(t))},function(t,n,e){var a;a=function(t,n,e){"use strict";n.lpTransactionsCurrency=function(t){this.$get=function(n,e){function a(){var a=function(){this.groups={defaultCurrency:"aDefault",preferredCurrencies:"bPreferred",rest:"cOther"},this.orderedCurrencies=[]};return a.prototype.loadDefaultCurrency=function(){var t=this,a=e.defer();return n.get(i.defaultCurrencyEndpoint).success(function(t){a.resolve(t)}).error(function(){t.error="currencyServiceError"}),a.promise},a.prototype.configureDefaultCurrency=function(t){var n={currency_code:t.currency_code,exchange_rate:1,group:this.groups.defaultCurrency};this.defaultCurrency=n,this.selected=this.defaultCurrency,this.orderedCurrencies.push(this.defaultCurrency)},a.prototype.loadOtherCurrencies=function(){var t=this,a=e.defer();return n.get(i.currencyListEndpoint,{params:{currency:this.defaultCurrency.currency_code}}).success(function(n){n&&t.sortCurrencies(n),a.resolve(n)}).error(function(){t.error="currencyServiceError"}),a.promise},a.prototype.sortCurrencies=function(t){for(var n=0;n<t.preferred.length;n++)t.preferred[n].group=this.groups.preferredCurrencies;if(this.orderedCurrencies.push.apply(this.orderedCurrencies,t.preferred),!i.disableExtraCurrencies){for(var e=0;e<t.rest.length;e++)t.rest[e].group=this.groups.rest;t.rest.sort(function(t,n){var e=t.currency_code.toLowerCase(),a=n.currency_code.toLowerCase();return a>e?-1:e>a?1:0}),this.orderedCurrencies.push.apply(this.orderedCurrencies,t.rest)}},a.prototype.findCurrency=function(n){return t.find(this.orderedCurrencies,function(t){return t.currency_code===n})},a.prototype.selectCurrency=function(t){this.selected=this.findCurrency(t)},new a}var i={defaultCurrencyEndpoint:"/mock/v1/currency-rates/default",currencyListEndpoint:"/mock/v1/currency-rates",disableExtraCurrencies:!1};return{setConfig:function(n){return i=t(n).chain().mapValues(t.resolvePortalPlaceholders).defaults(i).value(),this},getConfig:function(n){return n&&t.isString(n)?i[n]:i},api:a}},this.$get.$inject=["$http","$q"]},n.lpTransactionsCurrency.$inject=["lpCoreUtils"]}.call(n,e,n,t),!(void 0!==a&&(t.exports=a))},function(t,n,e){var a;(function(t){a=function(t,n,a){"use strict";a.name="component.transactions-list";var i=e(8),o=e(22),r=e(10),s=[o.name,r.name];a.exports=i.createModule(a.name,s).directive(e(23)).directive(e(24))}.call(n,e,n,t),!(void 0!==a&&(t.exports=a))}).call(n,e(7)(t))},function(t,n){t.exports=o},function(t,n,e){var a;a=function(t,n){"use strict"}.call(n,e,n,t),!(void 0!==a&&(t.exports=a))},function(t,n,e){var a;a=function(t,n){"use strict";function a(){var t=!1;try{Object.defineProperty({},"x",{})}catch(n){t=!0}return t}var i=window.jQuery;n.lpTransactionsList=function(t,n,o,r,s,c,l){function d(t){return i("#transaction-"+t.id)}function u(t){return d(t).find('[data-role="transactions-list-item-category"]')}function p(r,l,p){var g=a(),h=160,f=9;r.$watch("accounts.selected",function(t){t&&r.transactions.loadTransactions(t).then(function(){s.publish("widget-transactions:transactions:ready",r.transactions.transactions),r.showScrollbar&&m(l.find(".transactions-list-wrapper"))})}),r.$on("$destroy",function(){}),r.previewAll=!1,r.showCategoriesToggle=c.isUndefined(r.showCategoriesToggle)?!0:r.showCategoriesToggle,r.transactionKeydown=function(t,n){(13===t.which||32===t.which)&&(t.preventDefault(),t.stopPropagation(),r.loadTransactionDetails(n),r.openDetails(n))},r.loadTransactionDetails=function(t){t.isLoading=!0,r.transactions.loadTransactionDetails(t).then(function(n){t.categoryId&&r.transactionsCategories.getById(t.categoryId).then(function(t){n.category=t})})["finally"](function(){t.isLoading=!1})},r.loadMoreTransactions=function(){if(r.transactionsLoading=!0,!r.transactions.loading){var n=r.transactions.transactions.length;r.transactions.loadMoreTransactions().then(function(){setTimeout(function(){var e=i(t.body).find(".transactions-list-row").eq(n);e.focus()},100),r.transactionsLoading=!1})}},r.updateTransactionCategory=function(t,n,e){var a;a=e?r.transactions.updateSimilarTransactionCategory(t,n):r.transactions.updateTransactionCategory(t,n),a.success(function(){})},r.openDetails=function(t,a){var s=l.find("#transaction-details-"+t.id);if(t.showDetails=!t.showDetails,!s.children().size()){var c=i(e(25));s.append(c),o(c)(s.scope())}var d=function(t,n){for(var e in t)t.hasOwnProperty(n)&&(t[e]=!1,e===n&&(t[e]=!0))};(null===a||void 0===a)&&(a="details"),t.showDetails&&n(function(){d(t.detailTabs,a)},0),"details"===a&&r.loadTransactionDetails(t),r.closePreview(t),r.categorySmallLayout&&t.showDetails&&i("body").animate({scrollTop:i("#transaction-"+t.id).offset().top-5-(r.offsetTopCorrection||0)},500);var u=document.getElementById("transactions-tabs");!r.showDetails&&u&&(u.style.display="none",u.style.display="block")},r.selectDetailsTab=function(t){r.loadTransactionDetails(t)},r.openPreview=function(t){t.preview=!0,t.showDetails||(g?i("#transaction-"+t.id+" .categories").width(h):i("#transaction-"+t.id).addClass("preview"))},r.closePreview=function(t){t.preview=!1,g?i("#transaction-"+t.id+" .categories").width(f):i("#transaction-"+t.id).removeClass("preview"),
d(t).removeClass("lp-transactions-list-item-head-noanim").css("padding-left",""),u(t).css("width","")},r.categoryClick=function(t,n){null!==t&&void 0!==t&&(t.preventDefault(),t.stopPropagation()),r.openDetails(n,"categories")},r.categorySwipeStart=function(t,n){d(n).addClass("lp-transactions-list-item-head-noanim")},r.categorySwipe=function(t,n){var e,a=u(n),i=Math.max(t.deltaX,0);a.width(i),e=a.width(),d(n).css("padding-left",e)},r.categorySwipeEnd=function(t,n){r.closePreview(n)};var v=function(t){return c.isString(t)?c.trim(t):c.isArray(t)&&!t.length?"":t||""};r.getTransactionDescription=function(t){var n=v(t.counterpartyName),e=v(t.transactionDescription),a=v(t.transactionType);return n||e||a},r.getTransactionSubDescription=function(t){var n=v(t.accountName),e=v(t.counterpartyName),a=v(t.transactionDescription),i=v(t.transactionType);return n?n:e||a?i:""},r.toggleCategoryView=function(){r.previewAll=!r.previewAll}}function g(t,n){return p}var h=t.getPreference("customTemplateSrc"),f=h&&r.get(h),v=h&&l.resolvePath(h),m=function(t){n(function(){var n=t.length?t[0]:t,e=n.offsetHeight;e&&(n.style.height=e+"px",n.style.overflowY="auto")})};return{scope:{accounts:"=lpAccounts",transactions:"=lpTransactions",transactionsCategories:"=lpTransactionsCategories",categoryLayout:"=",showCategories:"=",showCategoriesToggle:"=?",showTransactionIcons:"=",showDatesAllTransactions:"=",hideDetailsPreference:"=",offsetTopCorrection:"=?",showScrollbar:"="},restrict:"AE",compile:g,templateUrl:!f&&v,template:f||!h&&e(26)}},n.lpTransactionsList.$inject=["lpWidget","$timeout","$compile","$templateCache","lpCoreBus","lpCoreUtils","lpCoreTemplate"],n.lpTransactionsListDetails=function(t,n,a){function i(t,n,e){}function o(t,n){return i}return{restrict:"AE",scope:{transaction:"=",categories:"=",isLoading:"="},compile:o,template:e(27)}},n.lpTransactionsListDetails.$inject=["$templateCache","$timeout","lpCoreUtils"]}.call(n,e,n,t),!(void 0!==a&&(t.exports=a))},function(t,n,e){var a;a=function(){"use strict";var t='<div class="col-xs-12 col-sm-12"><div alert="alert" class="alert alert-info" ng-show="transaction.errorCode"><span lp-i18n="{{transaction.errorCode}}"></span></div><ul tabset="tabset" class="transaction-details-navbar" ng-if="showCategories && transaction.showDetails && !hideDetailsPreference"><li tab="tab" select="selectDetailsTab(transaction)" active="transaction.detailTabs.details"><span tab-heading="tab-heading" lp-i18n="Details"></span><div lp-transactions-list-details="lp-transactions-list-details" transaction="transaction" categories="transactionsCategories" is-loading="transaction.isLoading"></div></li><li tab="tab" active="transaction.detailTabs.categories">  <span tab-heading="tab-heading" lp-i18n="Categories"></span>  <div lp-category-select="lp-category-select" ng-model="transactionsCategories" transaction="transaction" update="updateTransactionCategory" small-layout="categoryLayout === \'small\'" offset-top-correction="offsetTopCorrection" class="panel-body no-padding"></div></li></ul><div class="panel-body no-padding" ng-if="showCategories && transaction.showDetails && hideDetailsPreference"><div lp-category-select="lp-category-select" ng-model="transactionsCategories" transaction="transaction" update="updateTransactionCategory" small-layout="categoryLayout === \'small\'" offset-top-correction="offsetTopCorrection" class="panel-body no-padding"></div></div><div lp-transactions-list-details="lp-transactions-list-details" transaction="transaction" categories="transactionsCategories" is-loading="transaction.isLoading" ng-if="!showCategories && transaction.showDetails && !hideDetailsPreference"></div></div>';return t}.call(n,e,n,t),!(void 0!==a&&(t.exports=a))},function(t,n,e){var a;a=function(){"use strict";var t='<div class="lp-transactions-list lp-transactions-list-{{categoryLayout}} lp-widget-body" ng-class="{logohidden: hideLogo, \'preview-all\': previewAll, \'lp-transactions-list-no-icons\': !showTransactionIcons }"><div class="category-toggle" ng-if="showCategories && showCategoriesToggle"><button class="btn btn-default" tabindex="0" aria-pressed="{{ previewAll }}" ng-click="toggleCategoryView()" ng-class="{ \'active\': previewAll }"><i title="Category view" class="lp-icon lp-icon-tag"></i><span class="sr-only">Show Categories</span></button></div><div class="panel-message" ng-if="transactions.noTransactionsFound()" role="alert"><p>There are no transactions to display<span ng-show="!transactions.isSearching()">for this account</span><span ng-show="transactions.isSearching()">for this search</span>.</p></div><div lp-freshness-message="lp-freshness-message"></div><div class="transactions-list-wrapper" lp-infinite-scroll="loadMoreTransactions()" lp-infinite-scroll-disabled="!showScrollbar || transactions.loading || !accounts.selected" lp-infinite-scroll-end="!transactions.moreAvailable"><div id="transactions-list" role="presentation" class="list-group list-view transactions-list lp-transactions-list-items"><div class="lp-transactions-list-item list-group-item list-view-row expandable clearfix" ng-class="{ open: transaction.showDetails }" ng-repeat="transaction in transactions.transactions track by $index"><div class="lp-transactions-list-item-head list-view-container cursor-pointer clearfix" ng-click="openDetails(transaction)" tabindex="0" ng-keydown="transactionKeydown($event, transaction)" ng-mouseleave="closePreview(transaction)" role="button" id="transaction-{{transaction.id}}" aria-expanded="{{ !!transaction.showDetails }}" aria-controls="transaction-details-{{transaction.id}}"><div class="lp-transactions-list-item-category categories" ng-mouseover="categoryLayout == \'small\' || openPreview(transaction)" ng-if="showCategories"><div class="lp-transactions-list-category" data-role="transactions-list-item-category" lp-category-display="lp-category-display" lp-category-view="previewAll" lp-category-list="transactionsCategories.categories" ng-model="transaction" category-click="categoryClick($event, transaction)" category-start-swipe="categorySwipeStart($event, transaction)" category-swipe="categorySwipe($event, transaction)" category-end-swipe="categorySwipeEnd($event, transaction)"></div></div><div class="lp-transactions-list-item-content" data-role="transactions-item-info"><div class="lp-transactions-list-item-date column" ng-mouseover="categoryLayout == \'small\' || openPreview(transaction)"><div class="centered"><div class="lp-transactions-list-item-date-value" aria-hidden="true" ng-if="transaction.newDate || showDatesAllTransactions"><span itemprop="dateTimeMonth">{{transaction.bookingDateTime | date:\'MMM\'}}</span><br /><span itemprop="dateTimeDate">{{transaction.bookingDateTime | date:\'dd\'}}</span></div></div></div><div class="lp-transactions-list-item-icon column" ng-if="showTransactionIcons"><div class="centered"><div class="lp-transaction-icon gray-image-hover"><img ng-if="transaction.counterPartyLogoPath" ng-src="{{transaction.counterPartyLogoPath}}" width="35" height="35" alt=""/></div></div></div><div class="lp-transactions-list-item-summary column"><div class="centered"><div class="lp-transactions-list-item-name counterparty-name" itemProp="counterpartyName"><span class="sr-only">Name</span>{{getTransactionDescription(transaction)}}</div><div class="lp-transactions-list-item-type text-muted" itemProp="transactionType"><span class="sr-only">Transaction type</span>{{getTransactionSubDescription(transaction)}}</div><div class="lp-transactions-list-item-info text-muted"><span class="sr-only" lp-i18n="Date"></span>{{transaction.bookingDateTime | date:\'MMM\'}} {{transaction.bookingDateTime | date:\'dd\'}} <span class="h6 text-muted transactions-list-item-amount" itemProp="transactionAmount" lp-amount="transaction.transactionAmount" lp-amount-currency="transaction.transactionCurrency"></span></div></div></div><div class="lp-transactions-list-item-amount column"><div class="centered"><span class="sr-only">Amount</span><span class="lp-transactions-list-item-amount-value" itemProp="transactionAmount" lp-amount="transaction.transactionAmount" lp-amount-currency="transaction.transactionCurrency"></span></div></div></div><div class="lp-transactions-list-item-toggle"></div></div><div class="clearfix details lp-transactions-list-item-details transaction-details" id="transaction-details-{{transaction.id}}" aria-labelledby="transaction-details-data-{{transaction.id}}"></div></div></div><div ng-if="showScrollbar && transactions.loading" role="alert"><div class="text-center" lp-i18n="Loading transactions..."></div></div><div ng-if="!showScrollbar"><div ng-show="transactions.allowMoreResults()"><p class="lp-transactions-list-more text-center"><a href="" class="lp-transactions-list-more-button cursor-pointer" tabindex="0" ng-click="loadMoreTransactions()" lp-i18n="Show more"></a></p></div><div ng-if="transactions.loading" role="alert"><p class="panel-message text-center" lp-i18n="Loading transactions..."></p></div></div></div></div>';return t}.call(n,e,n,t),!(void 0!==a&&(t.exports=a))},function(t,n,e){var a;a=function(t,n,e){"use strict";return['<div class="lp-transaction-details container-fluid">','<div progress-indicator="progress-indicator" is-loading="isLoading">','<div ng-if="transaction.details.bookingDateTime && transaction.details.address" class="row">','<div ng-if="transaction.details.bookingDateTime" class="col-xs-6 col-md-3" lp-transaction-details-datetime="transaction.details.bookingDateTime"></div>','<div ng-if="transaction.details.address" class="col-xs-6 col-md-3" lp-transaction-details-address="transaction.details.address"></div>','<div ng-if="transaction.details.location" class="col-xs-6 col-md-3" lp-transaction-details-map="transaction.details.location"></div>','<div ng-if="transaction.details.merchantType || transaction.details.category" class="col-xs-6 col-md-3">','<div ng-show="transaction.details.merchantType" lp-transaction-details-vertical detail-label="\'Merchant\'" detail-value="transaction.details.merchantType"></div>','<div ng-show="!transaction.details.merchantType" lp-transaction-details-vertical detail-label="\'Category\'" detail-value="transaction.details.category.name"></div>',"</div>","</div>",'<div ng-if="!(transaction.details.bookingDateTime && transaction.details.address)" class="row">','<div class="alert alert-warning col-xs-12">','<p><i class="lp-icon lp-icon-alert-warning"></i> <span lp-i18n="Specific details regarding this transaction are currently unavailable, please contact us for further information."></span></p>',"</div>","</div>",'<div ng-if="transaction.details.transactionId" class="row transaction-detail-reference">','<div class="col-xs-12 col-md-12" lp-transaction-details-horizontal detail-label="\'Transaction Reference\'" detail-value="transaction.details.transactionId"></div>',"</div>","</div>","</div>"].join("")}.call(n,e,n,t),!(void 0!==a&&(t.exports=a))},function(t,n,e){var a;(function(t){a=function(t,n,a){"use strict";function i(t,n){n.setConfig({accountHoldsEndpoint:t.getPreference("accountHolds")})}a.name="component.transactions-list-authorizations";var o=e(8),r=[];i.$inject=["lpWidget","lpTransactionsAuth"],a.exports=o.createModule(a.name,r).provider(e(29)).directive(e(30)).run(i)}.call(n,e,n,t),!(void 0!==a&&(t.exports=a))}).call(n,e(7)(t))},function(t,n,e){var a;a=function(t,n,e){"use strict";n.lpTransactionsAuth=function(){this.$get=function(t,n,e,a){function i(){var i=function(){this.from=o.from,this.sort=o.sort,this.transactions=[],this.account=null,this.errorCode=null};return i.prototype.clearTransactionsAuthList=function(){return this.transactions=[],this.moreAvailable=!0,this.from=o.from,this},i.prototype.loadTransactionsAuth=function(t){return this.clearTransactionsAuthList(),this.account=t,this.loadMoreTransactionsAuth()},i.prototype.preprocessTransactions=function(t){return t.forEach(function(n,a){var i;n.id||(t[a].id=e.uniqueId()),n.categoryId||(t[a].categoryId="1"),n.creditDebitIndicator&&"DBIT"!==n.creditDebitIndicator||(t[a].creditDebitIndicator="DBIT",n.amount*=-1),n.dateTime&&(i=n.dateTime.replace(/-/g,"/"),t[a].dateTime=Date.parse(i))}),t},i.prototype.loadMoreTransactionsAuth=function(){var e=this,i=n.defer();this.account||a.throwException(new Error("Auth list: No account specified"));var r={f:this.from,l:o.pageSize};return this.loading=!0,r.sort=this.sort,this.from=this.from+o.pageSize,t.get(o.accountHoldsEndpoint,{data:{accountIds:this.account.ids||this.account.id||""},params:r}).success(function(t){e.errorCode=null,(null===t||"null"===t)&&(t=[]),e.transactions=e.preprocessTransactions(t),i.resolve(e.transactions)}).error(function(t,n){this.loading=!1,0==t?gadgets.pubsub.publish("no.internet"):e.errorCode=n.errorCode||500})["finally"](function(){e.loading=!1}),i.promise},i.prototype.noTransactionsAuthFound=function(){return!this.loading&&0===this.transactions.length&&!this.errorCode},new i}var o={accountHoldsEndpoint:"/portalserver/services/rest/mock/v1/account-holds?accountIds=$(accountIds)",pageSize:20,from:1,sort:"-bookingDateTime"};return{setConfig:function(t){return o=e(t).chain().mapValues(e.resolvePortalPlaceholders).defaults(o).value(),this},getConfig:function(t){return t&&e.isString(t)?o[t]:o},api:i}},this.$get.$inject=["$http","$q","lpCoreUtils","lpCoreError"]}}.call(n,e,n,t),!(void 0!==a&&(t.exports=a))},function(t,n,e){var a;a=function(t,n){"use strict";var a=window.jQuery;n.lpTransactionsAuthorizationsList=function(t,n){function i(t,e,i){t.transactions=n.api(),t.listVisible=!0,t.showToggle=!0,t.$watch("accounts.selected",function(n){n&&t.transactions.loadTransactionsAuth(n)}),t.openPreview=function(t){t.preview=!0,a("#transaction-"+t.id).addClass("preview")},t.closePreview=function(t){t.preview=!1,a("#transaction-"+t.id).removeClass("preview")}}function o(t,n){return i}return t.put("$transactions-auth/list.html",e(31)),{scope:{accounts:"=lpAccounts",transactionsCategories:"=lpTransactionsCategories",categoryLayout:"=",showCategories:"="},restrict:"AE",compile:o,template:t.get("$transactions-auth/list.html")}},n.lpTransactionsAuthorizationsList.$inject=["$templateCache","lpTransactionsAuth"]}.call(n,e,n,t),!(void 0!==a&&(t.exports=a))},function(t,n,e){var a;a=function(t,n,e){"use strict";var a='<div ng-if="transactions.transactions.length > 0" class="lp-transactions-list-authorizations">    <h5 ng-click="(listVisible = !listVisible)" class="lp-auth-header text-muted">{{ "Authorizations and Funds on Hold" | translate}}&nbsp;        <i ng-show="listVisible" class="lp-icon lp-icon-caret-up"></i>        <i ng-show="!listVisible" class="lp-icon lp-icon-caret-down"></i>    </h5>    <div ng-show="!listVisible" class="text-warning text-center">{{ "List of on-hold transactions is collapsed. Click the header above to show it..." }}</div><br ng-show="!listVisible" />    <ul ng-show="listVisible" id="transactions-list-auth" class="list-group list-view transactions-list">        <li class="list-group-item list-view-row clearfix"            ng-repeat="transaction in transactions.transactions track by $index">            <div id="transaction-{{transaction.id}}" class="list-view-container clearfix">               <div class="categories" ng-mouseover="openPreview(transaction)" ng-mouseout="closePreview(transaction)" ng-if="showCategories">                   <div lp-category-display="lp-category-display" lp-category-view="previewAll" lp-category-list="transactionsCategories.categories" ng-model="transaction"></div>               </div>               <div class="info">                   <div class="col-md-8 col-sm-8 col-xs-8 column">                       <div class="centered">                           <div class="h4">{{ transaction.beneficiary }}</div>                           <div class="h6 text-muted">{{ transaction.dateTime | date }}</div>                       </div>                   </div>                   <div class="col-md-4 col-sm-4 col-xs-4 column text-center">                       <div class="centered">                           <span class="sr-only">Amount</span>                           <span class="h4" itemProp="transactionAmount"                               lp-amount="transaction.amount"                               lp-amount-currency="transaction.currencyCode"></span>                       </div>                   </div>               </div>            </div>        </li>    </ul>    <h3 class="lp-auth-footer"></h3></div>';return a}.call(n,e,n,t),!(void 0!==a&&(t.exports=a))},function(t,n,e){var a;(function(t){a=function(t,n,a){"use strict";a.name="component.transactions-search";var i=e(8),o=e(22),r=e(10),s=e(33),c=[o.name,r.name,s.name];a.exports=i.createModule(a.name,c).directive(e(34))}.call(n,e,n,t),!(void 0!==a&&(t.exports=a))}).call(n,e(7)(t))},function(t,n){t.exports=r},function(t,n,e){var a;a=function(t,n){"use strict";var a=window.jQuery;n.lpTransactionsSearch=function(t,n){function a(t,e,a){var i,o={date:function(t){var e={fromDate:t.from.getTime(),toDate:t.to.getTime()};return n.publish("launchpad-retail.transactionsDateSearch",e),e},amount:function(t){return{fromAmount:t.from,toAmount:t.to}},contact:function(t){return{contact:t.contact}},category:function(t){return n.publish("launchpad-retail.transactionsCategorySearch",i.category),{category:t.category}},query:function(t){return{query:t.query}}},r="lp-icon",s=r+" lp-icon-new_top",c=r+" lp-icon-old_top",l=r+" lp-icon-big_to_small",d=r+" lp-icon-small_to_big";t.sort={options:[{label:"Newest on Top",icon:s,sort:"-bookingDateTime",aria:"Decreasing"},{label:"Oldest on Top",icon:c,sort:"bookingDateTime",aria:"Increasing"},{label:"Largest Amount on Top",icon:l,sort:"-transactionAmount",aria:"Decreasing"},{label:"Smallest Amount on Top",icon:d,sort:"transactionAmount",aria:"Increasing"}]},t.sort.selected=t.sort.options[0],t.$on("$destroy",function(){}),t.doSearch=function(){var n;if(i){var e=i.search.query?"query":i.type;n=o[e](i.search)}else n={};t.onPerformSearch({filters:n})},t.selectSuggestion=function(n){i=n,t.doSearch()},t.clearSuggestion=function(){t.onClearSearch()},t.updateSuggestion=function(){t.onUpdateSearch()},t.changeSort=function(){var n=t.sort.selected;t.onChangeSort({value:n})}}function i(t,n){return a}return t.put("$transactions/sortDropdownOption.html",e(35)),{scope:{accounts:"=",contacts:"=",transactionsCategories:"=",onPerformSearch:"&",onClearSearch:"&",onUpdateSearch:"&",onChangeSort:"&"},restrict:"AE",require:"?^ngModel",compile:i,template:e(36)}},n.lpTransactionsSearch.$inject=["$templateCache","lpCoreBus"],n.lpSmartsuggest=function(t,n,e,i){return{restrict:"A",scope:{smartsuggestSelect:"=",smartsuggestClear:"=",smartsuggestUpdate:"=",currency:"=",contacts:"=",categories:"="},link:function(o,r,s){o.tagsInput=a(r).closest("form").find(".lp-tags").length?!0:!1,o.tagsInput===!0&&t.publish("lpTagsInputField",r[0]);var c=new e;c.addSuggester({data:[],suggest:e.builtIn.getContactSuggestions}),c.addSuggester({type:e.types.AMOUNT,suggest:e.builtIn.getAmountSuggestions}),c.addSuggester({type:e.types.DATE,suggest:e.builtIn.getDateSuggestions}),c.addSuggester({type:e.types.GENERAL,suggest:e.builtIn.getGeneralSuggestions});var l=new i({locale:"en-US",currency:o.currency});o.$watch("currency",function(t){l.currency=t}),o.$watch("contacts",function(t){n.isArray(t)&&c.addSuggester({data:t,suggest:e.builtIn.getContactSuggestions})}),o.$watch("categories",function(t){l.categories=t,c.addSuggester({data:o.categories,type:e.types.CATEGORY,suggest:e.builtIn.getCategorySuggestions})}),a(r).autosuggest({lookup:function(t){var n=c.getSuggestions(t);return n=n.map(function(t){var n,e=l.format(t);return n=t.contact?t.contact.name:2===e.length?e[0]+" to "+e[1]:e[0],{data:t,value:n}})},onSelect:function(n){o.smartsuggestSelect&&(t.publish("lpSearchSelectValue",{type:n.data.type,text:n.value,icon:l.getSuggestionIcon(n.data,!0)}),o.$apply(function(){o.smartsuggestSelect.call({},n.data)}))},onClear:function(){o.smartsuggestClear&&!o.tagsInput&&o.$apply(function(){o.smartsuggestClear.call({})})},onChangeModel:function(){o.smartsuggestUpdate&&o.tagsInput&&o.$apply(function(){o.smartsuggestUpdate.call({},!0)})},formatResult:function(t){return l.getSuggestionHtml(t.data)},autoSelectFirst:!0})}}},n.lpSmartsuggest.$inject=["lpCoreBus","lpCoreUtils","SmartSuggestEngine","SmartSuggestFormatter"]}.call(n,e,n,t),!(void 0!==a&&(t.exports=a))},function(t,n,e){var a;a=function(t,n,e){"use strict";var a='<span>    <i class="{{option.icon}} option-icon"></i>    <span class="sr-only">Sort by</span>    <span class="option-label">{{option.label}}</span>    <span class="sr-only">{{option.aria}}</span>    <i class="lp-icon lp-icon-checkmark_fat"></i></span>';return a}.call(n,e,n,t),!(void 0!==a&&(t.exports=a))},function(t,n,e){var a;a=function(t,n,e){"use strict";e.exports=['<form class="panel-heading" ng-submit="doSearch" ng-class="{ \'has-category-toggle\': showCategories }">','    <div class="lp-search-wrapper">','        <div class="lp-search-left">','            <div lp-tags-filters="lp-tags-filters"></div>',"        </div>",'        <div class="lp-search-tags">','            <div lp-tags="lp-tags" empty="lp-tags-left" class="lp-tags"></div>',"        </div>",'        <div class="lp-search-middle">','            <input lp-smartsuggest="lp-smartsuggest"','                   smartsuggest-select="selectSuggestion"','                   smartsuggest-clear="clearSuggestion"','                   smartsuggest-update="updateSuggestion"','                   currency="accounts.selected.currency"','                   contacts="contacts.contacts"','                   categories="transactionsCategories.categories"','                   ng-model="searchTerm"','                   class="form-control" placeholder="Search for dates, amounts, contacts..." />',"        </div>",'        <div class="lp-search-right">','            <div dropdown-select="dropdown-select" ng-options="option as option for option in sort.options" ng-model="sort.selected" ng-change="changeSort()" class="input-group-btn sort-select pull-right" option-template-url="$transactions/sortDropdownOption.html"','                 aria-controls="transactions-list">',"            </div>","        </div>","    </div>","</form>"].join("")}.call(n,e,n,t),!(void 0!==a&&(t.exports=a))},function(t,n,e){var a;(function(t){a=function(t,n,a){"use strict";a.name="component.transactions-spendings";var i=e(8),o=[];a.exports=i.createModule(a.name,o).factory(e(38)).directive(e(39))}.call(n,e,n,t),!(void 0!==a&&(t.exports=a))}).call(n,e(7)(t))},function(t,n,e){var a;a=function(t,n,e){"use strict";n.CategorySpendingsResource=function(t,n,e){var a=e.resolvePortalPlaceholders(n.getPreference("categorySpendingDataSrc"));return t(a,null,{get:{method:"GET"}})},n.CategorySpendingsResource.$inject=["$resource","lpWidget","lpCoreUtils"],n.CategoriesResource=function(t,n,e){var a=e.resolvePortalPlaceholders(n.getPreference("categoriesDataSrc"));return t(a,null,{get:{method:"GET",isArray:!0}})},n.CategoriesResource.$inject=["$resource","lpWidget","lpCoreUtils"]}.call(n,e,n,t),!(void 0!==a&&(t.exports=a))},function(t,n,e){var a;a=function(t,n,a){"use strict";function i(t,n){t.selectAll("tspan").remove();var e=t.attr("width"),a=1,i=t.append("tspan"),o=n.split(/\s+/),r=20;if(1===o.length&&n.length>15)return i.text(n.slice(0,12)+"..."),t;for(var s=0;s<o.length;s++){var c=i.node();if(c&&c.getComputedTextLength&&c.getComputedTextLength()>e){if(a++,a>=3){i.text(i.text()+"...");break}i=t.append("tspan").attr({x:0,dy:r})}i.text(i.text()+" "+o[s])}return t}function o(t){return(100*t).toFixed(2)+"%"}var r=e(40),s=e(8).utils;n.lpCategoriesSpendings=function(t,n,e,a,i,o){function r(t){var n=t.spendings.categoriesSpendings,e=t.categories;return n.sort(function(t,n){return t.amount-n.amount}).forEach(function(n){var a=s.find(e,function(t){return t.id===n.categoryId});n.name=a.name,n.color=a.color,n.currency=t.spendings.currency}),n}function c(e,c,l){e.options=s.assign({},e.options,e.lpCategoriesSpendings),e.accountId=null,e.fromDate=null,e.toDate=null,e.viewLoading=!0,e.missingData=!1,e.showChart=!1,e.$watchCollection("[viewLoading,missingData]",function(t,n){var a=t[0],i=t[1];e.showChart=!a&&!i}),e.selectItem=function(t){n(function(){e.selectedItem=t,a.publish("launchpad-retail.donutCategoryChartSelection",t)})},e.resize=function(t,a){n(function(){e.width=t})},e.updateData=function(){var n={accountIds:e.accountId||null,start:e.fromDate,end:e.toDate};t.all({spendings:i.get(n).$promise,categories:o.get().$promise}).then(function(t){return 0===t.spendings.categoriesSpendings.length?(e.missingData=!0,void(e.viewLoading=!1)):(e.viewLoading=!1,e.missingData=!1,void(e.options=s.assign({},e.options,{data:r(t)})))},function(t){e.viewLoading=!1,e.missingData=!0})};var d,u=function(t){s.forEach(t,function(t){t.ids&&(d=t.ids)}),e.accountId=d};a.subscribe("launchpad-retail.accountsLoaded",u),a.subscribe("lpAccounts.loaded",u);var p=e.$watch("lpAccounts.selected",function(t){t&&(a.subscribe("launchpad-retail.accountSelected",function(t){e.accountId=t.allAccounts?d:t.accountId,e.updateData()}),e.accountId=t.id,e.updateData(),p())});a.subscribe("launchpad-retail.transactionsDateSearch",function(t){e.fromDate=t.fromDate,e.toDate=t.toDate,e.updateData()}),a.subscribe("launchpad-retail.transactionsCategorySearch",function(t){if(1===t.length){var n=s.find(e.options.data,function(n){return n.categoryId===t[0].id});e.selectItem(n)}}),e.$on("tabSelected",function(t,n){"donut"===n&&(e.options=s.assign({},e.options))})}function l(t,n){return c}function d(){return'<div class="ng-cloak" ng-class="responsiveClass">	<div class="lp-widget-content widget widget-default" role="application">		<div class="lp-widget-body">			<div ng-if="missingData" class="panel-message" >				<div class="panel-body text-center">You have no data available.</div>			</div>			<div ng-if="viewLoading" class="panel-message loading-panel" role="alert">				<i class="lp-icon lp-icon-spinner2 lp-spin loading-icon"></i>				<span class="sr-only">Busy</span>			</div>			<div lp-donut-chart options="options" class="category-spendings-chart" on-select="selectItem" item="selectedItem" on-resize="resize" ng-show="showChart">                           <div category-details ng-model="selectedItem" width="width"></div>                       </div>		</div>	</div></div>'}return{scope:{lpCategoriesSpendings:"=?",lpAccounts:"=",options:"=?"},restrict:"AE",compile:l,template:d,replace:!0}},n.lpCategoriesSpendings.$inject=["$q","$timeout","$templateCache","lpCoreBus","CategorySpendingsResource","CategoriesResource"],n.categoryDetails=function(t){function n(n,e){function a(t,n){if(t){var e=t/2,a=.55*e;d.attr("transform","translate("+e+","+e+")");var i=t/20;d.select(".name").attr({y:-.34*a,width:a}).style("font-size",i+"px"),d.select(".amount").attr({y:.15*a}).style("font-size",1.4*i+"px"),d.select(".share").attr({y:.5*a}).style("font-size",i+"px"),d.select(".delta").attr({y:.5*a}).style("font-size",i+"px")}}function s(n){if(n){i(d.select(".name"),n.name);var e=n.historicalChangeFactor||1,a=0>e?"":e>0?"":"";d.select(".amount").text(t.formatCurrency(n.amount,n.currency)),d.select(".share").text(o(n.totalFraction)+""),d.select(".delta").text(""+a+o(Math.abs(e)))}}var c=e.find("svg"),l=c.length?r.select(c[0]):r.select(e[0]).append("svg:svg"),d=l.append("svg:g");d.append("svg:text").attr("class","name"),d.append("svg:text").attr("class","amount"),d.append("svg:text").attr("class","share"),d.append("svg:text").attr("class","delta"),n.$watch("width",a),n.$watch("data",s)}return{restrict:"EA",link:n,scope:{data:"=ngModel",width:"="}}},n.categoryDetails.$inject=["lpCoreI18n"]}.call(n,e,n,t),!(void 0!==a&&(t.exports=a))},function(t,n){t.exports=s},function(t,n,e){var a;(function(t){a=function(t,n,a){"use strict";a.name="component.transactions-charts";var i=e(8),o=e(22),r=e(11),s=[o.name,r.name];a.exports=i.createModule(a.name,s).factory(e(42)).directive(e(43))}.call(n,e,n,t),!(void 0!==a&&(t.exports=a))}).call(n,e(7)(t))},function(t,n,e){var a;a=function(t,n,a){"use strict";var i=e(8).utils,o=function(t,n){return t&&t.length?t[0].hasOwnProperty(n)?i.chain(t).map(function(t){return t[n]}).reduce(function(t,n){return t.concat(n)},[]).value():t:[]};n.lpAccountsChartData=function(t,n){var e={accountsChartEndpoint:"",allAccountsChartEndpoint:"",accountId:null},a=function(n){this.config=t.extend({},e,n),this.chartData=null,this.error=!1};return a.prototype.setId=function(t,n){this.config.allAccounts=!!n,this.config.accountId=t},a.prototype.load=function(t){var e,a=this,i={};return t||(t={}),this.config.allAccounts?(e=this.config.allAccountsChartEndpoint,t.accountIds=this.config.accountId):(e=this.config.accountsChartEndpoint,i.data={accountId:this.config.accountId}),i.params=t,n.get(e,i).then(function(t){return a.chartData=o(t.data,"balances"),a.chartData},function(t){t.errors&&(a.error=t.errors[0].code)})},{getInstance:function(t){return new a(t)}}},n.lpAccountsChartData.$inject=["lpCoreUtils","$http"],n.lpTransactionsChartData=function(t,n){var e={transactionsChartEndpoint:"",allTransactionsChartEndpoint:"",accountId:null},a=function(n){this.config=t.extend({},e,n),this.chartData=null,this.error=!1};return a.prototype.setId=function(t,n){this.config.allAccounts=!!n,this.config.accountId=t},a.prototype.load=function(t){var e,a=this,i={};return t||(t={}),this.config.allAccounts?(e=this.config.allTransactionsChartEndpoint,t.accountIds=this.config.accountId):(e=this.config.transactionsChartEndpoint,i.data={accountId:this.config.accountId}),i.params=t,n.get(e,i).then(function(t){return a.chartData=o(t.data,"turnovers"),a.chartData},function(t){t.errors&&(a.error=t.errors[0].code)})},{getInstance:function(t){return new a(t)}}},n.lpTransactionsChartData.$inject=["lpCoreUtils","$http"]}.call(n,e,n,t),!(void 0!==a&&(t.exports=a))},function(t,n,e){var a;a=function(t,n){"use strict";function a(t){var n=function(n,a,o,r,s,c,l,d){function u(t,n,e){var i=function(t,n){var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],a=new Date(t),i=new Date(n);return a.setDate(a.getDate()+1),a.getDate()+" "+e[a.getMonth()]+" - "+i.getDate()+" "+e[i.getMonth()]},o=function(){var n=new Date(t.endDate);switch(t.scale){case"WEEK":n.setDate(n.getDate()-7);break;case"MONTH":n.setMonth(n.getMonth()-1)}return n},u=function(n){t.endDate=new Date(n),t.timePeriod=i(o().getTime(),t.endDate.getTime())},p=function(t){t&&t.length&&u(t[0].bookingDateTime),d.unsubscribe("widget-transactions:transactions:ready",p)};d.subscribe("widget-transactions:transactions:ready",p);var g=function(n,e){var a={start:o().getTime(),end:t.endDate.getTime()};t.timePeriod=i(a.start,a.end);t.loading=!0,t.emptyTurnovers=!1,t.emptyBalances=!1,r.all([t.transactionsChartModel.load(a),t.accountsChartModel.load(a)])},h=function(n,e){t.accountsChartModel.setId(n,e),t.transactionsChartModel.setId(n,e),t.lpAccounts.selected&&!t.lpAccounts.selected.cardId&&g("prev")},f=function(){t.now=new Date,t.scale="WEEK",t.series="WITHDRAWAL",u(t.now),t.accountsChartModel=s.getInstance({accountsChartEndpoint:a.resolvePortalPlaceholders(l.getPreference("accountBalanceChartDataSrc")),allAccountsChartEndpoint:a.resolvePortalPlaceholders(l.getPreference("allAccountsBalanceChartDataSrc"))}),t.transactionsChartModel=c.getInstance({transactionsChartEndpoint:a.resolvePortalPlaceholders(l.getPreference("transactionsChartDataSrc")),allTransactionsChartEndpoint:a.resolvePortalPlaceholders(l.getPreference("allTransactionsChartDataSrc"))});var n;d.subscribe("lpAccounts.loaded",function(t){n=a.result(a.find(t,function(t){return!!t.ids}),"ids")});var e=t.$watch("lpAccounts.selected",function(t){t&&(d.subscribe("launchpad-retail.accountSelected",function(t){var e=t.allAccounts?n:t.accountId;h(e,t.allAccounts)}),h(t.id),e())})};t.nextPeriod=function(){switch(t.scale){case"WEEK":t.endDate.setDate(t.endDate.getDate()+7);break;case"MONTH":t.endDate.setMonth(t.endDate.getMonth()+1)}g("next")},t.prevPeriod=function(){
switch(t.scale){case"WEEK":t.endDate.setDate(t.endDate.getDate()-7);break;case"MONTH":t.endDate.setMonth(t.endDate.getMonth()-1)}g("prev")},t.setScale=function(n){t.scale=n,g("prev")},t.setSeries=function(n){t.series=n,g("prev",!0)},t.showNextPeriod=function(){return t.now.getTime()>t.endDate.getTime()},t.$on("tabSelected",function(t,n){("chart"===n||"combined"===n)&&g("prev")}),f()}function p(t,n){return u}return t===i.vertical?n.put("$transactions/chartTemplate",e(44)):n.put("$transactions/chartTemplate-horizontal",e(45)),{scope:{lpAccounts:"="},restrict:"AE",compile:p,template:n.get("$transactions/chartTemplate"+t)}};return n.$inject=["$templateCache","lpCoreUtils","lpCoreI18n","$q","lpAccountsChartData","lpTransactionsChartData","lpWidget","lpCoreBus"],n}var i=(e(40),{vertical:"",horizontal:"-horizontal"});n.lpTransactionsCharts=a(i.vertical),n.lpTransactionsChartsHorizontal=a(i.horizontal)}.call(n,e,n,t),!(void 0!==a&&(t.exports=a))},function(t,n,e){var a;a=function(t,n,e){"use strict";var a='<div class="lp-widget-body">    <div>        <div class="panel-body lp-chart-balances">            <div class="h4">Balance - <span ng-bind="timePeriod"></span></div>            <div progress-indicator="loading" class="chart-progress-indicator"></div>            <div ng-show="!loading && !emptyBalances" lp-line-chart="lp-line-chart" lp-chart-options="accountBalanceChartOptions" class="accountsChart lp-chart"></div>            <div ng-show="emptyBalances" class="chart-empty-data" lp-i18n="There is no data available for this period of time"></div>        </div>        <div class="panel-body">            <div class="controls clearfix">                <div class="col-xs-2">                    <button class="btn btn-primary btn-block arrow" ng-click="prevPeriod()">&lt;</button>                </div>                <div class="col-xs-8 text-center">                    <button class="btn btn-default" ng-class="{\'btn-primary\':scale==\'WEEK\'}" ng-click="setScale(\'WEEK\')">7D</button>                    <button class="btn btn-default" ng-class="{\'btn-primary\':scale==\'MONTH\'}" ng-click="setScale(\'MONTH\')">1M</button>                </div>                <div class="col-xs-2">                    <button class="btn btn-primary btn-block arrow" ng-click="nextPeriod()" ng-show="showNextPeriod()">&gt;</button>                </div>            </div>        </div>        <div class="panel-body lp-chart-turnovers">            <div class="h4">Transactions - <span ng-bind="timePeriod"></span></div>            <div progress-indicator="loading" class="chart-progress-indicator"></div>            <div ng-show="!loading && !emptyTurnovers" lp-bar-chart="lp-bar-chart" lp-chart-options="transactionsChartOptions" class="transactionsChart lp-chart"></div>            <div ng-show="emptyTurnovers" class="chart-empty-data" lp-i18n="There is no data available for this period of time"></div>        </div>        <div class="panel-body">            <div class="controls clearfix text-center">                <button class="btn btn-default" ng-class="{\'btn-primary\':series==\'WITHDRAWAL\'}" ng-click="setSeries(\'WITHDRAWAL\')">Spending</button>                <button class="btn btn-default" ng-class="{\'btn-primary\':series==\'DEPOSIT\'}" ng-click="setSeries(\'DEPOSIT\')">Income</button>            </div>        </div>    </div></div>';return a}.call(n,e,n,t),!(void 0!==a&&(t.exports=a))},function(t,n,e){var a;a=function(t,n,e){"use strict";var a='<div class="lp-widget-body clearfix">    <div>        <div class="col-xs-12 col-sm-6 chart-horizontal">            <div class="panel-body lp-chart-balances">                <div class="h4">Balance<br /><span ng-bind="timePeriod"></span></div>                <div progress-indicator="loading" class="chart-progress-indicator"></div>                <div ng-show="!loading && !emptyBalances" lp-line-chart="lp-line-chart" lp-chart-options="accountBalanceChartOptions" class="accountsChart lp-chart"></div>                <div ng-show="emptyBalances" class="chart-empty-data" lp-i18n="There is no data available for this period of time"></div>            </div>            <div class="panel-body">                <div class="controls clearfix">                    <div class="col-xs-2">                        <button class="btn btn-primary btn-block arrow" ng-click="prevPeriod()">&lt;</button>                    </div>                    <div class="col-xs-8 text-center">                        <button class="btn btn-default" ng-class="{\'btn-primary\':scale==\'WEEK\'}" ng-click="setScale(\'WEEK\')">7D</button>                        <button class="btn btn-default" ng-class="{\'btn-primary\':scale==\'MONTH\'}" ng-click="setScale(\'MONTH\')">1M</button>                    </div>                    <div class="col-xs-2">                        <button class="btn btn-primary btn-block arrow" ng-click="nextPeriod()" ng-show="showNextPeriod()">&gt;</button>                    </div>                </div>            </div>        </div>        <div class="col-xs-12 col-sm-6 chart-horizontal">            <div class="panel-body lp-chart-turnovers">                <div class="h4">Transactions<br /><span ng-bind="timePeriod"></span></div>                <div progress-indicator="loading" class="chart-progress-indicator"></div>                <div ng-show="!loading && !emptyTurnovers" lp-bar-chart="lp-bar-chart" lp-chart-options="transactionsChartOptions" class="transactionsChart lp-chart"></div>                <div ng-show="emptyTurnovers" class="chart-empty-data" lp-i18n="There is no data available for this period of time"></div>            </div>            <div class="panel-body">                <div class="controls clearfix text-center">                    <button class="btn btn-default" ng-class="{\'btn-primary\':series==\'WITHDRAWAL\'}" ng-click="setSeries(\'WITHDRAWAL\')">Spending</button>                    <button class="btn btn-default" ng-class="{\'btn-primary\':series==\'DEPOSIT\'}" ng-click="setSeries(\'DEPOSIT\')">Income</button>                </div>            </div>        </div>    </div></div>';return a}.call(n,e,n,t),!(void 0!==a&&(t.exports=a))},function(t,n,e){var a;a=function(t,n,e){"use strict";n.lpTransactions=function(){this.$get=function(t,n,e,a,i){function o(){var o=function(){this.from=s.from,this.sort=s.sort,this.transactions=[],this.moreAvailable=!0,this.account=null,this.errorCode=null};return o.prototype.availableFilters={QUERY:"query",FROM_DATE:"fromDate",TO_DATE:"toDate",FROM_AMOUNT:"fromAmount",TO_AMOUNT:"toAmount",CONTACT:"contact",CATEGORY:"category",DEBITCREDIT:"bk"},o.prototype.clearTransactionsList=function(){return this.transactions=[],this.moreAvailable=!0,this.from=s.from,this.errorCode=null,this},o.prototype.setFilters=function(t){return i?(i.setFilter(t),this.filters=i.getFilters()):this.filters=t,this},o.prototype.clearFilters=function(){return i?this.filters=i.clearFilters():this.filters={},this},o.prototype.updateFilters=function(){return i?this.filters=i.getFilters():this.filters={},this},o.prototype.preprocessTransactions=function(t){var n=this.transactions[this.transactions.length-1]||null,a=e.date;return t&&(t=e.map(t,function(e,i){var o=t[i-1]||n||null,r=o?a(o.bookingDateTime):a().add(1,"days"),s=a(e.bookingDateTime);return e.newDate=r.date()!==s.date()||r.month()!==s.month()||r.year()!==s.year(),e.details||(e.details=null),e.detailTabs={details:!0,categories:!1},"DBIT"===e.creditDebitIndicator&&(e.transactionAmount*=1),e})),t},o.prototype.loadMoreTransactions=function(){var i,o=this,c=this.availableFilters,l=n.defer();this.account||a.throwException(new Error("No account specified")),this.account.allAccounts&&(this.account.id="");var d={f:this.from,l:s.pageSize+1};return this.loading=!0,this.filters&&(i=parseInt(this.filters[c.DEBITCREDIT],10),this.filters.query&&(d.a="search",d.q=this.filters[c.QUERY]),this.filters[c.FROM_DATE]&&this.filters[c.TO_DATE]&&(d.df=this.filters[c.FROM_DATE],d.dt=this.filters[c.TO_DATE]),e.isUndefined(this.filters[c.FROM_AMOUNT])||e.isUndefined(this.filters[c.TO_AMOUNT])||(d.af=this.filters[c.FROM_AMOUNT],d.at=this.filters[c.TO_AMOUNT]),this.filters[c.CONTACT]&&(d.ca=this.filters[c.CONTACT]),this.filters[c.CATEGORY]&&(d.categoryIds=this.filters[c.CATEGORY]),this.filters[c.DEBITCREDIT]&&(d.crdb=1===i?"DBIT":"CRDT")),d.sort=this.sort,this.from=this.from+s.pageSize,t.get(s.transactionsEndpoint,{data:{accountId:this.account.id||this.account.ids||""},params:d}).success(function(t){o.errorCode=null,(null===t||"null"===t)&&(t=[]);var n=o.preprocessTransactions(e.compact(t));n&&n.length<=s.pageSize?o.moreAvailable=!1:n=n,o.transactions=o.transactions.concat(n),o.transactions=r(o.account,o.transactions),l.resolve(o.transactions)}).error(function(t,n){0==t?gadgets.pubsub.publish("no.internet"):o.errorCode=n.errorCode||500})["finally"](function(){o.loading=!1}),l.promise},o.prototype.loadTransactions=function(t){return this.clearTransactionsList(),this.account=t,this.loadMoreTransactions()},o.prototype.preprocessTransactionDetails=function(t,n){var a=[],i=[],o=["location"],r=["address","merchantType","bookingDateTime"],s=["transactionId"];if(t){if(e.isObject(t.location)){var c=t.location.latitude+","+t.location.longitude,l=["size=160x90","center="+c,"zoom=12","format=jpg","sensor="+!1,"markers="+encodeURIComponent("size:med|color:red|")+c];t.location.mapUrl="http://maps.googleapis.com/maps/api/staticmap?"+l.join("&")}t.bookingDateTime=n.bookingDateTime;for(var d in t)if(t.hasOwnProperty(d)&&o.indexOf(d)<0){var u={name:d,value:t[d],longValue:s.indexOf(d)>-1};r.indexOf(d)>-1?a.push(u):i.push(u)}t.special=a,t.custom=i}return t},o.prototype.loadTransactionDetails=function(a){var i=this;return!a.details||e.isEmpty(a.details)?(a.loading=!0,t.get(s.transactionDetailsEndpoint,{params:{transactionId:a.id}}).then(function(t){return a.loading=!1,a.details={},e.assign(a.details,i.preprocessTransactionDetails(t.data,a))},function(t){a.loading=!1,a.errorCode=t.data.errorCode||500})):n.when(a.details)},o.prototype.updateTransactionCategory=function(n,e){return t.put(s.transactionsEndpoint+"/"+n.id,{accountId:this.account.id,categoryId:e}).success(function(t){n.categoryId=e}).error(function(t,e){0==t?gadgets.pubsub.publish("no.internet"):n.errorCode=e.errorCode||500})},o.prototype.updateSimilarTransactionCategory=function(n,e){return t.put(s.transactionsEndpoint+"/"+n.id,{accountId:this.account.id,categoryId:e,condition:"SIMILAR"}).success(function(t){n.categoryId=e}).error(function(t,e){0==t?gadgets.pubsub.publish("no.internet"):n.errorCode=e.errorCode||500})},o.prototype.allowMoreResults=function(){var t=!this.loading&&this.moreAvailable&&!this.errorCode;return t},o.prototype.noTransactionsFound=function(){var t=!this.loading&&0===this.transactions.length&&!this.errorCode;return t},o.prototype.isSearching=function(){if(this.filters)for(var t in this.filters)if(this.filters.hasOwnProperty(t))return!0;return!1},new o}var r=function(t,n){var a=t.accountsNames;return a&&e.isObject(a)&&e.forEach(n,function(t){t.accountName=a[t.accountId]||""}),n},s={transactionsEndpoint:"/mock/v1/current-accounts/$(accountId)/transactions",transactionDetailsEndpoint:"/mock/v1/current-accounts/transaction/$(transactionId)/details",pageSize:10,from:0,sort:"-bookingDateTime"};return{setConfig:function(t){return s=e(t).chain().mapValues(e.resolvePortalPlaceholders).defaults(s).value(),this},getConfig:function(t){return t&&e.isString(t)?s[t]:s},api:o}},this.$get.$inject=["$http","$q","lpCoreUtils","lpCoreError","lpTagsUtils"]}}.call(n,e,n,t),!(void 0!==a&&(t.exports=a))},function(t,n,e){var a;a=function(t,n,e){"use strict";n.lpBalanceUpdate=function(){return{restrict:"A",require:"ngModel",link:function(t,n,e,a){n.addClass("lp-amount"),t.$watch(function(){return a.$modelValue},function(t,e){if(t.id===e.id){var a={increase:"lp-increase-amount",decrease:"lp-decrease-amount"},i=2e3;1===t.delta?(n.addClass(a.increase),setTimeout(function(){n.removeClass(a.increase)},i)):-1===t.delta&&(n.addClass(a.decrease),setTimeout(function(){n.removeClass(a.decrease)},i)),t.delta=0}})}}}}.call(n,e,n,t),!(void 0!==a&&(t.exports=a))}])});
