/**
 * Backbase Web SDK for Android and iOS webviews - Copyright Â© 2017 Backbase B.V - All Rights Reserved
 * Version 6.0.0-b197
 * http://www.backbase.com
 */
!function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=r[a]={exports:{}};t[a][0].call(u.exports,function(e){var r=t[a][1][e];return i(r?r:e)},u,u.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,r){},{}],2:[function(e,t,r){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(p===setTimeout)return setTimeout(e,0);if((p===n||!p)&&setTimeout)return p=setTimeout,setTimeout(e,0);try{return p(e,0)}catch(t){try{return p.call(null,e,0)}catch(t){return p.call(this,e,0)}}}function a(e){if(h===clearTimeout)return clearTimeout(e);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function s(){m&&d&&(m=!1,d.length?g=d.concat(g):v=-1,g.length&&c())}function c(){if(!m){var e=o(s);m=!0;for(var t=g.length;t;){for(d=g,g=[];++v<t;)d&&d[v].run();v=-1,t=g.length}d=null,m=!1,a(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var p,h,f=t.exports={};!function(){try{p="function"==typeof setTimeout?setTimeout:n}catch(e){p=n}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(e){h=i}}();var d,g=[],m=!1,v=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];g.push(new l(e,t)),1!==g.length||m||o(c)},l.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=u,f.addListener=u,f.once=u,f.off=u,f.removeListener=u,f.removeAllListeners=u,f.emit=u,f.prependListener=u,f.prependOnceListener=u,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},{}],3:[function(e,t,r){(function(e){!function(n){function i(e){throw new RangeError(j[e])}function o(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function a(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]),e=e.replace(I,".");var i=e.split("."),a=o(i,t).join(".");return n+a}function s(e){for(var t,r,n=[],i=0,o=e.length;i<o;)t=e.charCodeAt(i++),t>=55296&&t<=56319&&i<o?(r=e.charCodeAt(i++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--)):n.push(t);return n}function c(e){return o(e,function(e){var t="";return e>65535&&(e-=65536,t+=F(e>>>10&1023|55296),e=56320|1023&e),t+=F(e)}).join("")}function l(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:_}function u(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function p(e,t,r){var n=0;for(e=r?L(e/P):e>>1,e+=L(e/t);e>T*k>>1;n+=_)e=L(e/T);return L(n+(T+1)*e/(e+S))}function h(e){var t,r,n,o,a,s,u,h,f,d,g=[],m=e.length,v=0,y=C,b=A;for(r=e.lastIndexOf(R),r<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&i("not-basic"),g.push(e.charCodeAt(n));for(o=r>0?r+1:0;o<m;){for(a=v,s=1,u=_;o>=m&&i("invalid-input"),h=l(e.charCodeAt(o++)),(h>=_||h>L((x-v)/s))&&i("overflow"),v+=h*s,f=u<=b?E:u>=b+k?k:u-b,!(h<f);u+=_)d=_-f,s>L(x/d)&&i("overflow"),s*=d;t=g.length+1,b=p(v-a,t,0==a),L(v/t)>x-y&&i("overflow"),y+=L(v/t),v%=t,g.splice(v++,0,y)}return c(g)}function f(e){var t,r,n,o,a,c,l,h,f,d,g,m,v,y,b,w=[];for(e=s(e),m=e.length,t=C,r=0,a=A,c=0;c<m;++c)g=e[c],g<128&&w.push(F(g));for(n=o=w.length,o&&w.push(R);n<m;){for(l=x,c=0;c<m;++c)g=e[c],g>=t&&g<l&&(l=g);for(v=n+1,l-t>L((x-r)/v)&&i("overflow"),r+=(l-t)*v,t=l,c=0;c<m;++c)if(g=e[c],g<t&&++r>x&&i("overflow"),g==t){for(h=r,f=_;d=f<=a?E:f>=a+k?k:f-a,!(h<d);f+=_)b=h-d,y=_-d,w.push(F(u(d+b%y,0))),h=L(b/y);w.push(F(u(h,0))),a=p(r,v,n==o),r=0,++n}++r,++t}return w.join("")}function d(e){return a(e,function(e){return O.test(e)?h(e.slice(4).toLowerCase()):e})}function g(e){return a(e,function(e){return N.test(e)?"xn--"+f(e):e})}var m="object"==typeof r&&r&&!r.nodeType&&r,v="object"==typeof t&&t&&!t.nodeType&&t,y="object"==typeof e&&e;y.global!==y&&y.window!==y&&y.self!==y||(n=y);var b,w,x=2147483647,_=36,E=1,k=26,S=38,P=700,A=72,C=128,R="-",O=/^xn--/,N=/[^\x20-\x7E]/,I=/[\x2E\u3002\uFF0E\uFF61]/g,j={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},T=_-E,L=Math.floor,F=String.fromCharCode;if(b={version:"1.4.1",ucs2:{decode:s,encode:c},decode:h,encode:f,toASCII:g,toUnicode:d},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return b});else if(m&&v)if(t.exports==m)v.exports=b;else for(w in b)b.hasOwnProperty(w)&&(m[w]=b[w]);else n.punycode=b}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,r,o){t=t||"&",r=r||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var c=1e3;o&&"number"==typeof o.maxKeys&&(c=o.maxKeys);var l=e.length;c>0&&l>c&&(l=c);for(var u=0;u<l;++u){var p,h,f,d,g=e[u].replace(s,"%20"),m=g.indexOf(r);m>=0?(p=g.substr(0,m),h=g.substr(m+1)):(p=g,h=""),f=decodeURIComponent(p),d=decodeURIComponent(h),n(a,f)?i(a[f])?a[f].push(d):a[f]=[a[f],d]:a[f]=d}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],5:[function(e,t,r){"use strict";function n(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,r,s){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?n(a(e),function(a){var s=encodeURIComponent(i(a))+r;return o(e[a])?n(e[a],function(e){return s+encodeURIComponent(i(e))}).join(t):s+encodeURIComponent(i(e[a]))}).join(t):s?encodeURIComponent(i(s))+r+encodeURIComponent(i(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},{}],6:[function(e,t,r){"use strict";r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode")},{"./decode":4,"./encode":5}],7:[function(e,t,r){function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,r){if(e&&l(e)&&e instanceof n)return e;var i=new n;return i.parse(e,t,r),i}function o(e){return c(e)&&(e=i(e)),e instanceof n?e.format():n.prototype.format.call(e)}function a(e,t){return i(e,!1,!0).resolve(t)}function s(e,t){return e?i(e,!1,!0).resolveObject(t):t}function c(e){return"string"==typeof e}function l(e){return"object"==typeof e&&null!==e}function u(e){return null===e}function p(e){return null==e}var h=e("punycode");r.parse=i,r.resolve=a,r.resolveObject=s,r.format=o,r.Url=n;var f=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,g=["<",">",'"',"`"," ","\r","\n","\t"],m=["{","}","|","\\","^","`"].concat(g),v=["'"].concat(m),y=["%","/","?",";","#"].concat(v),b=["/","?","#"],w=255,x=/^[a-z0-9A-Z_-]{0,63}$/,_=/^([a-z0-9A-Z_-]{0,63})(.*)$/,E={javascript:!0,"javascript:":!0},k={javascript:!0,"javascript:":!0},S={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},P=e("querystring");n.prototype.parse=function(e,t,r){if(!c(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e;n=n.trim();var i=f.exec(n);if(i){i=i[0];var o=i.toLowerCase();this.protocol=o,n=n.substr(i.length)}if(r||i||n.match(/^\/\/[^@\/]+@[^@\/]+/)){var a="//"===n.substr(0,2);!a||i&&k[i]||(n=n.substr(2),this.slashes=!0)}if(!k[i]&&(a||i&&!S[i])){for(var s=-1,l=0;l<b.length;l++){var u=n.indexOf(b[l]);u!==-1&&(s===-1||u<s)&&(s=u)}var p,d;d=s===-1?n.lastIndexOf("@"):n.lastIndexOf("@",s),d!==-1&&(p=n.slice(0,d),n=n.slice(d+1),this.auth=decodeURIComponent(p)),s=-1;for(var l=0;l<y.length;l++){var u=n.indexOf(y[l]);u!==-1&&(s===-1||u<s)&&(s=u)}s===-1&&(s=n.length),this.host=n.slice(0,s),n=n.slice(s),this.parseHost(),this.hostname=this.hostname||"";var g="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!g)for(var m=this.hostname.split(/\./),l=0,A=m.length;l<A;l++){var C=m[l];if(C&&!C.match(x)){for(var R="",O=0,N=C.length;O<N;O++)R+=C.charCodeAt(O)>127?"x":C[O];if(!R.match(x)){var I=m.slice(0,l),j=m.slice(l+1),T=C.match(_);T&&(I.push(T[1]),j.unshift(T[2])),j.length&&(n="/"+j.join(".")+n),this.hostname=I.join(".");break}}}if(this.hostname.length>w?this.hostname="":this.hostname=this.hostname.toLowerCase(),!g){for(var L=this.hostname.split("."),F=[],l=0;l<L.length;++l){var M=L[l];F.push(M.match(/[^A-Za-z0-9_-]/)?"xn--"+h.encode(M):M)}this.hostname=F.join(".")}var D=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+D,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==n[0]&&(n="/"+n))}if(!E[o])for(var l=0,A=v.length;l<A;l++){var U=v[l],H=encodeURIComponent(U);H===U&&(H=escape(U)),n=n.split(U).join(H)}var z=n.indexOf("#");z!==-1&&(this.hash=n.substr(z),n=n.slice(0,z));var $=n.indexOf("?");if($!==-1?(this.search=n.substr($),this.query=n.substr($+1),t&&(this.query=P.parse(this.query)),n=n.slice(0,$)):t&&(this.search="",this.query={}),n&&(this.pathname=n),S[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var D=this.pathname||"",M=this.search||"";this.path=D+M}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&l(this.query)&&Object.keys(this.query).length&&(o=P.stringify(this.query));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||S[t])&&i!==!1?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+i+r+a+n},n.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(c(e)){var t=new n;t.parse(e,!1,!0),e=t}var r=new n;if(Object.keys(this).forEach(function(e){r[e]=this[e]},this),r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol)return Object.keys(e).forEach(function(t){"protocol"!==t&&(r[t]=e[t])}),S[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r;if(e.protocol&&e.protocol!==r.protocol){if(!S[e.protocol])return Object.keys(e).forEach(function(t){r[t]=e[t]}),r.href=r.format(),r;if(r.protocol=e.protocol,e.host||k[e.protocol])r.pathname=e.pathname;else{for(var i=(e.pathname||"").split("/");i.length&&!(e.host=i.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==i[0]&&i.unshift(""),i.length<2&&i.unshift(""),r.pathname=i.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var o=r.pathname||"",a=r.search||"";r.path=o+a}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var s=r.pathname&&"/"===r.pathname.charAt(0),l=e.host||e.pathname&&"/"===e.pathname.charAt(0),h=l||s||r.host&&e.pathname,f=h,d=r.pathname&&r.pathname.split("/")||[],i=e.pathname&&e.pathname.split("/")||[],g=r.protocol&&!S[r.protocol];if(g&&(r.hostname="",r.port=null,r.host&&(""===d[0]?d[0]=r.host:d.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===i[0]?i[0]=e.host:i.unshift(e.host)),e.host=null),h=h&&(""===i[0]||""===d[0])),l)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,d=i;else if(i.length)d||(d=[]),d.pop(),d=d.concat(i),r.search=e.search,r.query=e.query;else if(!p(e.search)){if(g){r.hostname=r.host=d.shift();var m=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");m&&(r.auth=m.shift(),r.host=r.hostname=m.shift())}return r.search=e.search,r.query=e.query,u(r.pathname)&&u(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!d.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var v=d.slice(-1)[0],y=(r.host||e.host)&&("."===v||".."===v)||""===v,b=0,w=d.length;w>=0;w--)v=d[w],"."==v?d.splice(w,1):".."===v?(d.splice(w,1),b++):b&&(d.splice(w,1),b--);if(!h&&!f)for(;b--;b)d.unshift("..");!h||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),y&&"/"!==d.join("/").substr(-1)&&d.push("");var x=""===d[0]||d[0]&&"/"===d[0].charAt(0);if(g){r.hostname=r.host=x?"":d.length?d.shift():"";var m=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");m&&(r.auth=m.shift(),r.host=r.hostname=m.shift())}return h=h||r.host&&d.length,h&&!x&&d.unshift(""),d.length?r.pathname=d.join("/"):(r.pathname=null,r.path=null),u(r.pathname)&&u(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var e=this.host,t=d.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{punycode:3,querystring:6}],8:[function(e,t,r){"use strict";e("./lib/locales"),r=t.exports=e("./lib/handlebars-intl")},{"./lib/handlebars-intl":10,"./lib/locales":1}],9:[function(e,t,r){"use strict";r["default"]={locale:"en",pluralRuleFunction:function(e,t){var r=String(e).split("."),n=!r[1],i=Number(r[0])==e,o=i&&r[0].slice(-1),a=i&&r[0].slice(-2);return t?1==o&&11!=a?"one":2==o&&12!=a?"two":3==o&&13!=a?"few":"other":1==e&&n?"one":"other"},fields:{year:{displayName:"Year",relative:{0:"this year",1:"next year","-1":"last year"},relativeTime:{future:{one:"in {0} year",other:"in {0} years"},past:{one:"{0} year ago",other:"{0} years ago"}}},month:{displayName:"Month",relative:{0:"this month",1:"next month","-1":"last month"},relativeTime:{future:{one:"in {0} month",other:"in {0} months"},past:{one:"{0} month ago",other:"{0} months ago"}}},day:{displayName:"Day",relative:{0:"today",1:"tomorrow","-1":"yesterday"},relativeTime:{future:{one:"in {0} day",other:"in {0} days"},past:{one:"{0} day ago",other:"{0} days ago"}}},hour:{displayName:"Hour",relativeTime:{future:{one:"in {0} hour",other:"in {0} hours"},past:{one:"{0} hour ago",other:"{0} hours ago"}}},minute:{displayName:"Minute",relativeTime:{future:{one:"in {0} minute",other:"in {0} minutes"},past:{one:"{0} minute ago",other:"{0} minutes ago"}}},second:{displayName:"Second",relative:{0:"now"},relativeTime:{future:{one:"in {0} second",other:"in {0} seconds"},past:{one:"{0} second ago",other:"{0} seconds ago"}}}}}},{}],10:[function(e,t,r){"use strict";function n(e){i["default"].__addLocaleData(e),o["default"].__addLocaleData(e)}r.__addLocaleData=n;var i=e("intl-messageformat"),o=e("intl-relativeformat"),a=e("./helpers.js"),s=e("./en.js");n(s["default"]),r.registerWith=a.registerWith},{"./en.js":9,"./helpers.js":11,"intl-messageformat":16,"intl-relativeformat":25}],11:[function(e,t,r){"use strict";function n(e){function t(e,t){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn("{{"+e+"}} is deprecated, use: {{"+t.name+"}}"),t.apply(this,arguments)}}function r(e){if(!e.fn)throw new Error("{{#intl}} must be invoked as a block helper");var t=b(e.data),r=s.extend({},t.intl,e.hash);return t.intl=r,e.fn(this,{data:t})}function n(e,t){var r,n,i,o=t.data&&t.data.intl,a=e.split(".");try{for(i=0,n=a.length;i<n;i++)r=o=o[a[i]]}finally{if(void 0===r)throw new ReferenceError("Could not find Intl object: "+e)}return r}function i(e,t,r){e=new Date(e),g(e,"A date or timestamp must be provided to {{formatDate}}"),r||(r=t,t=null);var n=r.data.intl&&r.data.intl.locales,i=v("date",t,r);return l(n,i).format(e)}function o(e,t,r){e=new Date(e),g(e,"A date or timestamp must be provided to {{formatTime}}"),r||(r=t,t=null);var n=r.data.intl&&r.data.intl.locales,i=v("time",t,r);return l(n,i).format(e)}function a(e,t,r){e=new Date(e),g(e,"A date or timestamp must be provided to {{formatRelative}}"),r||(r=t,t=null);var n=r.data.intl&&r.data.intl.locales,i=v("relative",t,r),o=r.hash.now;return delete i.now,p(n,i).format(e,{now:o})}function h(e,t,r){m(e,"A number must be provided to {{formatNumber}}"),r||(r=t,t=null);var n=r.data.intl&&r.data.intl.locales,i=v("number",t,r);return c(n,i).format(e)}function f(e,t){t||(t=e,e=null);var r=t.hash;if(!e&&"string"!=typeof e&&!r.intlName)throw new ReferenceError("{{formatMessage}} must be provided a message or intlName");var i=t.data.intl||{},o=i.locales,a=i.formats;return!e&&r.intlName&&(e=n(r.intlName,t)),"function"==typeof e?e(r):("string"==typeof e&&(e=u(e,o,a)),e.format(r))}function d(){var e,t,r=[].slice.call(arguments).pop(),n=r.hash;for(e in n)n.hasOwnProperty(e)&&(t=n[e],"string"==typeof t&&(n[e]=w(t)));return new y(String(f.apply(this,arguments)))}function g(e,t){if(!isFinite(e))throw new TypeError(t)}function m(e,t){if("number"!=typeof e)throw new TypeError(t)}function v(e,t,r){var i,o=r.hash;return t?("string"==typeof t&&(i=n("formats."+e+"."+t,r)),i=s.extend({},i,o)):i=o,i}var y=e.SafeString,b=e.createFrame,w=e.Utils.escapeExpression,x={intl:r,intlGet:n,formatDate:i,formatTime:o,formatRelative:a,formatNumber:h,formatMessage:f,formatHTMLMessage:d,intlDate:t("intlDate",i),intlTime:t("intlTime",o),intlNumber:t("intlNumber",h),intlMessage:t("intlMessage",f),intlHTMLMessage:t("intlHTMLMessage",d)};for(var _ in x)x.hasOwnProperty(_)&&e.registerHelper(_,x[_])}var i=e("intl-messageformat"),o=e("intl-relativeformat"),a=e("intl-format-cache"),s=e("./utils.js"),c=a["default"](Intl.NumberFormat),l=a["default"](Intl.DateTimeFormat),u=a["default"](i["default"]),p=a["default"](o["default"]);r.registerWith=n},{"./utils.js":12,"intl-format-cache":13,"intl-messageformat":16,"intl-relativeformat":25}],12:[function(e,t,r){"use strict";function n(e){var t,r,n,i,o=Array.prototype.slice.call(arguments,1);for(t=0,r=o.length;t<r;t+=1)if(n=o[t])for(i in n)n.hasOwnProperty(i)&&(e[i]=n[i]);return e}r.extend=n},{}],13:[function(e,t,r){"use strict";r=t.exports=e("./lib/memoizer")["default"],r["default"]=r},{"./lib/memoizer":15}],14:[function(e,t,r){"use strict";var n=Function.prototype.bind||function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),r=this,n=function(){},i=function(){return r.apply(this instanceof n?this:e,t.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(n.prototype=this.prototype),i.prototype=new n,i},i=Object.prototype.hasOwnProperty,o=function(){try{return!!Object.defineProperty({},"a",{})}catch(e){return!1}}(),a=(!o&&!Object.prototype.__defineGetter__,o?Object.defineProperty:function(e,t,r){"get"in r&&e.__defineGetter__?e.__defineGetter__(t,r.get):(!i.call(e,t)||"value"in r)&&(e[t]=r.value)}),s=Object.create||function(e,t){function r(){}var n,o;r.prototype=e,n=new r;for(o in t)i.call(t,o)&&a(n,o,t[o]);return n};r.bind=n,r.defineProperty=a,r.objCreate=s},{}],15:[function(e,t,r){"use strict";function n(e){var t=a.objCreate(null);return function(){var r=Array.prototype.slice.call(arguments),n=i(r),o=n&&t[n];return o||(o=new(a.bind.apply(e,[null].concat(r))),n&&(t[n]=o)),o}}function i(e){if("undefined"!=typeof JSON){var t,r,n,i=[];for(t=0,r=e.length;t<r;t+=1)n=e[t],n&&"object"==typeof n?i.push(o(n)):i.push(n);return JSON.stringify(i)}}function o(e){var t,r,n,i,o=[],a=[];for(t in e)e.hasOwnProperty(t)&&a.push(t);var s=a.sort();for(r=0,n=s.length;r<n;r+=1)t=s[r],i={},i[t]=e[t],o[r]=i;return o}var a=e("./es5");r["default"]=n},{"./es5":14}],16:[function(e,t,r){"use strict";var n=e("./lib/main")["default"];e("./lib/locales"),r=t.exports=n,r["default"]=r},{"./lib/locales":1,"./lib/main":21}],17:[function(e,t,r){"use strict";function n(e,t,r){this.locales=e,this.formats=t,this.pluralFn=r}function i(e){this.id=e}function o(e,t,r,n,i){this.id=e,this.useOrdinal=t,this.offset=r,this.options=n,this.pluralFn=i}function a(e,t,r,n){this.id=e,this.offset=t,this.numberFormat=r,this.string=n}function s(e,t){this.id=e,this.options=t}r["default"]=n,n.prototype.compile=function(e){return this.pluralStack=[],this.currentPlural=null,this.pluralNumberFormat=null,this.compileMessage(e)},n.prototype.compileMessage=function(e){if(!e||"messageFormatPattern"!==e.type)throw new Error('Message AST is not of type: "messageFormatPattern"');var t,r,n,i=e.elements,o=[];for(t=0,r=i.length;t<r;t+=1)switch(n=i[t],n.type){case"messageTextElement":o.push(this.compileMessageText(n));break;case"argumentElement":o.push(this.compileArgument(n));break;default:throw new Error("Message element does not have a valid type")}return o},n.prototype.compileMessageText=function(e){return this.currentPlural&&/(^|[^\\])#/g.test(e.value)?(this.pluralNumberFormat||(this.pluralNumberFormat=new Intl.NumberFormat(this.locales)),new a(this.currentPlural.id,this.currentPlural.format.offset,this.pluralNumberFormat,e.value)):e.value.replace(/\\#/g,"#")},n.prototype.compileArgument=function(e){var t=e.format;if(!t)return new i(e.id);var r,n=this.formats,a=this.locales,c=this.pluralFn;switch(t.type){case"numberFormat":return r=n.number[t.style],{id:e.id,format:new Intl.NumberFormat(a,r).format};case"dateFormat":return r=n.date[t.style],{id:e.id,format:new Intl.DateTimeFormat(a,r).format};case"timeFormat":return r=n.time[t.style],{id:e.id,format:new Intl.DateTimeFormat(a,r).format};case"pluralFormat":return r=this.compileOptions(e),new o(e.id,t.ordinal,t.offset,r,c);case"selectFormat":return r=this.compileOptions(e),new s(e.id,r);default:throw new Error("Message element does not have a valid format type")}},n.prototype.compileOptions=function(e){var t=e.format,r=t.options,n={};this.pluralStack.push(this.currentPlural),this.currentPlural="pluralFormat"===t.type?e:null;var i,o,a;for(i=0,o=r.length;i<o;i+=1)a=r[i],n[a.selector]=this.compileMessage(a.value);return this.currentPlural=this.pluralStack.pop(),n},i.prototype.format=function(e){return e?"string"==typeof e?e:String(e):""},o.prototype.getOption=function(e){var t=this.options,r=t["="+e]||t[this.pluralFn(e-this.offset,this.useOrdinal)];return r||t.other},a.prototype.format=function(e){var t=this.numberFormat.format(e-this.offset);return this.string.replace(/(^|[^\\])#/g,"$1"+t).replace(/\\#/g,"#")},s.prototype.getOption=function(e){var t=this.options;return t[e]||t.other}},{}],18:[function(e,t,r){"use strict";function n(e,t,r){var i="string"==typeof e?n.__parse(e):e;if(!i||"messageFormatPattern"!==i.type)throw new TypeError("A message must be provided as a String or AST.");r=this._mergeFormats(n.formats,r),o.defineProperty(this,"_locale",{value:this._resolveLocale(t)});var a=this._findPluralRuleFunction(this._locale),s=this._compilePattern(i,t,r,a),c=this;this.format=function(e){return c._format(s,e)}}var i=e("./utils"),o=e("./es5"),a=e("./compiler"),s=e("intl-messageformat-parser");r["default"]=n,o.defineProperty(n,"formats",{enumerable:!0,value:{number:{currency:{style:"currency"},percent:{style:"percent"}},date:{"short":{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},"long":{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{"short":{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},"long":{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}}}),o.defineProperty(n,"__localeData__",{value:o.objCreate(null)}),o.defineProperty(n,"__addLocaleData",{value:function(e){if(!e||!e.locale)throw new Error("Locale data provided to IntlMessageFormat is missing a `locale` property");n.__localeData__[e.locale.toLowerCase()]=e}}),o.defineProperty(n,"__parse",{value:s["default"].parse}),o.defineProperty(n,"defaultLocale",{enumerable:!0,writable:!0,value:void 0}),n.prototype.resolvedOptions=function(){return{locale:this._locale}},n.prototype._compilePattern=function(e,t,r,n){var i=new a["default"](t,r,n);return i.compile(e)},n.prototype._findPluralRuleFunction=function(e){for(var t=n.__localeData__,r=t[e.toLowerCase()];r;){if(r.pluralRuleFunction)return r.pluralRuleFunction;r=r.parentLocale&&t[r.parentLocale.toLowerCase()]}throw new Error("Locale data added to IntlMessageFormat is missing a `pluralRuleFunction` for :"+e)},n.prototype._format=function(e,t){var r,n,o,a,s,c="";for(r=0,n=e.length;r<n;r+=1)if(o=e[r],"string"!=typeof o){if(a=o.id,!t||!i.hop.call(t,a))throw new Error("A value must be provided for: "+a);s=t[a],c+=o.options?this._format(o.getOption(s),t):o.format(s)}else c+=o;return c},n.prototype._mergeFormats=function(e,t){var r,n,a={};for(r in e)i.hop.call(e,r)&&(a[r]=n=o.objCreate(e[r]),t&&i.hop.call(t,r)&&i.extend(n,t[r]));return a},n.prototype._resolveLocale=function(e){"string"==typeof e&&(e=[e]),e=(e||[]).concat(n.defaultLocale);var t,r,i,o,a=n.__localeData__;for(t=0,r=e.length;t<r;t+=1)for(i=e[t].toLowerCase().split("-");i.length;){if(o=a[i.join("-")])return o.locale;i.pop()}var s=e.pop();throw new Error("No locale data has been added to IntlMessageFormat for: "+e.join(", ")+", or the default locale: "+s)}},{"./compiler":17,"./es5":20,"./utils":22,"intl-messageformat-parser":23}],19:[function(e,t,r){"use strict";r["default"]={locale:"en",pluralRuleFunction:function(e,t){var r=String(e).split("."),n=!r[1],i=Number(r[0])==e,o=i&&r[0].slice(-1),a=i&&r[0].slice(-2);return t?1==o&&11!=a?"one":2==o&&12!=a?"two":3==o&&13!=a?"few":"other":1==e&&n?"one":"other"}}},{}],20:[function(e,t,r){"use strict";var n=e("./utils"),i=function(){try{return!!Object.defineProperty({},"a",{})}catch(e){return!1}}(),o=(!i&&!Object.prototype.__defineGetter__,i?Object.defineProperty:function(e,t,r){"get"in r&&e.__defineGetter__?e.__defineGetter__(t,r.get):(!n.hop.call(e,t)||"value"in r)&&(e[t]=r.value)}),a=Object.create||function(e,t){function r(){}var i,a;r.prototype=e,i=new r;for(a in t)n.hop.call(t,a)&&o(i,a,t[a]);return i};r.defineProperty=o,r.objCreate=a},{"./utils":22}],21:[function(e,t,r){"use strict";var n=e("./core"),i=e("./en");n["default"].__addLocaleData(i["default"]),n["default"].defaultLocale="en",r["default"]=n["default"]},{"./core":18,"./en":19}],22:[function(e,t,r){"use strict";function n(e){var t,r,n,o,a=Array.prototype.slice.call(arguments,1);for(t=0,r=a.length;t<r;t+=1)if(n=a[t])for(o in n)i.call(n,o)&&(e[o]=n[o]);return e}r.extend=n;var i=Object.prototype.hasOwnProperty;r.hop=i},{}],23:[function(e,t,r){"use strict";r=t.exports=e("./lib/parser")["default"],r["default"]=r},{"./lib/parser":24}],24:[function(e,t,r){"use strict";r["default"]=function(){function e(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}function t(e,t,r,n,i,o){this.message=e,this.expected=t,this.found=r,this.offset=n,this.line=i,this.column=o,this.name="SyntaxError"}function r(e){function r(t){function r(t,r,n){var i,o;for(i=r;i<n;i++)o=e.charAt(i),"\n"===o?(t.seenCR||t.line++,t.column=1,t.seenCR=!1):"\r"===o||"\u2028"===o||"\u2029"===o?(t.line++,t.column=1,t.seenCR=!0):(t.column++,t.seenCR=!1)}return Ve!==t&&(Ve>t&&(Ve=0,Ge={line:1,column:1,seenCR:!1}),r(Ge,Ve,t),Ve=t),Ge}function n(e){qe<Ke||(qe>Ke&&(Ke=qe,Je=[]),Je.push(e))}function i(n,i,o){function a(e){var t=1;for(e.sort(function(e,t){return e.description<t.description?-1:e.description>t.description?1:0});t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}function s(e,t){function r(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+t(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+t(e)}).replace(/[\u0180-\u0FFF]/g,function(e){return"\\u0"+t(e)}).replace(/[\u1080-\uFFFF]/g,function(e){return"\\u"+t(e)})}var n,i,o,a=new Array(e.length);for(o=0;o<e.length;o++)a[o]=e[o].description;return n=e.length>1?a.slice(0,-1).join(", ")+" or "+a[e.length-1]:a[0],i=t?'"'+r(t)+'"':"end of input","Expected "+n+" but "+i+" found."}var c=r(o),l=o<e.length?e.charAt(o):null;return null!==i&&a(i),new t(null!==n?n:s(i,l),i,l,o,c.line,c.column)}function o(){var e;return e=a()}function a(){var e,t,r;for(e=qe,t=[],r=s();r!==O;)t.push(r),r=s();return t!==O&&(We=e,t=j(t)),e=t}function s(){var e;return e=l(),e===O&&(e=p()),e}function c(){var t,r,n,i,o,a;if(t=qe,r=[],n=qe,i=_(),i!==O?(o=A(),o!==O?(a=_(),a!==O?(i=[i,o,a],n=i):(qe=n,n=T)):(qe=n,n=T)):(qe=n,n=T),n!==O)for(;n!==O;)r.push(n),n=qe,i=_(),i!==O?(o=A(),o!==O?(a=_(),a!==O?(i=[i,o,a],n=i):(qe=n,n=T)):(qe=n,n=T)):(qe=n,n=T);else r=T;return r!==O&&(We=t,r=L(r)),t=r,t===O&&(t=qe,r=x(),r!==O&&(r=e.substring(t,qe)),t=r),t}function l(){var e,t;return e=qe,t=c(),t!==O&&(We=e,t=F(t)),e=t}function u(){var t,r,i;if(t=S(),t===O){if(t=qe,r=[],M.test(e.charAt(qe))?(i=e.charAt(qe),qe++):(i=O,0===Qe&&n(D)),i!==O)for(;i!==O;)r.push(i),M.test(e.charAt(qe))?(i=e.charAt(qe),qe++):(i=O,0===Qe&&n(D));else r=T;r!==O&&(r=e.substring(t,qe)),t=r}return t}function p(){var t,r,i,o,a,s,c,l,p;return t=qe,123===e.charCodeAt(qe)?(r=B,qe++):(r=O,0===Qe&&n(U)),r!==O?(i=_(),i!==O?(o=u(),o!==O?(a=_(),a!==O?(s=qe,44===e.charCodeAt(qe)?(c=z,qe++):(c=O,0===Qe&&n($)),c!==O?(l=_(),l!==O?(p=h(),p!==O?(c=[c,l,p],s=c):(qe=s,s=T)):(qe=s,s=T)):(qe=s,s=T),s===O&&(s=H),s!==O?(c=_(),c!==O?(125===e.charCodeAt(qe)?(l=q,qe++):(l=O,0===Qe&&n(W)),l!==O?(We=t,r=V(o,s),t=r):(qe=t,t=T)):(qe=t,t=T)):(qe=t,t=T)):(qe=t,t=T)):(qe=t,t=T)):(qe=t,t=T)):(qe=t,t=T),t}function h(){var e;return e=f(),e===O&&(e=d(),e===O&&(e=g(),e===O&&(e=m()))),e}function f(){var t,r,i,o,a,s,c;return t=qe,e.substr(qe,6)===G?(r=G,qe+=6):(r=O,0===Qe&&n(K)),r===O&&(e.substr(qe,4)===J?(r=J,qe+=4):(r=O,0===Qe&&n(Q)),r===O&&(e.substr(qe,4)===Y?(r=Y,qe+=4):(r=O,0===Qe&&n(X)))),r!==O?(i=_(),i!==O?(o=qe,44===e.charCodeAt(qe)?(a=z,qe++):(a=O,0===Qe&&n($)),a!==O?(s=_(),s!==O?(c=A(),c!==O?(a=[a,s,c],o=a):(qe=o,o=T)):(qe=o,o=T)):(qe=o,o=T),o===O&&(o=H),o!==O?(We=t,r=Z(r,o),t=r):(qe=t,t=T)):(qe=t,t=T)):(qe=t,t=T),t}function d(){var t,r,i,o,a,s;return t=qe,e.substr(qe,6)===ee?(r=ee,qe+=6):(r=O,0===Qe&&n(te)),r!==O?(i=_(),i!==O?(44===e.charCodeAt(qe)?(o=z,qe++):(o=O,0===Qe&&n($)),o!==O?(a=_(),a!==O?(s=w(),s!==O?(We=t,r=re(s),t=r):(qe=t,t=T)):(qe=t,t=T)):(qe=t,t=T)):(qe=t,t=T)):(qe=t,t=T),t}function g(){var t,r,i,o,a,s;return t=qe,e.substr(qe,13)===ne?(r=ne,qe+=13):(r=O,0===Qe&&n(ie)),r!==O?(i=_(),i!==O?(44===e.charCodeAt(qe)?(o=z,qe++):(o=O,0===Qe&&n($)),o!==O?(a=_(),a!==O?(s=w(),s!==O?(We=t,r=oe(s),t=r):(qe=t,t=T)):(qe=t,t=T)):(qe=t,t=T)):(qe=t,t=T)):(qe=t,t=T),t}function m(){var t,r,i,o,a,s,c;if(t=qe,e.substr(qe,6)===ae?(r=ae,qe+=6):(r=O,0===Qe&&n(se)),r!==O)if(i=_(),i!==O)if(44===e.charCodeAt(qe)?(o=z,qe++):(o=O,0===Qe&&n($)),o!==O)if(a=_(),a!==O){if(s=[],c=y(),c!==O)for(;c!==O;)s.push(c),c=y();else s=T;s!==O?(We=t,r=ce(s),t=r):(qe=t,t=T)}else qe=t,t=T;else qe=t,t=T;else qe=t,t=T;else qe=t,t=T;return t}function v(){var t,r,i,o;return t=qe,r=qe,61===e.charCodeAt(qe)?(i=le,qe++):(i=O,0===Qe&&n(ue)),i!==O?(o=S(),o!==O?(i=[i,o],r=i):(qe=r,r=T)):(qe=r,r=T),r!==O&&(r=e.substring(t,qe)),t=r,t===O&&(t=A()),t}function y(){var t,r,i,o,s,c,l,u,p;return t=qe,r=_(),r!==O?(i=v(),i!==O?(o=_(),
o!==O?(123===e.charCodeAt(qe)?(s=B,qe++):(s=O,0===Qe&&n(U)),s!==O?(c=_(),c!==O?(l=a(),l!==O?(u=_(),u!==O?(125===e.charCodeAt(qe)?(p=q,qe++):(p=O,0===Qe&&n(W)),p!==O?(We=t,r=pe(i,l),t=r):(qe=t,t=T)):(qe=t,t=T)):(qe=t,t=T)):(qe=t,t=T)):(qe=t,t=T)):(qe=t,t=T)):(qe=t,t=T)):(qe=t,t=T),t}function b(){var t,r,i,o;return t=qe,e.substr(qe,7)===he?(r=he,qe+=7):(r=O,0===Qe&&n(fe)),r!==O?(i=_(),i!==O?(o=S(),o!==O?(We=t,r=de(o),t=r):(qe=t,t=T)):(qe=t,t=T)):(qe=t,t=T),t}function w(){var e,t,r,n,i;if(e=qe,t=b(),t===O&&(t=H),t!==O)if(r=_(),r!==O){if(n=[],i=y(),i!==O)for(;i!==O;)n.push(i),i=y();else n=T;n!==O?(We=e,t=ge(t,n),e=t):(qe=e,e=T)}else qe=e,e=T;else qe=e,e=T;return e}function x(){var t,r;if(Qe++,t=[],ve.test(e.charAt(qe))?(r=e.charAt(qe),qe++):(r=O,0===Qe&&n(ye)),r!==O)for(;r!==O;)t.push(r),ve.test(e.charAt(qe))?(r=e.charAt(qe),qe++):(r=O,0===Qe&&n(ye));else t=T;return Qe--,t===O&&(r=O,0===Qe&&n(me)),t}function _(){var t,r,i;for(Qe++,t=qe,r=[],i=x();i!==O;)r.push(i),i=x();return r!==O&&(r=e.substring(t,qe)),t=r,Qe--,t===O&&(r=O,0===Qe&&n(be)),t}function E(){var t;return we.test(e.charAt(qe))?(t=e.charAt(qe),qe++):(t=O,0===Qe&&n(xe)),t}function k(){var t;return _e.test(e.charAt(qe))?(t=e.charAt(qe),qe++):(t=O,0===Qe&&n(Ee)),t}function S(){var t,r,i,o,a,s;if(t=qe,48===e.charCodeAt(qe)?(r=ke,qe++):(r=O,0===Qe&&n(Se)),r===O){if(r=qe,i=qe,Pe.test(e.charAt(qe))?(o=e.charAt(qe),qe++):(o=O,0===Qe&&n(Ae)),o!==O){for(a=[],s=E();s!==O;)a.push(s),s=E();a!==O?(o=[o,a],i=o):(qe=i,i=T)}else qe=i,i=T;i!==O&&(i=e.substring(r,qe)),r=i}return r!==O&&(We=t,r=Ce(r)),t=r}function P(){var t,r,i,o,a,s,c,l;return Re.test(e.charAt(qe))?(t=e.charAt(qe),qe++):(t=O,0===Qe&&n(Oe)),t===O&&(t=qe,e.substr(qe,2)===Ne?(r=Ne,qe+=2):(r=O,0===Qe&&n(Ie)),r!==O&&(We=t,r=je()),t=r,t===O&&(t=qe,e.substr(qe,2)===Te?(r=Te,qe+=2):(r=O,0===Qe&&n(Le)),r!==O&&(We=t,r=Fe()),t=r,t===O&&(t=qe,e.substr(qe,2)===Me?(r=Me,qe+=2):(r=O,0===Qe&&n(De)),r!==O&&(We=t,r=Be()),t=r,t===O&&(t=qe,e.substr(qe,2)===Ue?(r=Ue,qe+=2):(r=O,0===Qe&&n(He)),r!==O?(i=qe,o=qe,a=k(),a!==O?(s=k(),s!==O?(c=k(),c!==O?(l=k(),l!==O?(a=[a,s,c,l],o=a):(qe=o,o=T)):(qe=o,o=T)):(qe=o,o=T)):(qe=o,o=T),o!==O&&(o=e.substring(i,qe)),i=o,i!==O?(We=t,r=ze(i),t=r):(qe=t,t=T)):(qe=t,t=T))))),t}function A(){var e,t,r;if(e=qe,t=[],r=P(),r!==O)for(;r!==O;)t.push(r),r=P();else t=T;return t!==O&&(We=e,t=$e(t)),e=t}var C,R=arguments.length>1?arguments[1]:{},O={},N={start:o},I=o,j=function(e){return{type:"messageFormatPattern",elements:e}},T=O,L=function(e){var t,r,n,i,o,a="";for(t=0,n=e.length;t<n;t+=1)for(i=e[t],r=0,o=i.length;r<o;r+=1)a+=i[r];return a},F=function(e){return{type:"messageTextElement",value:e}},M=/^[^ \t\n\r,.+={}#]/,D={type:"class",value:"[^ \\t\\n\\r,.+={}#]",description:"[^ \\t\\n\\r,.+={}#]"},B="{",U={type:"literal",value:"{",description:'"{"'},H=null,z=",",$={type:"literal",value:",",description:'","'},q="}",W={type:"literal",value:"}",description:'"}"'},V=function(e,t){return{type:"argumentElement",id:e,format:t&&t[2]}},G="number",K={type:"literal",value:"number",description:'"number"'},J="date",Q={type:"literal",value:"date",description:'"date"'},Y="time",X={type:"literal",value:"time",description:'"time"'},Z=function(e,t){return{type:e+"Format",style:t&&t[2]}},ee="plural",te={type:"literal",value:"plural",description:'"plural"'},re=function(e){return{type:e.type,ordinal:!1,offset:e.offset||0,options:e.options}},ne="selectordinal",ie={type:"literal",value:"selectordinal",description:'"selectordinal"'},oe=function(e){return{type:e.type,ordinal:!0,offset:e.offset||0,options:e.options}},ae="select",se={type:"literal",value:"select",description:'"select"'},ce=function(e){return{type:"selectFormat",options:e}},le="=",ue={type:"literal",value:"=",description:'"="'},pe=function(e,t){return{type:"optionalFormatPattern",selector:e,value:t}},he="offset:",fe={type:"literal",value:"offset:",description:'"offset:"'},de=function(e){return e},ge=function(e,t){return{type:"pluralFormat",offset:e,options:t}},me={type:"other",description:"whitespace"},ve=/^[ \t\n\r]/,ye={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},be={type:"other",description:"optionalWhitespace"},we=/^[0-9]/,xe={type:"class",value:"[0-9]",description:"[0-9]"},_e=/^[0-9a-f]/i,Ee={type:"class",value:"[0-9a-f]i",description:"[0-9a-f]i"},ke="0",Se={type:"literal",value:"0",description:'"0"'},Pe=/^[1-9]/,Ae={type:"class",value:"[1-9]",description:"[1-9]"},Ce=function(e){return parseInt(e,10)},Re=/^[^{}\\\0-\x1F \t\n\r]/,Oe={type:"class",value:"[^{}\\\\\\0-\\x1F \\t\\n\\r]",description:"[^{}\\\\\\0-\\x1F \\t\\n\\r]"},Ne="\\#",Ie={type:"literal",value:"\\#",description:'"\\\\#"'},je=function(){return"\\#"},Te="\\{",Le={type:"literal",value:"\\{",description:'"\\\\{"'},Fe=function(){return"{"},Me="\\}",De={type:"literal",value:"\\}",description:'"\\\\}"'},Be=function(){return"}"},Ue="\\u",He={type:"literal",value:"\\u",description:'"\\\\u"'},ze=function(e){return String.fromCharCode(parseInt(e,16))},$e=function(e){return e.join("")},qe=0,We=0,Ve=0,Ge={line:1,column:1,seenCR:!1},Ke=0,Je=[],Qe=0;if("startRule"in R){if(!(R.startRule in N))throw new Error("Can't start parsing from rule \""+R.startRule+'".');I=N[R.startRule]}if(C=I(),C!==O&&qe===e.length)return C;throw C!==O&&qe<e.length&&n({type:"end",description:"end of input"}),i(null,Je,Ke)}return e(t,Error),{SyntaxError:t,parse:r}}()},{}],25:[function(e,t,r){"use strict";var n=e("./lib/main")["default"];e("./lib/locales"),r=t.exports=n,r["default"]=r},{"./lib/locales":1,"./lib/main":30}],26:[function(e,t,r){"use strict";function n(e,t){t=t||{},a.isArray(e)&&(e=e.concat()),a.defineProperty(this,"_locale",{value:this._resolveLocale(e)}),a.defineProperty(this,"_options",{value:{style:this._resolveStyle(t.style),units:this._isValidUnits(t.units)&&t.units}}),a.defineProperty(this,"_locales",{value:e}),a.defineProperty(this,"_fields",{value:this._findFields(this._locale)}),a.defineProperty(this,"_messages",{value:a.objCreate(null)});var r=this;this.format=function(e,t){return r._format(e,t)}}var i=e("intl-messageformat"),o=e("./diff"),a=e("./es5");r["default"]=n;var s=["second","minute","hour","day","month","year"],c=["best fit","numeric"];a.defineProperty(n,"__localeData__",{value:a.objCreate(null)}),a.defineProperty(n,"__addLocaleData",{value:function(e){if(!e||!e.locale)throw new Error("Locale data provided to IntlRelativeFormat is missing a `locale` property value");n.__localeData__[e.locale.toLowerCase()]=e,i["default"].__addLocaleData(e)}}),a.defineProperty(n,"defaultLocale",{enumerable:!0,writable:!0,value:void 0}),a.defineProperty(n,"thresholds",{enumerable:!0,value:{second:45,minute:45,hour:22,day:26,month:11}}),n.prototype.resolvedOptions=function(){return{locale:this._locale,style:this._options.style,units:this._options.units}},n.prototype._compileMessage=function(e){var t,r=this._locales,n=(this._locale,this._fields[e]),o=n.relativeTime,a="",s="";for(t in o.future)o.future.hasOwnProperty(t)&&(a+=" "+t+" {"+o.future[t].replace("{0}","#")+"}");for(t in o.past)o.past.hasOwnProperty(t)&&(s+=" "+t+" {"+o.past[t].replace("{0}","#")+"}");var c="{when, select, future {{0, plural, "+a+"}}past {{0, plural, "+s+"}}}";return new i["default"](c,r)},n.prototype._getMessage=function(e){var t=this._messages;return t[e]||(t[e]=this._compileMessage(e)),t[e]},n.prototype._getRelativeUnits=function(e,t){var r=this._fields[t];if(r.relative)return r.relative[e]},n.prototype._findFields=function(e){for(var t=n.__localeData__,r=t[e.toLowerCase()];r;){if(r.fields)return r.fields;r=r.parentLocale&&t[r.parentLocale.toLowerCase()]}throw new Error("Locale data added to IntlRelativeFormat is missing `fields` for :"+e)},n.prototype._format=function(e,t){var r=t&&void 0!==t.now?t.now:a.dateNow();if(void 0===e&&(e=r),!isFinite(r))throw new RangeError("The `now` option provided to IntlRelativeFormat#format() is not in valid range.");if(!isFinite(e))throw new RangeError("The date value provided to IntlRelativeFormat#format() is not in valid range.");var n=o["default"](r,e),i=this._options.units||this._selectUnits(n),s=n[i];if("numeric"!==this._options.style){var c=this._getRelativeUnits(s,i);if(c)return c}return this._getMessage(i).format({0:Math.abs(s),when:s<0?"past":"future"})},n.prototype._isValidUnits=function(e){if(!e||a.arrIndexOf.call(s,e)>=0)return!0;if("string"==typeof e){var t=/s$/.test(e)&&e.substr(0,e.length-1);if(t&&a.arrIndexOf.call(s,t)>=0)throw new Error('"'+e+'" is not a valid IntlRelativeFormat `units` value, did you mean: '+t)}throw new Error('"'+e+'" is not a valid IntlRelativeFormat `units` value, it must be one of: "'+s.join('", "')+'"')},n.prototype._resolveLocale=function(e){"string"==typeof e&&(e=[e]),e=(e||[]).concat(n.defaultLocale);var t,r,i,o,a=n.__localeData__;for(t=0,r=e.length;t<r;t+=1)for(i=e[t].toLowerCase().split("-");i.length;){if(o=a[i.join("-")])return o.locale;i.pop()}var s=e.pop();throw new Error("No locale data has been added to IntlRelativeFormat for: "+e.join(", ")+", or the default locale: "+s)},n.prototype._resolveStyle=function(e){if(!e)return c[0];if(a.arrIndexOf.call(c,e)>=0)return e;throw new Error('"'+e+'" is not a valid IntlRelativeFormat `style` value, it must be one of: "'+c.join('", "')+'"')},n.prototype._selectUnits=function(e){var t,r,i;for(t=0,r=s.length;t<r&&(i=s[t],!(Math.abs(e[i])<n.thresholds[i]));t+=1);return i}},{"./diff":27,"./es5":29,"intl-messageformat":16}],27:[function(e,t,r){"use strict";function n(e){return 400*e/146097}var i=Math.round;r["default"]=function(e,t){e=+e,t=+t;var r=i(t-e),o=i(r/1e3),a=i(o/60),s=i(a/60),c=i(s/24),l=i(c/7),u=n(c),p=i(12*u),h=i(u);return{millisecond:r,second:o,minute:a,hour:s,day:c,week:l,month:p,year:h}}},{}],28:[function(e,t,r){arguments[4][9][0].apply(r,arguments)},{dup:9}],29:[function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=function(){try{return!!Object.defineProperty({},"a",{})}catch(e){return!1}}(),a=(!o&&!Object.prototype.__defineGetter__,o?Object.defineProperty:function(e,t,r){"get"in r&&e.__defineGetter__?e.__defineGetter__(t,r.get):(!n.call(e,t)||"value"in r)&&(e[t]=r.value)}),s=Object.create||function(e,t){function r(){}var i,o;r.prototype=e,i=new r;for(o in t)n.call(t,o)&&a(i,o,t[o]);return i},c=Array.prototype.indexOf||function(e,t){var r=this;if(!r.length)return-1;for(var n=t||0,i=r.length;n<i;n++)if(r[n]===e)return n;return-1},l=Array.isArray||function(e){return"[object Array]"===i.call(e)},u=Date.now||function(){return(new Date).getTime()};r.defineProperty=a,r.objCreate=s,r.arrIndexOf=c,r.isArray=l,r.dateNow=u},{}],30:[function(e,t,r){arguments[4][21][0].apply(r,arguments)},{"./core":26,"./en":28,dup:21}],31:[function(e,t,r){var n={};n.atype={NONE:0,URI:1,URI_FRAGMENT:11,SCRIPT:2,STYLE:3,ID:4,IDREF:5,IDREFS:6,GLOBAL_NAME:7,LOCAL_NAME:8,CLASSES:9,FRAME_TARGET:10},n.ATTRIBS={"*::class":9,"*::dir":0,"*::id":4,"*::lang":0,"*::onclick":2,"*::ondblclick":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::style":3,"*::title":0,"a::accesskey":0,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::onfocus":2,"a::rel":0,"a::rev":0,"a::shape":0,"a::tabindex":0,"a::target":10,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,"area::href":1,"area::nohref":0,"area::onblur":2,"area::onfocus":2,"area::shape":0,"area::tabindex":0,"area::target":10,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::tabindex":0,"button::type":0,"button::value":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,"colgroup::valign":0,"colgroup::width":0,"del::cite":1,"del::datetime":0,"dir::compact":0,"div::align":0,"dl::compact":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::autocomplete":0,"form::enctype":0,"form::method":0,"form::name":7,"form::onreset":2,"form::onsubmit":2,"form::target":10,"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"iframe::align":0,"iframe::frameborder":0,"iframe::height":0,"iframe::marginheight":0,"iframe::marginwidth":0,"iframe::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,"img::hspace":0,"img::ismap":0,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::align":0,"input::alt":0,"input::autocomplete":0,"input::checked":0,"input::disabled":0,"input::ismap":0,"input::maxlength":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,"input::readonly":0,"input::size":0,"input::src":1,"input::tabindex":0,"input::type":0,"input::usemap":11,"input::value":0,"ins::cite":1,"ins::datetime":0,"label::accesskey":0,"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"ol::compact":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"p::align":0,"pre::width":0,"q::cite":1,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,"select::onfocus":2,"select::size":0,"select::tabindex":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,"tbody::charoff":0,"tbody::valign":0,"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,"textarea::accesskey":0,"textarea::cols":0,"textarea::disabled":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::readonly":0,"textarea::rows":0,"textarea::tabindex":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,"ul::compact":0,"ul::type":0},n.eflags={OPTIONAL_ENDTAG:1,EMPTY:2,CDATA:4,RCDATA:8,UNSAFE:16,FOLDABLE:32,SCRIPT:64,STYLE:128},n.ELEMENTS={a:0,abbr:0,acronym:0,address:0,applet:16,area:2,b:0,base:18,basefont:18,bdo:0,big:0,blockquote:0,body:49,br:2,button:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,dd:1,del:0,dfn:0,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,font:0,form:0,frame:18,frameset:16,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:49,hr:2,html:49,i:0,iframe:4,img:2,input:2,ins:0,isindex:18,kbd:0,label:0,legend:0,li:1,link:18,map:0,menu:0,meta:18,noframes:20,noscript:20,object:16,ol:0,optgroup:0,option:1,p:1,param:18,pre:0,q:0,s:0,samp:0,script:84,select:0,small:0,span:0,strike:0,strong:0,style:148,sub:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,title:24,tr:1,tt:0,u:0,ul:0,"var":0},n.URIEFFECTS={},n.LOADERTYPES={},"undefined"!=typeof r?("undefined"!=typeof t&&t.exports&&(r=t.exports=n),r.URI=n):"undefined"!=typeof window&&(window.html4=n)},{}],32:[function(e,t,r){var n=function(){function e(e){var t=(""+e).match(f);return t?new c(l(t[1]),l(t[2]),l(t[3]),l(t[4]),l(t[5]),l(t[6]),l(t[7])):null}function t(e,t,o,a,s,l,u){var p=new c(n(e,d),n(t,d),r(o),a>0?a.toString():null,n(s,g),null,r(u));return l&&("string"==typeof l?p.setRawQuery(l.replace(/[^?&=0-9A-Za-z_\-~.%]/g,i)):p.setAllParameters(l)),p}function r(e){return"string"==typeof e?encodeURIComponent(e):null}function n(e,t){return"string"==typeof e?encodeURI(e).replace(t,i):null}function i(e){var t=e.charCodeAt(0);return"%"+"0123456789ABCDEF".charAt(t>>4&15)+"0123456789ABCDEF".charAt(15&t)}function o(e){return e.replace(/(^|\/)\.(?:\/|$)/g,"$1").replace(/\/{2,}/g,"/")}function a(e){if(null===e)return null;for(var t,r=o(e),n=p;(t=r.replace(n,"$1"))!=r;r=t);return r}function s(e,t){var r=e.clone(),n=t.hasScheme();n?r.setRawScheme(t.getRawScheme()):n=t.hasCredentials(),n?r.setRawCredentials(t.getRawCredentials()):n=t.hasDomain(),n?r.setRawDomain(t.getRawDomain()):n=t.hasPort();var i=t.getRawPath(),o=a(i);if(n)r.setPort(t.getPort()),o=o&&o.replace(h,"");else if(n=!!i){if(47!==o.charCodeAt(0)){var s=a(r.getRawPath()||"").replace(h,""),c=s.lastIndexOf("/")+1;o=a((c?s.substring(0,c):"")+a(i)).replace(h,"")}}else o=o&&o.replace(h,""),o!==i&&r.setRawPath(o);return n?r.setRawPath(o):n=t.hasQuery(),n?r.setRawQuery(t.getRawQuery()):n=t.hasFragment(),n&&r.setRawFragment(t.getRawFragment()),r}function c(e,t,r,n,i,o,a){this.scheme_=e,this.credentials_=t,this.domain_=r,this.port_=n,this.path_=i,this.query_=o,this.fragment_=a,this.paramCache_=null}function l(e){return"string"==typeof e&&e.length>0?e:null}var u=new RegExp("(/|^)(?:[^./][^/]*|\\.{2,}(?:[^./][^/]*)|\\.{3,}[^/]*)/\\.\\.(?:/|$)"),p=new RegExp(u),h=/^(?:\.\.\/)*(?:\.\.$)?/;c.prototype.toString=function(){var e=[];return null!==this.scheme_&&e.push(this.scheme_,":"),null!==this.domain_&&(e.push("//"),null!==this.credentials_&&e.push(this.credentials_,"@"),e.push(this.domain_),null!==this.port_&&e.push(":",this.port_.toString())),null!==this.path_&&e.push(this.path_),null!==this.query_&&e.push("?",this.query_),null!==this.fragment_&&e.push("#",this.fragment_),e.join("")},c.prototype.clone=function(){return new c(this.scheme_,this.credentials_,this.domain_,this.port_,this.path_,this.query_,this.fragment_)},c.prototype.getScheme=function(){return this.scheme_&&decodeURIComponent(this.scheme_).toLowerCase()},c.prototype.getRawScheme=function(){return this.scheme_},c.prototype.setScheme=function(e){return this.scheme_=n(e,d),this},c.prototype.setRawScheme=function(e){return this.scheme_=e?e:null,this},c.prototype.hasScheme=function(){return null!==this.scheme_},c.prototype.getCredentials=function(){return this.credentials_&&decodeURIComponent(this.credentials_)},c.prototype.getRawCredentials=function(){return this.credentials_},c.prototype.setCredentials=function(e){return this.credentials_=n(e,d),this},c.prototype.setRawCredentials=function(e){return this.credentials_=e?e:null,this},c.prototype.hasCredentials=function(){return null!==this.credentials_},c.prototype.getDomain=function(){return this.domain_&&decodeURIComponent(this.domain_)},c.prototype.getRawDomain=function(){return this.domain_},c.prototype.setDomain=function(e){return this.setRawDomain(e&&encodeURIComponent(e))},c.prototype.setRawDomain=function(e){return this.domain_=e?e:null,this.setRawPath(this.path_)},c.prototype.hasDomain=function(){return null!==this.domain_},c.prototype.getPort=function(){return this.port_&&decodeURIComponent(this.port_)},c.prototype.setPort=function(e){if(e){if(e=Number(e),e!==(65535&e))throw new Error("Bad port number "+e);this.port_=""+e}else this.port_=null;return this},c.prototype.hasPort=function(){return null!==this.port_},c.prototype.getPath=function(){return this.path_&&decodeURIComponent(this.path_)},c.prototype.getRawPath=function(){return this.path_},c.prototype.setPath=function(e){return this.setRawPath(n(e,g))},c.prototype.setRawPath=function(e){return e?(e=String(e),this.path_=!this.domain_||/^\//.test(e)?e:"/"+e):this.path_=null,this},c.prototype.hasPath=function(){return null!==this.path_},c.prototype.getQuery=function(){return this.query_&&decodeURIComponent(this.query_).replace(/\+/g," ")},c.prototype.getRawQuery=function(){return this.query_},c.prototype.setQuery=function(e){return this.paramCache_=null,this.query_=r(e),this},c.prototype.setRawQuery=function(e){return this.paramCache_=null,this.query_=e?e:null,this},c.prototype.hasQuery=function(){return null!==this.query_},c.prototype.setAllParameters=function(e){if("object"==typeof e&&!(e instanceof Array)&&(e instanceof Object||"[object Array]"!==Object.prototype.toString.call(e))){var t=[],r=-1;for(var n in e){var i=e[n];"string"==typeof i&&(t[++r]=n,t[++r]=i)}e=t}this.paramCache_=null;for(var o=[],a="",s=0;s<e.length;){var n=e[s++],i=e[s++];o.push(a,encodeURIComponent(n.toString())),a="&",i&&o.push("=",encodeURIComponent(i.toString()))}return this.query_=o.join(""),this},c.prototype.checkParameterCache_=function(){if(!this.paramCache_){var e=this.query_;if(e){for(var t=e.split(/[&\?]/),r=[],n=-1,i=0;i<t.length;++i){var o=t[i].match(/^([^=]*)(?:=(.*))?$/);r[++n]=decodeURIComponent(o[1]).replace(/\+/g," "),r[++n]=decodeURIComponent(o[2]||"").replace(/\+/g," ")}this.paramCache_=r}else this.paramCache_=[]}},c.prototype.setParameterValues=function(e,t){"string"==typeof t&&(t=[t]),this.checkParameterCache_();for(var r=0,n=this.paramCache_,i=[],o=0;o<n.length;o+=2)e===n[o]?r<t.length&&i.push(e,t[r++]):i.push(n[o],n[o+1]);for(;r<t.length;)i.push(e,t[r++]);return this.setAllParameters(i),this},c.prototype.removeParameter=function(e){return this.setParameterValues(e,[])},c.prototype.getAllParameters=function(){return this.checkParameterCache_(),this.paramCache_.slice(0,this.paramCache_.length)},c.prototype.getParameterValues=function(e){this.checkParameterCache_();for(var t=[],r=0;r<this.paramCache_.length;r+=2)e===this.paramCache_[r]&&t.push(this.paramCache_[r+1]);return t},c.prototype.getParameterMap=function(e){this.checkParameterCache_();for(var t={},r=0;r<this.paramCache_.length;r+=2){var n=this.paramCache_[r++],i=this.paramCache_[r++];n in t?t[n].push(i):t[n]=[i]}return t},c.prototype.getParameterValue=function(e){this.checkParameterCache_();for(var t=0;t<this.paramCache_.length;t+=2)if(e===this.paramCache_[t])return this.paramCache_[t+1];return null},c.prototype.getFragment=function(){return this.fragment_&&decodeURIComponent(this.fragment_)},c.prototype.getRawFragment=function(){return this.fragment_},c.prototype.setFragment=function(e){return this.fragment_=e?encodeURIComponent(e):null,this},c.prototype.setRawFragment=function(e){return this.fragment_=e?e:null,this},c.prototype.hasFragment=function(){return null!==this.fragment_};var f=new RegExp("^(?:([^:/?#]+):)?(?://(?:([^/?#]*)@)?([^/?#:@]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$"),d=/[#\/\?@]/g,g=/[\#\?]/g;return c.parse=e,c.create=t,c.resolve=s,c.collapse_dots=a,c.utils={mimeTypeOf:function(t){var r=e(t);return/\.html$/.test(r.getPath())?"text/html":"application/javascript"},resolve:function(t,r){return t?s(e(t),e(r)).toString():""+r}},c}();"undefined"!=typeof r?("undefined"!=typeof t&&t.exports&&(r=t.exports=n),r.URI=n):"undefined"!=typeof window&&(window.URI=n)},{}],33:[function(e,t,r){var n=e("./lib/html4.js"),i=e("./lib/uri.js");if("i"!=="I".toLowerCase())throw"I/i problem";var o=function(e){function t(e){if(N.hasOwnProperty(e))return N[e];var t=e.match(I);if(t)return String.fromCharCode(parseInt(t[1],10));if(t=e.match(j))return String.fromCharCode(parseInt(t[1],16));if(L&&T.test(e)){L.innerHTML="&"+e+";";var r=L.textContent;return N[e]=r,r}return"&"+e+";"}function r(e,r){return t(r)}function n(e){return e.replace(F,"")}function o(e){return e?e.replace(M,r):e}function a(e){return e?(""+e).replace(B,"&amp;").replace(H,"&lt;").replace(z,"&gt;").replace($,"&#34;"):e}function s(e){return e?e.replace(U,"&amp;$1").replace(H,"&lt;").replace(z,"&gt;"):e}function c(e){var t={cdata:e.cdata||e.cdata,comment:e.comment||e.comment,endDoc:e.endDoc||e.endDoc,endTag:e.endTag||e.endTag,pcdata:e.pcdata||e.pcdata,rcdata:e.rcdata||e.rcdata,startDoc:e.startDoc||e.startDoc,startTag:e.startTag||e.startTag};return function(e,r){return l(e,t,r)}}function l(e,t,r){var n=h(e),i={noMoreGT:!1,noMoreEndComments:!1};p(t,n,0,i,r)}function u(e,t,r,n,i){return function(){p(e,t,r,n,i)}}function p(t,r,n,i,o){try{t.startDoc&&0==n&&t.startDoc(o);for(var a,s,c,l=n,p=r.length;l<p;){var h=r[l++],m=r[l];switch(h){case"&":D.test(m)?(t.pcdata&&t.pcdata("&"+m,o,G,u(t,r,l,i,o)),l++):t.pcdata&&t.pcdata("&amp;",o,G,u(t,r,l,i,o));break;case"</":(a=/^([-\w:]+)[^\'\"]*/.exec(m))?a[0].length===m.length&&">"===r[l+1]?(l+=2,c=a[1].toLowerCase(),t.endTag&&t.endTag(c,o,G,u(t,r,l,i,o))):l=f(r,l,t,o,G,i):t.pcdata&&t.pcdata("&lt;/",o,G,u(t,r,l,i,o));break;case"<":if(a=/^([-\w:]+)\s*\/?/.exec(m))if(a[0].length===m.length&&">"===r[l+1]){l+=2,c=a[1].toLowerCase(),t.startTag&&t.startTag(c,[],o,G,u(t,r,l,i,o));var v=e.ELEMENTS[c];if(v&V){var y={name:c,next:l,eflags:v};l=g(r,y,t,o,G,i)}}else l=d(r,l,t,o,G,i);else t.pcdata&&t.pcdata("&lt;",o,G,u(t,r,l,i,o));break;case"<!--":if(!i.noMoreEndComments){for(s=l+1;s<p&&(">"!==r[s]||!/--$/.test(r[s-1]));s++);if(s<p){if(t.comment){var b=r.slice(l,s).join("");t.comment(b.substr(0,b.length-2),o,G,u(t,r,s+1,i,o))}l=s+1}else i.noMoreEndComments=!0}i.noMoreEndComments&&t.pcdata&&t.pcdata("&lt;!--",o,G,u(t,r,l,i,o));break;case"<!":if(/^\w/.test(m)){if(!i.noMoreGT){for(s=l+1;s<p&&">"!==r[s];s++);s<p?l=s+1:i.noMoreGT=!0}i.noMoreGT&&t.pcdata&&t.pcdata("&lt;!",o,G,u(t,r,l,i,o))}else t.pcdata&&t.pcdata("&lt;!",o,G,u(t,r,l,i,o));break;case"<?":if(!i.noMoreGT){for(s=l+1;s<p&&">"!==r[s];s++);s<p?l=s+1:i.noMoreGT=!0}i.noMoreGT&&t.pcdata&&t.pcdata("&lt;?",o,G,u(t,r,l,i,o));break;case">":t.pcdata&&t.pcdata("&gt;",o,G,u(t,r,l,i,o));break;case"":break;default:t.pcdata&&t.pcdata(h,o,G,u(t,r,l,i,o))}}t.endDoc&&t.endDoc(o)}catch(w){if(w!==G)throw w}}function h(e){var t=/(<\/|<\!--|<[!?]|[&<>])/g;if(e+="",W)return e.split(t);for(var r,n=[],i=0;null!==(r=t.exec(e));)n.push(e.substring(i,r.index)),n.push(r[0]),i=r.index+r[0].length;return n.push(e.substring(i)),n}function f(e,t,r,n,i,o){var a=m(e,t);return a?(r.endTag&&r.endTag(a.name,n,i,u(r,e,t,o,n)),a.next):e.length}function d(e,t,r,n,i,o){var a=m(e,t);return a?(r.startTag&&r.startTag(a.name,a.attrs,n,i,u(r,e,a.next,o,n)),a.eflags&V?g(e,a,r,n,i,o):a.next):e.length}function g(t,r,n,i,o,a){var c=t.length;K.hasOwnProperty(r.name)||(K[r.name]=new RegExp("^"+r.name+"(?:[\\s\\/]|$)","i"));for(var l=K[r.name],p=r.next,h=r.next+1;h<c&&("</"!==t[h-1]||!l.test(t[h]));h++);h<c&&(h-=1);var f=t.slice(p,h).join("");if(r.eflags&e.eflags.CDATA)n.cdata&&n.cdata(f,i,o,u(n,t,h,a,i));else{if(!(r.eflags&e.eflags.RCDATA))throw new Error("bug");n.rcdata&&n.rcdata(s(f),i,o,u(n,t,h,a,i))}return h}function m(t,r){var n=/^([-\w:]+)/.exec(t[r]),i={};i.name=n[1].toLowerCase(),i.eflags=e.ELEMENTS[i.name];for(var o=t[r].substr(n[0].length),a=r+1,s=t.length;a<s&&">"!==t[a];a++)o+=t[a];if(!(s<=a)){for(var c=[];""!==o;)if(n=q.exec(o)){if(n[4]&&!n[5]||n[6]&&!n[7]){for(var l=n[4]||n[6],u=!1,p=[o,t[a++]];a<s;a++){if(u){if(">"===t[a])break}else 0<=t[a].indexOf(l)&&(u=!0);p.push(t[a])}if(s<=a)break;o=p.join("");continue}var h=n[1].toLowerCase(),f=n[2]?v(n[3]):"";c.push(h,f),o=o.substr(n[0].length)}else o=o.replace(/^[\s\S][^a-z\s]*/,"");return i.attrs=c,i.next=a+1,i}}function v(e){var t=e.charCodeAt(0);return 34!==t&&39!==t||(e=e.substr(1,e.length-2)),o(n(e))}function y(t){var r,n,i=function(e,t){n||t.push(e)};return c({startDoc:function(e){r=[],n=!1},startTag:function(i,o,s){if(!n&&e.ELEMENTS.hasOwnProperty(i)){var c=e.ELEMENTS[i];if(!(c&e.eflags.FOLDABLE)){var l=t(i,o);if(!l)return void(n=!(c&e.eflags.EMPTY));if("object"!=typeof l)throw new Error("tagPolicy did not return object (old API?)");if(!("attribs"in l))throw new Error("tagPolicy gave no attribs");o=l.attribs;var u,p;if("tagName"in l?(p=l.tagName,u=e.ELEMENTS[p]):(p=i,u=c),c&e.eflags.OPTIONAL_ENDTAG){var h=r[r.length-1];!h||h.orig!==i||h.rep===p&&i===p||s.push("</",h.rep,">")}c&e.eflags.EMPTY||r.push({orig:i,rep:p}),s.push("<",p);for(var f=0,d=o.length;f<d;f+=2){var g=o[f],m=o[f+1];null!==m&&void 0!==m&&s.push(" ",g,'="',a(m),'"')}s.push(">"),c&e.eflags.EMPTY&&!(u&e.eflags.EMPTY)&&s.push("</",p,">")}}},endTag:function(t,i){if(n)return void(n=!1);if(e.ELEMENTS.hasOwnProperty(t)){var o=e.ELEMENTS[t];if(!(o&(e.eflags.EMPTY|e.eflags.FOLDABLE))){var a;if(o&e.eflags.OPTIONAL_ENDTAG)for(a=r.length;--a>=0;){var s=r[a].orig;if(s===t)break;if(!(e.ELEMENTS[s]&e.eflags.OPTIONAL_ENDTAG))return}else for(a=r.length;--a>=0&&r[a].orig!==t;);if(a<0)return;for(var c=r.length;--c>a;){var l=r[c].rep;e.ELEMENTS[l]&e.eflags.OPTIONAL_ENDTAG||i.push("</",l,">")}a<r.length&&(t=r[a].rep),r.length=a,i.push("</",t,">")}}},pcdata:i,rcdata:i,cdata:i,endDoc:function(e){for(;r.length;r.length--)e.push("</",r[r.length-1].rep,">")}})}function b(e,t,r,n,o){if(!o)return null;try{var a=i.parse(""+e);if(a&&(!a.hasScheme()||J.test(a.getScheme()))){var s=o(a,t,r,n);return s?s.toString():null}}catch(c){return null}return null}function w(e,t,r,n,i){if(r||e(t+" removed",{change:"removed",tagName:t}),n!==i){var o="changed";n&&!i?o="removed":!n&&i&&(o="added"),e(t+"."+r+" "+o,{change:o,tagName:t,attribName:r,oldValue:n,newValue:i})}}function x(e,t,r){var n;return n=t+"::"+r,e.hasOwnProperty(n)?e[n]:(n="*::"+r,e.hasOwnProperty(n)?e[n]:void 0)}function _(t,r){return x(e.LOADERTYPES,t,r)}function E(t,r){return x(e.URIEFFECTS,t,r)}function k(t,r,n,i,o){for(var a=0;a<r.length;a+=2){var s,c=r[a],l=r[a+1],u=l,p=null;if(s=t+"::"+c,(e.ATTRIBS.hasOwnProperty(s)||(s="*::"+c,e.ATTRIBS.hasOwnProperty(s)))&&(p=e.ATTRIBS[s]),null!==p)switch(p){case e.atype.NONE:break;case e.atype.SCRIPT:l=null,o&&w(o,t,c,u,l);break;case e.atype.STYLE:if("undefined"==typeof C){l=null,o&&w(o,t,c,u,l);break}var h=[];C(l,{declaration:function(t,r){var i=t.toLowerCase();R(i,r,n?function(t){return b(t,e.ueffects.SAME_DOCUMENT,e.ltypes.SANDBOXED,{TYPE:"CSS",CSS_PROP:i},n)}:null),r.length&&h.push(i+": "+r.join(" "))}}),l=h.length>0?h.join(" ; "):null,o&&w(o,t,c,u,l);break;case e.atype.ID:case e.atype.IDREF:case e.atype.IDREFS:case e.atype.GLOBAL_NAME:case e.atype.LOCAL_NAME:case e.atype.CLASSES:l=i?i(l):l,o&&w(o,t,c,u,l);break;case e.atype.URI:l=b(l,E(t,c),_(t,c),{TYPE:"MARKUP",XML_ATTR:c,XML_TAG:t},n),o&&w(o,t,c,u,l);break;case e.atype.URI_FRAGMENT:l&&"#"===l.charAt(0)?(l=l.substring(1),l=i?i(l):l,null!==l&&void 0!==l&&(l="#"+l)):l=null,o&&w(o,t,c,u,l);break;default:l=null,o&&w(o,t,c,u,l)}else l=null,o&&w(o,t,c,u,l);r[a+1]=l}return r}function S(t,r,n){return function(i,o){return e.ELEMENTS[i]&e.eflags.UNSAFE?void(n&&w(n,i,void 0,void 0,void 0)):{attribs:k(i,o,t,r,n)}}}function P(e,t){var r=[];return y(t)(e,r),r.join("")}function A(e,t,r,n){var i=S(t,r,n);return P(e,i)}var C,R,O;"undefined"!=typeof window&&(C=window.parseCssDeclarations,R=window.sanitizeCssProperty,O=window.cssSchema);var N={lt:"<",LT:"<",gt:">",GT:">",amp:"&",AMP:"&",quot:'"',apos:"'",nbsp:"Â "},I=/^#(\d+)$/,j=/^#x([0-9A-Fa-f]+)$/,T=/^[A-Za-z][A-za-z0-9]+$/,L="undefined"!=typeof window&&window.document?window.document.createElement("textarea"):null,F=/\0/g,M=/&(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/g,D=/^(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/,B=/&/g,U=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi,H=/[<]/g,z=/>/g,$=/\"/g,q=new RegExp("^\\s*([-.:\\w]+)(?:\\s*(=)\\s*((\")[^\"]*(\"|$)|(')[^']*('|$)|(?=[a-z][-\\w]*\\s*=)|[^\"'\\s]*))?","i"),W=3==="a,b".split(/(,)/).length,V=e.eflags.CDATA|e.eflags.RCDATA,G={},K={},J=/^(?:https?|mailto)$/i,Q={};return Q.escapeAttrib=Q.escapeAttrib=a,Q.makeHtmlSanitizer=Q.makeHtmlSanitizer=y,Q.makeSaxParser=Q.makeSaxParser=c,Q.makeTagPolicy=Q.makeTagPolicy=S,Q.normalizeRCData=Q.normalizeRCData=s,Q.sanitize=Q.sanitize=A,Q.sanitizeAttribs=Q.sanitizeAttribs=k,Q.sanitizeWithPolicy=Q.sanitizeWithPolicy=P,Q.unescapeEntities=Q.unescapeEntities=o,Q}(n),a=o.sanitize;"undefined"!=typeof window&&(window.html=o,window.html_sanitize=a);var s={};s.escapeAttrib=o.escapeAttrib,s.makeHtmlSanitizer=o.makeHtmlSanitizer,s.makeSaxParser=o.makeSaxParser,s.makeTagPolicy=o.makeTagPolicy,s.normalizeRCData=o.normalizeRCData,s.sanitizeAttribs=o.sanitizeAttribs,s.sanitizeWithPolicy=o.sanitizeWithPolicy,s.unescapeEntities=o.unescapeEntities,s.escape=o.escapeAttrib,
s.sanitize=function(e,t,r,n){return"string"==typeof e&&(e=e.replace(/<([a-zA-Z]+)([^>]*)\/>/g,"<$1$2></$1>")),e?o.sanitize(e,t,r,n):e},"undefined"!=typeof r?("undefined"!=typeof t&&t.exports&&(r=t.exports=s),r.Sanitizer=s):this.Sanitizer=s},{"./lib/html4.js":31,"./lib/uri.js":32}],34:[function(e,t,r){"use strict";var n=e("../util/util"),i=e("../util/logger-factory"),o=e("browser-bunyan"),a=e("./default-widget-model"),s=function(){this.log=i.getLogger()};s.prototype.combine=function(e){var t=this.log,r=n.cloneDeep(a);return e.forEach(function(e){n.merge(r,n.omit(e,["preferences","viewmodes"])),e.viewmodes&&(r.viewmodes=e.viewmodes),e.preferences&&(r.preferences=e.preferences)}),t.debug("Aggregated model created."),t.level()<=o.TRACE&&t.trace("Aggregated model is this:\n %s",JSON.stringify(r,null,"\t")),r},t.exports=s},{"../util/logger-factory":83,"../util/util":84,"./default-widget-model":37,"browser-bunyan":86}],35:[function(e,t,r){"use strict";var n=function(e){};n.prototype.parse=function(e){throw new Error("ConfigParser#parse must be overridden.")},t.exports=n},{}],36:[function(e,t,r){"use strict";var n=function(e){};n.prototype.read=function(e){throw new Error("ConfigReader#read must be overridden.")},t.exports=n},{}],37:[function(e,t,r){"use strict";var n={id:null,version:null,height:null,width:null,viewmodes:[],name:null,shortName:null,description:null,author:null,authorHref:null,authorEmail:null,preferences:{},license:null,licenseHref:null,icons:[],content:{src:"index.html",type:"text/html",encoding:"UTF-8"},features:[]};t.exports=n},{}],38:[function(e,t,r){"use strict";var n=e("./widget-renderer"),i=e("../util/verror"),o=e("../util/logger-factory"),a=e("../util/util"),s=e("promise-extensions")(Promise),c=e("../util/deduping-fetch"),l=function(e,t){this._opts=t||{},this.preprocessorMap={},this.log=o.getLogger(),this._datasourceResolverFactory=e};l.prototype=Object.create(n.prototype),l.prototype.render=function(e,t){var r,n=this;if(this.isRendered())r=s.resolve(n.process(e,t,null));else{var o=[];o.push(this.fetchStartFile(e));var c=e.preferences.messages&&e.preferences.messages.value;o.push(c?this._fetchMessages(c):null);var l=Object.keys(e.datasources||{}).map(function(t){return e.datasources[t]});if(l.length>0){var u=n._buildDatasourceContext(e,t),p=l.map(function(e){return n._fetchDatasource(e,u)});o=o.concat(p)}r=s.all(o).spread(function(t,r){var i=Array.prototype.slice.call(arguments,2),o=i.reduce(function(e,t){return e[t.name]=t.data,e},{}),s=a.assign({},e,{datasources:o});return n.preprocess(e,t,s,r)}).then(function(r){return n.process(e,t,r)})["catch"](function(t){throw new i(t,"The widget ["+e.name+"] could not be rendered:\n\t"+t.message)})}return r.then(function(){return n.postprocess(e,t)})},l.prototype._fetchMessages=function(t){var r=this,n=a.isUrlForFile(t)?e("../util/fetch-file"):c;return n(t).then(function(e){var t=e.json();return r.log.trace("Fetched messages:\n%s",t),t})},l.prototype._fetchDatasource=function(e,t){var r=this,n=e.name,i=r._datasourceResolverFactory.getResolver(e);return i.loadData(t).then(function(e){return r.log.trace("Fetched datasource [%s]:\n%s",n,e),{name:n,data:e}})["catch"](function(e){return r.log.error("Datasource [%s] fetch failed.",n,e),{name:n,error:e}})},l.prototype._buildDatasourceContext=function(e,t){var r={itemRoot:t.baseURI};return a.merge({},this._opts,r,e)},l.prototype.fetchStartFile=function(e,t,r){throw new Error("PreprocessingRenderer#fetchStartFile must be overridden.")},l.prototype.preprocess=function(e,t,r,n){var i=e.content.type;if(t&&this.preprocessorMap.hasOwnProperty(i)){var o=this.preprocessorMap[i];return this.log.debug("Applying preprocessor for [%s] for [%s (%s)] ",o.name,e.content.src,i),o.process(e,t,r,n)}return t},l.prototype.process=function(e,t,r,n){throw new Error("PreprocessingRenderer#process must be overridden.")},l.prototype.postprocess=function(e,t){throw new Error("PreprocessingRenderer#postprocess must be overridden.")},l.prototype.invokeScripts=function(e,t){throw new Error("PreprocessingRenderer#invokeScripts must be overridden.")},l.prototype.addPreprocessor=function(e,t){if(this.preprocessorMap.hasOwnProperty(e)){var r=this.preprocessorMap[e].name;this.log.warn("Overriding a previously added preprocessor [%s] for the mime type [%s]",r,e)}t.name=t.name||"Anonymous preprocessor",this.log.debug("Adding the preprocessor [%s] for start files with the mime type [%s]",t.name,e),this.preprocessorMap[e]=t},t.exports=l},{"../util/deduping-fetch":78,"../util/fetch-file":80,"../util/logger-factory":83,"../util/util":84,"../util/verror":85,"./widget-renderer":42,"promise-extensions":145}],39:[function(e,t,r){"use strict";var n=e("promise-extensions")(Promise),i=e("../util/util"),o=e("../util/logger-factory"),a=e("./widget-renderer"),s=e("./config-reader"),c=e("./config-parser"),l=e("./widget-storage"),u=e("./widget-instance-factory"),p=e("./widget-feature-augmenter"),h=e("./config-aggregator"),f=e("../util/verror"),d="model.xml",g={POST_READ:"postRead",PRE_RENDER:"preRender",POST_RENDER:"postRender"},m={html:"text/html",hbs:"text/x-handlebars-template",handlebars:"text/x-handlebars-template","soy.js":"application/x-soy","hbs.js":"application/x-handlebars-template"},v=function(e){this.config=e,this.plugins=[],this.features=[],this.widgetInstanceFactory=new u,this.widgetFeatureAugmenter=new p,this.log=o.getLogger();var t=y(this.config);if(t.warnings.length&&this.log.debug(t.warnings.join("\n")),t.errors.length){var r="Problems with widget config:\n\t"+t.errors.join("\t\n");throw new f(r)}};v.prototype.start=function(){var e=(new Date).getTime(),t=this.log,r=this.config,o=this.plugins,s=this.features,c=r.initialModel||{},l=r.widgetPath,u=r.configFile||d;""===l&&(l=".");var p=this.widgetInstanceFactory,v=this.widgetFeatureAugmenter;t.info("Starting widget @ %s...",l),t.info("Entering READ phase.");var y=Promise.resolve({});return r.reader&&(y=y.then(function(){var e=(i.endsWith(l,"/")?l:l+"/")+u;return r.reader.read(e)})),r.parser&&(y=y.then(function(e){return r.parser.parse(e)})),n.all([c,y]).then(function(e){t.debug("Aggregating models...");var r=new h({log:t});return r.combine(e)}).then(function(e){return t.info("Invoking plugins for POST READ phase..."),b(o,t,g.POST_READ,[e])}).spread(function(e){e.content.type&&e.content.type!==m.html||(e.content.type=w(e),t.debug("The start file type was inferred as [%s]",e.content.type)),e.content.src=a.getResolvedStartFilePath(l,e),t.info("Widget config read for: %s (%s).",e.id,e.name),t.info("Entering INSTANCE CREATION phase...");var n=r.renderer,o=r.storage;e.id=e.id||i.randomId(),o.init(e.name,e.preferences,e.type),t.debug("Widget storage initialized.");var c=p.makeWidget(e,o,n,l);return t.debug("Widget instance created."),v.addFeaturesToWidget(c,s,e),t.debug("%s feature(s) added to widget.",s.length),[c,n,e]}).spread(function(e,r,n){t.info("Invoking plugins for PRE RENDER phase...");var i=b(o,t,g.PRE_RENDER,[e,r,n]);return i}).spread(function(e,r,n){t.info("Entering RENDERING phase...");var i=r.render(n,e);return[e,r,n,i]}).spread(function(e,r,n){t.info("Invoking plugins for POST RENDER phase...");var i=b(o,t,g.POST_RENDER,[e,r,n]);return i}).spread(function(r,n,i){var o={},a=(new Date).getTime();return o.time=a-e,o.id=i.id,o.message="Widget rendering for ["+i.name+"] completed in "+o.time+"ms.",o.areaNodes="function"==typeof n.getAreaNodes?n.getAreaNodes():null,t.info(o.message),o})["catch"](function(e){throw t.error(e),new f(e,"An error occurred whilst starting the widget.")})},v.prototype.addFeature=function(e){return this.log.info("Adding feature for widget, %s",e.name||"[Anonymous feature]"),"object"==typeof e&&this.features.push(e),this},v.prototype.addPlugin=function(e){return this.log.info("Adding plugin for widget, %s",e.name||"[Anonymous plugin]"),"object"==typeof e&&this.plugins.push(e),this},v.prototype.destroy=function(){this.plugins.forEach(function(e){"function"==typeof e.destroy&&e.destroy()}),this.config.renderer.destroy()};var y=function(e){var t={warnings:[],errors:[]};return"string"!=typeof e.widgetPath?t.errors.push("You must supply a valid widget path"):e.widgetPath.indexOf(d)>=0&&t.errors.push("Please supply the base path of your widget, not its configuration file path"),e.initialModel||e.reader||t.warnings.push("No initial model or widget reader was provided. Can't get any config"),e.reader&&!e.parser&&t.warnings.push("A widget reader was provided, but not a widget config parser"),!e.reader||e.reader instanceof s||t.warnings.push("The configured widget reader might not be a valid ConfigReader instance"),!e.parser||e.parser instanceof c||t.warnings.push("The configured widget parser might not be a valid ConfigParser instance"),e.storage?e.storage instanceof l||t.warnings.push("The configured widget storage might not be a valid WidgetStorage instance"):t.errors.push("No widget storage is configured"),e.renderer?e.renderer instanceof a||t.warnings.push("The configured widget renderer might not be a valid WidgetRenderer instance"):t.errors.push("No widget renderer is configured"),t},b=function(e,t,r,i){var o=n.all(i);return e.filter(function(e){return"function"==typeof e[r]}).forEach(function(e){var n,i=e.name||"Anonymous plugin";o=o.then(function(t){n=t;var i=e[r].apply(e,t);return[i,t]}).spread(function(e,t){return void 0===e?t:[e].concat(t.slice(1))})["catch"](function(e){var o="Failed to invoke plugin ["+i+"] for ["+r+"]";return t.error(e,o),n})}),o},w=function(e){var t=e.content.src.match(/\.([A-z0-9]+)$/);return t&&t[1]&&m[t[1]]||e.content.type};t.exports=v},{"../util/logger-factory":83,"../util/util":84,"../util/verror":85,"./config-aggregator":34,"./config-parser":35,"./config-reader":36,"./widget-feature-augmenter":40,"./widget-instance-factory":41,"./widget-renderer":42,"./widget-storage":43,"promise-extensions":145}],40:[function(e,t,r){"use strict";var n=function(){};n.prototype.addFeaturesToWidget=function(e,t,r){function n(e,t){return t.filter(function(t){return t.name===e})[0]||null}function i(e,t){return t.features.filter(function(t){return t.name===e})[0]||null}t=t||[],r.features=r.features||[],t.forEach(function(e){e.name&&!i(e.name,r)&&r.features.push({name:e.name,params:[],required:!1})});for(var o={},a=0;a<r.features.length;a++){var s=r.features[a],c=n(s.name,t);if(c)"function"==typeof c._init&&c._init(s.params,e,r),Object.defineProperty(o,c.name,{enumerable:!0,value:c});else if(s.required){var l="Unable to render widget. A required feature is not available ("+s.name+")";throw new Error(l)}}return Object.defineProperty(e,"features",{enumerable:!1,value:o}),e},t.exports=n},{}],41:[function(e,t,r){"use strict";var n=e("../util/util"),i=["author","version","id","authorEmail","authorHref","locale"],o=["description","name","shortName"],a=function(){};a.prototype.makeWidget=function(e,t,r,a){var s={},c=e.locale||null;return Object.defineProperty(s,"baseURI",{enumerable:!0,value:a}),i.forEach(function(t){Object.defineProperty(s,t,{enumerable:!0,value:"undefined"!=typeof e[t]?e[t]:""})}),o.forEach(function(t){var r=null;if(c&&e._lang){var i=n.getDescendantLocales(c),o=i.map(function(t){return e._lang[t]}),a=function(e){var r;if(e.length){var n=e.pop();if(n&&(r=n[t]),"string"!=typeof r)return a(e)}return r};r=a(o)}if("string"!=typeof r&&"string"==typeof e[t])r=e[t];else if("string"!=typeof r&&e.defaultlocale){var l=e._lang[e.defaultlocale];l&&(r=l[t])}Object.defineProperty(s,t,{enumerable:!0,value:"string"==typeof r?r:""})}),Object.defineProperty(s,"width",{enumerable:!0,get:function(){return r.getWidth()}}),Object.defineProperty(s,"height",{enumerable:!0,get:function(){return r.getHeight()}}),Object.defineProperty(s,"preferences",{enumerable:!1,value:t}),s},t.exports=a},{"../util/util":84}],42:[function(e,t,r){"use strict";function n(e,t){var r=i.isUrlAbsolute(t)||i.isUrlSiteRelative(e)&&i.isUrlSiteRelative(t)||e&&i.startsWith(t,e);if(r)return t;var n=!i.endsWith(e,"/")&&!i.startsWith(t,"/");return n?e+"/"+t:e+t}var i=e("../util/util"),o=function(e){};o.prototype.render=function(e,t){throw new Error("WidgetRenderer#render must be overridden.")},o.prototype.process=function(e,t,r){throw new Error("WidgetRenderer#process must be overridden.")},o.prototype.getWidth=function(){throw new Error("WidgetRenderer#getWidth must be overridden.")},o.prototype.getHeight=function(){throw new Error("WidgetRenderer#getHeight must be overridden.")},o.prototype.getWidgetNode=function(){throw new Error("WidgetRenderer#getWidgetNode must be overridden.")},o.prototype.getParentNode=function(){throw new Error("WidgetRenderer#getContainerNode must be overridden.")},o.prototype.setParentNode=function(){throw new Error("WidgetRenderer#setContainerNode must be overridden.")},o.prototype.getAreaNodes=function(){if(this.isContainer)throw new Error("WidgetRenderer#getAreaNodes must be overridden.")},o.prototype.destroy=function(){throw new Error("WidgetRenderer#destroy must be overriden.")},o.prototype.isRendered=function(){throw new Error("WidgetRenderer#isRendered must be overridden.")},o.prototype.getType=function(){return"text/html"},o.getResolvedStartFilePath=function(e,t){var r=t.content&&t.content.src?t.content.src:"index.html";return n(e,r)},t.exports=o},{"../util/util":84}],43:[function(e,t,r){"use strict";function n(e){}n.prototype.init=function(e,t){throw new Error("WidgetStorage#init must be overridden.")},n.prototype.getItem=function(e){throw new Error("WidgetStorage#getItem must be overridden.")},n.prototype.setItem=function(e,t,r){throw new Error("WidgetStorage#setItem must be overridden.")},n.prototype.removeItem=function(e){throw new Error("WidgetStorage#removeItem must be overridden.")},n.prototype.clear=function(e){throw new Error("WidgetStorage#removeItem must be overridden.")},n.prototype.key=function(e){throw new Error("WidgetStorage#key must be overridden.")},t.exports=n},{}],44:[function(e,t,r){"use strict";function n(){this._resolvers=[]}t.exports=n,n.prototype.addResolver=function(e){if("function"!=typeof e)throw new TypeError("resolverFunc argument must be a function");this._resolvers.push(e)},n.prototype.getResolver=function(e){var t=this._resolvers.map(function(t){return t(e)}).filter(function(e){return!!e}),r=t.length;if(0===r)throw new Error("No datasource resolver found which can handle ["+e.uri+"] URI");return t[r-1]}},{}],45:[function(e,t,r){(function(e){"use strict";function r(e,t){return t?t.replace(l,function(t,r){var i=n(e,r);return void 0===i||null===i?"":i}):""}function n(e,t){for(var r="string"==typeof t?t.split("."):t,n=0,i=e,o=r.length;null!=i&&n<o;)i=i[r[n++]];return n&&n===o?i:void 0}function i(t){var r=t;try{r=e.decodeURIComponent(t)}catch(n){}return e.encodeURIComponent(r)}function o(e){return e.trim().replace(u,"")}function a(e,t){var n=t||{},i=n.value;return{name:r(e,n.name),value:"string"==typeof i?r(e,i):i}}function s(e){return(e||[]).map(function(e){return i(e.name)+"="+i(e.value)}).join("&")}function c(e,t){var r=(t||[]).map(function(t){return a(e,t)}).filter(function(e){return!!e.name});return s(r)}var l=/\$\{([^}\s]+)}/g,u=/^\/+|\/+$/g;t.exports={resolveExpression:r,resolveParameter:a,buildQueryString:s,resolveQueryString:c,encodeURIComponent:i,trimSlashes:o}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],46:[function(e,t,r){"use strict";function n(e,t){var r=t&&t.uri;return r&&r.slice(0,e.length).toLowerCase()===e}function i(e){this._resolverImpl=e;var t=o.getLogger();this._log=t.child({childName:"datasource-resolver"})}var o=e("../util/logger-factory"),a=e("../util/deduping-fetch");t.exports=i,i.prototype.loadData=function(e){var t=this._resolverImpl,r=t.resolveUrl(e);return a(r).then(function(e){return!e.status||e.status>=200&&e.status<300?Promise.resolve(e):Promise.reject(new Error(e.statusText))}).then(function(r){return t.processResponse(r,e)})},i.createFactoryFunction=function(e,t){var r=this._log,o="function"==typeof e?e:n.bind(null,e);return function(e){if(o(e)){var n=new t(e,r);return new i(n)}}}},{"../util/deduping-fetch":78,"../util/logger-factory":83}],47:[function(e,t,r){(function(r){"use strict";var n=e("./core/widget-engine"),i=e("./strategies/parser/auto-config-parser"),o=e("./strategies/reader/fetch-widget-reader"),a=e("./strategies/renderer/html5-seamless-renderer"),s=e("./strategies/storage/html5-local-storage"),c=e("./strategies/renderer/preprocessors/handlebars-preprocessor"),l=e("./strategies/renderer/preprocessors/soy-preprocessor"),u=e("./datasource/datasource-resolver-factory"),p=e("./strategies/datasource/resource-datasource-resolver"),h=e("./strategies/datasource/http-datasource-resolver"),f=e("./plugins/cxp-additions-plugin"),d=e("./plugins/replace-config-vars-plugin"),g=e("./plugins/backbase-format-plugin"),m=e("./util/logger-factory"),v=e("./util/util"),y=null,b=function(e){return y||(y=new c(e))},w=null,x=function(e){return w||(w=new l(e))},_=function(e){e=e||{},m.createLogger({parentLog:e.log,loggerName:"widget",logLevel:e.logLevel,appendId:!0})};_.prototype.init=function(e){e=e||{};var t=e.widgetPath,c=e.widgetEl,l=this.configVars=e.configVars||{},g=e.reader||(e.initialModel?null:new o),m=e.parser||new i,y=e.storage||new s,w=e.renderer;if(!w){var _=new u;_.addResolver(p.getInstance),_.addResolver(h.getInstance),this._datasourceResolverFactory=_,w=new a(c,_,{configVars:l})}var E;if("string"!=typeof t?E="You must provide a widget path":c||(E="You must provide a widget parent node"),E)throw new Error(E);var k=b(l);w.addPreprocessor("text/x-handlebars-template",k),w.addPreprocessor("application/x-handlebars-template",k);var S=x(l);w.addPreprocessor("application/x-soy",S),this.widgetEngine=new n({configFile:e.configFile,widgetPath:t,parser:m,reader:g,renderer:w,storage:y,initialModel:e.initialModel}),this.widgetEngine.addPlugin(new f),this.widgetEngine.addPlugin(new d({contextRoot:l.contextRoot,remoteContextRoot:l.remoteContextRoot||l.contextRoot,apiRoot:l.apiRoot,itemRoot:l.itemRoot||""},{full:!!l.fullConfigReplacement})),this.widgetEngine.addPlugin({name:"Angular JS",postRender:function(e,t){var n=r.angular;if(n){var i=t.getWidgetNode(),o=i.getAttribute("widget-ng-app")||i.getAttribute("data-widget-ng-app");if(o){var a=i.getAttribute("ng-strict-di")||i.getAttribute("data-ng-strict-di");n.element(document).ready(function(){n.module(o).value("widget",e),n.bootstrap(e.body,[o],{strictDi:v.parseBoolean(a)})})}}return e}})},_.prototype.enableCompatibility=function(){var e=this.configVars||{},t={apiRoot:e.apiRoot||"",contextRoot:e.contextRoot||"",remoteContextRoot:e.remoteContextRoot||""},r=e.csrfToken;r&&(t.csrfToken=r),this.widgetEngine.addPlugin(new g(t))},_.prototype.start=function(){return this.widgetEngine.start()},_.prototype.addPlugin=function(e){return this.widgetEngine.addPlugin(e),this},_.prototype.addFeature=function(e){return this.widgetEngine.addFeature(e),this},_.prototype.getLogger=function(){return this.log},_.prototype.destroy=function(){return this.widgetEngine.destroy()},_.prototype.addDatasourceResolver=function(e){if(this._datasourceResolverFactory)return this._datasourceResolverFactory.addResolver(e),this;throw new Error("This method cannot be called when custom renderer is provided")},t.exports=_}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./core/widget-engine":39,"./datasource/datasource-resolver-factory":44,"./plugins/backbase-format-plugin":48,"./plugins/cxp-additions-plugin":55,"./plugins/replace-config-vars-plugin":56,"./strategies/datasource/http-datasource-resolver":57,"./strategies/datasource/resource-datasource-resolver":58,"./strategies/parser/auto-config-parser":59,"./strategies/reader/fetch-widget-reader":69,"./strategies/renderer/html5-seamless-renderer":70,"./strategies/renderer/preprocessors/handlebars-preprocessor":71,"./strategies/renderer/preprocessors/soy-preprocessor":72,"./strategies/storage/html5-local-storage":75,"./util/logger-factory":83,"./util/util":84}],48:[function(e,t,r){"use strict";function n(e){e=e||{},this.opts=e,this.name="Backbase Format",this.portalConf=e.portalConf||{},this.window="undefined"==typeof window?e.window:window,this.log=o.getLogger(),this.opts.log=this.log}function i(e){for(var t=e;t;){if("function"==typeof t.hasAttribute&&t.hasAttribute("data-chrome"))return t;t=t.parentNode}return null}var o=e("../util/logger-factory"),a=e("../util/util"),s=e("promise-extensions")(),c=e("./backbase-format/widget-handlers"),l=e("./backbase-format/legacy-widget-api"),u=e("./backbase-format/include-object"),p=Array.prototype.slice.call.bind(Array.prototype.slice);t.exports=n,n.prototype.postRead=function(e){return e.preferences.viewNamespace&&e.content.config&&!e.content.src&&(e.content.type="application/x-soy",e.content.src=e.content.config),e},n.prototype.preRender=function(e,t,r){this.log.info("Backbase format plugin is running in PRE RENDER phase..."),e.preferences.getItem("src")||e.preferences.defineItem({name:"src",value:r.content.src,readonly:!1}),e.preferences.getItem("thumbnailUrl")||e.preferences.defineItem({name:"thumbnailUrl",value:r.icons[0],readonly:!1}),e.preferences.getItem("title")||e.preferences.defineItem({name:"title",value:r.title,readonly:!1});var n=l.buildWidget(e,r,this.log,this.portalConf.tags),i=n.preferences.eventTarget?n.preferences.eventTarget.indexOf(e):-1;return i>-1&&(n.preferences.eventTarget[i]=n),this.log.info("Backbase format plugin PRE RENDER done."),n},n.prototype.postRender=function(e,t,r){var n,o=this,h=this.log,f=this.window;h.info("Backbase format plugin is running in POST RENDER phase..."),l.applyPresentationApi(e,t,r,h);var d=p(e.body.getElementsByTagName("g:include")),g=d.filter(function(t){return a.ensureElementBelongsToItem(e.name,t)}).map(function(t){return new u(t,e,r,o.opts)});return g.length?(e.includes=g,e.refreshIncludes=function(){var e=this.includes.map(function(e){return e.refresh()});return s.settleAll(e).then(function(e){var t=e.filter(function(e){return e.isRejected()}).length;t>0&&h.warn("%s includes failed to resolve.",t)})},g.forEach(function(e,t){var r=d[t];r.parentNode.replaceChild(e.htmlNode,r)}),n=e.refreshIncludes()):n=s.resolve(),n.then(function(){var t=i(e.body)||e.body;return c.handleLoad(f,e,h),c.handlePrefModified(f,e,h),c.handleMaximize(f,e,t,h),c.handleRestore(f,e,t,h),h.info("Backbase format plugin POST RENDER done."),e})}},{"../util/logger-factory":83,"../util/util":84,"./backbase-format/include-object":50,"./backbase-format/legacy-widget-api":52,"./backbase-format/widget-handlers":54,"promise-extensions":145}],49:[function(e,t,r){"use strict";function n(e,t){var r=e.replace(/\/[^\/]+$/,"");r=r.replace(/\$\(contextRoot\)/,t);var n=s.isUrlAbsolute(e)?e:r+"/"+e;return n.substring(0,n.lastIndexOf("/")+1)}function i(e,t){if("undefined"!=typeof DOMParser){var r=new DOMParser,n=r.parseFromString(e,"text/html"),i=c(n.getElementsByTagName("img"));return i.forEach(function(e){var r=e.getAttribute("src");r&&s.isUrlSiteRelative(r)&&(r=new URL(r,t).href,e.setAttribute("src",r))}),n.body.innerHTML}return e}function o(e,t){function r(e,t){return t=t[e.shift()],e.length>0&&t&&"object"==typeof t?r(e,t):t}var n=e.split(".");return r(n,t)}function a(e){return void 0===e||null===e||""===e}var s=e("../../util/util"),c=Array.prototype.slice.call.bind(Array.prototype.slice);t.exports={getStartFileFolder:n,makeReferenceAbsolute:i,resolveExpression:o,isEmpty:a,convertToArray:c}},{"../../util/util":84}],50:[function(e,t,r){(function(r){"use strict";function n(e,t,n,i){i=i||{};var o=i.contextRoot||"",c=i.remoteContextRoot||"",l="true"===e.getAttribute("local"),u={replaceRegex:/\$\{([a-zA-Z0-9-_.]+)\}/g,log:i.log,startFileFolder:a.getStartFileFolder(n.content.src,o),contextRoot:l||!c?o:c,csrfToken:i.csrfToken};Object.defineProperty(this,"_config",{value:u}),this.widget=t,this.uri={template:e.getAttribute("src")},this.proxy="true"===e.getAttribute("proxy"),this.method=e.getAttribute("method")||"GET";var p=r.document.createElement("div");p.className="bp-g-include",this.htmlNode=p;var h=new s(n,i);this.params=h.buildParameters(this,e)}var i=e("../../util/util"),o=e("browser-bunyan"),a=e("./include-helpers"),s=e("./include-param-builder"),c=e("../../util/deduping-fetch"),l=r.FormData;t.exports=n,n.prototype.setURI=function(e){e&&"string"==typeof e&&(this.uri.template=e)},n.prototype.getContentURI=function(){var e=this.uri.template;if(!e)return"";var t=this._config,r=this;return e=e.replace(t.replaceRegex,function(e,t){return r.widget.getPreference(t)}),e=e.replace("$(contextRoot)",t.contextRoot),i.isUrlDocumentRelative(e)&&(e=t.startFileFolder+e,t.log.debug("g:include src after resolution is [%s]",e)),e},n.prototype.refresh=function(){var e=this._config,t=e.log,r=this._getRequestParams(),n=this._resolveRequestUrl(r),s=this._getRequestOptions(r);if(t.level()<=o.DEBUG){var l=JSON.stringify(s,null,"\t");t.debug("Making g:include http request to [%s] with fetch opts: [%s]",n,l)}return c(n,s).then(function(e){return t.debug("g:include request to [%s] completed with status: %s",n,e.status),e.status>=200&&e.status<300?Promise.resolve(e.text()):Promise.reject(e.statusText)})["catch"](function(e){return"Unable to resolve g:include ( "+e+" )"}).then(function(r){return t.trace("Received html response:\n%s",r),i.isRunningOnFilesystem()&&i.isUrlAbsolute(e.contextRoot)&&(r=a.makeReferenceAbsolute(r,e.contextRoot)),this.htmlNode.innerHTML=r,this.htmlNode.setAttribute("data-src",n),this.htmlNode}.bind(this))},n.prototype._getRequestParams=function(){var e=[];if(this.proxy){e=this.params.filter(function(e){return"proxy"===e.destination});var t=this.getContentURI();if(t){var r=this.params.filter(function(e){return"target"===e.destination}).map(function(e){return e.toQueryString()}).filter(function(e){return!!e}).join("&"),n={name:"url",getQueryParams:function(){return[{name:this.name,value:t+(t.indexOf("?")!==-1?"&":"?")+r}]},toQueryString:function(){var e=this.getQueryParams()[0];return e.name+"="+encodeURIComponent(e.value)}};e.push(n)}}else e=this.params.filter(function(e){return"target"===e.destination});return e},n.prototype._resolveRequestUrl=function(e){var t=this.proxy?this._config.contextRoot+"/proxy":this.getContentURI();if(this.method&&"POST"!==this.method.toUpperCase()){var r=e.map(function(e){return e.toQueryString()}).join("&");t+=(t.indexOf("?")>=0?"&":"?")+r}return t},n.prototype._getRequestOptions=function(e){var t=this._config,r={};if(this.method&&"POST"===this.method.toUpperCase()){r.method=this.method,r.headers={},r.body=this._constructFormData(e);var n=t.csrfToken;n&&(r.headers[n.name]=n.value)}return r},n.prototype._constructFormData=function(e){var t=new l;return e.reduce(function(e,t){return e.concat(t.getQueryParams())},[]).forEach(function(e){t.append(e.name,e.value)}),t},["getContentIterator","hasContent","setContent"].forEach(function(e){n.prototype[e]=function(){this._config.log.warn("%s method is no longer supported in CXP6",e)}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../util/deduping-fetch":78,"../../util/util":84,"./include-helpers":49,"./include-param-builder":51,"browser-bunyan":86}],51:[function(e,t,r){"use strict";function n(e,t){this._widgetModel=e,this._log=t.log,this._remoteContextRoot=t.remoteContextRoot||"",this._contextRoot=t.contextRoot||"",this._apiRoot=t.apiRoot||"",this._paramFactoryMap={"g:http-param":this._buildHttpParam,"g:http-proxy-param":this._buildHttpProxyParam,"g:http-preference-param":this._buildPreferenceParam,"g:http-preference-param-map":this._buildPreferenceParamMap}}function i(e,t,r,n){this.name={template:e.getAttribute("name")},this.value={template:e.getAttribute("value")},this.destination=n||"target",this.method=(e.getAttribute("method")||t.method||"GET").toUpperCase(),Object.defineProperty(this,"_include",{value:t}),Object.defineProperty(this,"_log",{value:r})}function o(e,t,r,n){i.call(this,e,t,r);var o=e.getAttribute("dataType")||e.getAttribute("datatype");Object.defineProperty(this,"_typeName",{value:o});var a=n.preferences||{},s=Object.keys(a).filter(function(e){return a[e].type===o});Object.defineProperty(this,"_prefs",{value:s})}function a(e,t,r){i.call(this,e,t,r)}function s(e,t,r,n,o,a){var s=n?"proxy":"target";i.call(this,e,t,r,s),Object.defineProperty(this,"_replaceRegex",{value:/\$\{([a-zA-Z0-9-_]+)\}/}),Object.defineProperty(this,"_contextRoot",{value:o}),Object.defineProperty(this,"_apiRoot",{value:a})}var c=e("./include-helpers");t.exports=n,n.prototype.buildParameters=function(e,t){var r=this,n=this._flattenElementTree(t).filter(function(e){var t=e.nodeName.toLowerCase();return t in r._paramFactoryMap}).map(function(t){var n=t.nodeName.toLowerCase(),i=r._paramFactoryMap[n];return i.call(r,t,e)}).filter(function(e){return!!e});return n.forEach(function(e){["getName","getValues"].forEach(function(t){e[t]=function(){this._log.warn("%s method is no longer supported in CXP6",t)}})}),n},n.prototype._flattenElementTree=function(e){for(var t=[],r=e.firstChild;r;)1===r.nodeType&&t.push(r),r=r.hasChildNodes()?r.firstChild:r.nextSibling;return t},n.prototype._buildHttpParam=function(e,t,r){var n=this._remoteContextRoot||this._contextRoot,i=new s(e,t,this._log,r,n,this._apiRoot);return i.value.template?i:null},n.prototype._buildHttpProxyParam=function(e,t){return this._buildHttpParam(e,t,!0)},n.prototype._buildPreferenceParam=function(e,t){var r=new a(e,t,this._log);return r.name.template?r:null},n.prototype._buildPreferenceParamMap=function(e,t){var r=new o(e,t,this._log,this._widgetModel);return r._typeName?r:null},i.prototype.getQueryParams=function(){return[]},i.prototype.toQueryString=function(){return this.getQueryParams().map(function(e){return e.name+"="+encodeURIComponent(e.value)}).join("&")},o.prototype=Object.create(i.prototype),o.prototype.getQueryParams=function(){var e=this._typeName,t=this;return this._prefs.map(function(r){return{name:e+"."+r,value:t._include.widget.getPreference(r)}})},a.prototype=Object.create(i.prototype),a.prototype.getQueryParams=function(){var e=this.name?this.name.template:null;if(c.isEmpty(e))return[];var t=this._include.widget.getPreference(e);return c.isEmpty(t)&&this._log.warn("Failed to resolve g:include parameter value. Parameter - [%s]",e),[{name:e,value:t}]},s.prototype=Object.create(i.prototype),s.prototype.getQueryParams=function(){var e=this.name?this.name.template:null,t=this.value?this.value.template:null,r=t,n=this._include.widget,i=this._contextRoot,o=this._apiRoot;if(c.isEmpty(e)||c.isEmpty(t))return[];if(t=t.replace(this._replaceRegex,function(e,t){return"contextRoot"===t?i:"apiRoot"===t?o:n.getPreference(t)}),0===t.indexOf("__WIDGET__")){var a=t.split(".").filter(function(e,t){return 0!==t}).join(".");t=c.resolveExpression(a,n),c.isEmpty(t)&&this._log.warn("Failed to resolve g:include parameter value. Parameter - [%s], unresolved value - [%s], resolved value - [%s]",e,r,t)}return[{name:e,value:t}]}},{"./include-helpers":49}],52:[function(e,t,r){(function(r,n){"use strict";function i(e,t,r,n){var i="backbaseWidget",o=u.cloneDeep(e);return o.width=e.width,o.height=e.height,o.preferences=e.preferences,o.features=e.features,o.id=t.id||Math.random().toString(36).substr(2,5),o.name=t.name,o.nodeType=1,o.nodeValue=i,o.margins={top:0,right:0,bottom:0,left:0},Object.getOwnPropertyNames(e).forEach(function(t){u.startsWith(t,"@@")&&(o[t]=e[t])}),o.myDefinition={sUrl:t.content.src},o.nodeName=i,o.tagName=i,o.tags=Array.isArray(n)?n:[],o.model=a(o,t),h(o,r),s(o),o.addEventListener&&o.dispatchEvent&&o.addEventListener("storage",function(e){r.debug("Chaining StorageEvent to Backbase 'PrefModified' event...");var t="PrefModified",n=new f(t);n.initStorageEvent(t,!1,!1,e.key,e.oldValue,e.newValue,e.url,o.preferences),n.attrName=e.key,n.prevValue=e.oldValue,o.model.dispatchEvent(n)}),o}function o(e,t,r,i){var o=e.body||t.getWidgetNode(),a=o.getAttribute("g:onload");if(a){
var s=n.document.createElement("div"),c=o.parentNode,u=o.nextSibling;s.appendChild(o),s.className="bp-widget-body",u?c.insertBefore(s,u):c.appendChild(s),e.body=s}e.htmlNode=l(o),e.refreshHtml=function(){var e=this.features&&this.features.cxp;e?e.render.rerenderItem(r.id,r.name,r):i.warn('A widget is required to have "CXP" feature in order to be able to refresh its view.')}}function a(e,t){var i={jxid:"VIEW-"+t.name,localName:"Widget",name:t.name,tag:"widget",tagName:"Widget",contextItemName:e.features&&e.features.cxp&&e.features.cxp.config?e.features.cxp.config.get("portalName"):null,extendedItemName:t.extendedItemName||null,parentItemName:t.parentItemName||null,securityProfile:t.securityProfile||null,uuid:t.id||null,preferences:c(e.preferences),tags:Array.isArray(t.tags)?t.tags:[],addEventListener:p.addEventListener,removeEventListener:p.removeEventListener,dispatchEvent:p.dispatchEvent};return i.save=function(e){var t=this;r.nextTick(function(){if("function"==typeof e){var r={contextItemName:t.contextItemName,name:t.name,preferences:t.preferences,tag:t.tag},i={status:204,statusText:"No Content",readyState:4};e.call(n,r,i)}})},i.getPreference=function(t){return e.preferences.getItem(t)},i.setPreference=function(t,r){e.preferences.setItem(t,r)},i}function s(e){e.getPreference=function(e){return this.preferences.getItem(e)},e.getPreferenceFromParents=e.getPreference,e.getAreaPreference=function(){return this.preferences.getItem("area")||0},e.getOrderPreference=function(){return this.preferences.getItem("order")},e.setPreference=function(e,t){this.preferences.setItem(e,t)},e.getDefinition=function(){return e.myDefinition},e.setAreaPreference=function(e){this.preferences.setItem("area",e)},e.setOrderPreference=function(e){this.preferences.setItem("order",e)}}function c(e){return e._items}function l(e){for(var t=e;t;){if("function"==typeof t.hasAttribute&&t.hasAttribute("data-chrome"))return t;t=t.parentNode}return null}var u=e("../../util/util"),p=e("../../util/event-target"),h=e("./warn-deprecated-access"),f=e("../../strategies/storage/storage-event");t.exports={buildWidget:i,applyPresentationApi:o}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../strategies/storage/storage-event":76,"../../util/event-target":79,"../../util/util":84,"./warn-deprecated-access":53,_process:2}],53:[function(e,t,r){"use strict";function n(e,t,r){return function(){var n="COMPATIBILITY: %s is a widget %s that is no longer supported in CXP6";e.warn(n,t,r?"method":"property")}}function i(e,t){var r=o.reduce(function(e,r){return e[r]={enumerable:!0,get:n(t,r),set:n(t,r)},e},{});return Object.defineProperties(e,r),a.reduce(function(e,r){return e[r]=n(t,r,!0),e},e),e}t.exports=i;var o=["attributes","childNodes","cls_custom","cnBase","firstChild","flex","htmlArea","htmlDoc","htmlFoot","htmlHead","lastChild","layout","local_listeners","localName","namespaceURI","nextSibling","node","ownerDocument","parentNode","perspective","prefix","previousSiblings"],a=["appendChild","cloneNode","createDisplay","createPerspective","destroy","disableDesignMode","dragIsTarget","enableDesignMode","getAreaOrderedChildren","getAttribute","getAttributeNS","getClassID","getCurrentPerspective","getDisplay","getDisplayEventTarget","getDisplayModel","getElementsByTagName","getElementsByTagNameNS","getHTMLArea","hasAttribute","hasAttributeNS","hasAttributes","hasChildNodes","hideDesignTools","hideDragTargets","insertBefore","insertDisplayChild","loadChildren","lookupNamespaceURI","refreshIncludes","removeAttribute","removeAttributeNS","removeChild","renderDisplay","replaceChild","setAttribute","setAttributeNS","setCurrentPerspective","showDesignTools","showDragTargets","template"]},{}],54:[function(e,t,r){"use strict";function n(e,t,r){var n="onload",i=s(n,t.body,t.name);i&&c(e,t.id,i,n,r)}function i(e,t,r){var n="onPrefModified",i=s(n,t.body,t.name);i&&t.model.addEventListener("PrefModified",function(){c(e,t.id,i,n,r)})}function o(e,t,r,n){var i="onmaximize",o=s(i,t.body,t.name);o&&r.addEventListener("click",function(r){"maximized"===r.target.getAttribute("data-cxp-viewmode")&&c(e,t.id,o,i,n)})}function a(e,t,r,n){var i="onrestore",o=s(i,t.body,t.name);o&&r.addEventListener("click",function(r){"windowed"===r.target.getAttribute("data-cxp-viewmode")&&c(e,t.id,o,i,n)})}function s(e,t,r){var n=t.querySelector("div[g\\:"+e+"]");return n&&l.ensureElementBelongsToItem(r,n)?n.getAttribute("g:"+e):null}function c(e,t,r,n,i){try{i.debug("Executing g:%s script...",n);var o=e.cxp._widgets?"window.cxp._widgets['"+t+"']":"window.widget",a=r.replace(/(__WIDGET__|__GADGET__)/,o);e.eval("(function() {"+a+"})()")}catch(s){var c=/is not defined$/.test(s.message)?"This maybe because in CXP6 functions in start files must be explicitly declared on the global scope":"";i.warn("g:%s failed! %s",n,c),i.error(s)}}var l=e("../../util/util");t.exports={handleLoad:n,handleMaximize:o,handleRestore:a,handlePrefModified:i}},{"../../util/util":84}],55:[function(e,t,r){"use strict";var n=e("../util/event-target"),i=function(){this.name="CXP Additions Plugin"};i.prototype.postRead=function(e){var t=e.preferences;return Array.isArray(t)&&(e.preferences=t.reduce(function(e,t){return e[t.name]=t,e},{})),e},i.prototype.preRender=function(e){e.addEventListener=n.addEventListener,e.removeEventListener=n.removeEventListener,e.dispatchEvent=n.dispatchEvent;var t=e.preferences.eventTarget=e.preferences.eventTarget||[];return t.indexOf(e)===-1&&t.push(e),e},t.exports=i},{"../util/event-target":79}],56:[function(e,t,r){"use strict";var n=e("../util/logger-factory"),i=e("browser-bunyan"),o=function(e,t){t=t||{},this.name="Replace Config Vars",this.varMap=e,this.full=!!t.full,this.interpolateStartRegex=t.interpolateStartRegex||"\\$\\(",this.interpolateEndRegex=t.interpolateEndRegex||"\\)",this.log=n.getLogger()};o.prototype.postRead=function(e){var t=this,r=this.log;r.info("Replace config vars plugin is running is POST READ phase...");var n=this._getExcludeObjects(e);if(n.length&&n.forEach(function(e){e.value=e.value.replace("contextRoot","__contextRoot__")}),t.full)r.debug("Doing full config vars replacement..."),t._traverse(e);else{r.debug("Doing minimal config vars replacement..."),e.content&&e.content.src&&(e.content.src=t._replaceVars("src",e.content.src)),e.content&&e.content.config&&(e.content.config=t._replaceVars("config",e.content.config)),e.icons&&e.icons.forEach(function(e,r,n){n[r]=t._replaceVars("icons["+r+"]",e)});var i=e.preferences.messages;if(i&&(i.value=t._replaceVars("messages",i.value)),e.datasources&&t._traverse(e.datasources),e.altContent){var o=Object.keys(e.altContent);o.forEach(function(r){var n=e.altContent[r];n.src=t._replaceVars("src."+r,n.src)})}}return n.length&&n.forEach(function(e){e.value=e.value.replace("__contextRoot__","contextRoot")}),r.info("Replace config vars plugin in POST READ is DONE."),e},o.prototype._traverse=function(e){Object.keys(e).forEach(function(t){e[t]=this._replaceVars(t,e[t]),e[t]&&"object"==typeof e[t]&&this._traverse(e[t])},this)},o.prototype._getExcludeObjects=function(e){var t=e.datasources||{},r=Object.keys(t).map(function(e){return t[e]}).reduce(function(e,t){return e.concat(t.params)},[]).filter(function(e){return"template"===e.name&&"string"==typeof e.value}),n=e.preferences||{},i=Object.keys(n).map(function(e){return n[e]}).filter(function(e){return"templateUrl"===e.name&&"string"==typeof e.value});return r.concat(i)},o.prototype._replaceVars=function(e,t){if("string"!=typeof t)return t;var r=this,n=r.log,o=r.varMap,a=Object.keys(o);return a.forEach(function(a){var s=new RegExp(r.interpolateStartRegex+a+r.interpolateEndRegex,"g");n.level()<=i.DEBUG&&s.test(t)&&n.debug("Replacing occurences of [%s] with [%s] where [%s=%s]",s,o[a],e,t),t=t.replace(s,o[a])}),t},t.exports=o},{"../util/logger-factory":83,"browser-bunyan":86}],57:[function(e,t,r){"use strict";function n(e){var t=e&&e.uri;return t&&l.test(t)}function i(e){this._datasource=e}var o=e("../../datasource/datasource-resolver"),a=e("../../datasource/datasource-resolver-helpers"),s=e("../../util/util"),c=e("sanitizer"),l=/^https?:/i;t.exports=i,i.prototype.resolveUrl=function(e){var t=a.resolveQueryString(e,this._datasource.params),r=a.resolveExpression(e,this._datasource.uri);return t&&(r+="?"+t),r},i.prototype.processResponse=function(e){return s.getContentBodyAndTypeFromResponse(e).then(function(e){return"html"===e.type?c.sanitize(e.body):e.body})},i.getInstance=o.createFactoryFunction(n,i)},{"../../datasource/datasource-resolver":46,"../../datasource/datasource-resolver-helpers":45,"../../util/util":84,sanitizer:33}],58:[function(e,t,r){"use strict";function n(e){this._datasource=e,this._sanitizeParamName="sanitize"}var i=e("../../datasource/datasource-resolver"),o=e("../../datasource/datasource-resolver-helpers"),a=e("../../util/util"),s=e("sanitizer");t.exports=n,n.prototype.resolveUrl=function(e){var t=this._datasource.uri,r=this._sanitizeParamName,n=e.apiRoot||"",i=e.itemRoot||"",s=t.split(":");if(2!==s.length)throw new Error("Invalid resource datasource uri: ",t);var c,l=(this._datasource.params||[]).filter(function(e){return e.name!==r}),u=o.resolveQueryString(e,l),p=o.resolveExpression(e,s[1]);return c=a.isUrlDocumentRelative(p)?i+"/"+p:n+"/portal"+p,u&&(c+="?"+u),c},n.prototype.processResponse=function(e){var t=this._datasource.params||[],r=this._sanitizeParamName;return a.getContentBodyAndTypeFromResponse(e).then(function(e){var n;return n="html"!==e.type||t.some(function(e){return e.name===r&&"false"===e.value}),n?e.body:s.sanitize(e.body)})},n.getInstance=i.createFactoryFunction("resource",n)},{"../../datasource/datasource-resolver":46,"../../datasource/datasource-resolver-helpers":45,"../../util/util":84,sanitizer:33}],59:[function(e,t,r){"use strict";var n=e("../../core/config-parser"),i=e("../../util/verror"),o=e("../../util/logger-factory"),a={json:{parser:e("./commonjs-package-config-parser"),testFn:function(e){return"string"==typeof e&&0===e.trim().indexOf("{")}},backbaseXml:{parser:e("./backbase-dom-config-parser"),testFn:function(e){return"string"==typeof e&&e.trim().indexOf("<catalog")>=0}},jsObject:{parser:e("./js-object-parser"),testFn:function(e){return"object"==typeof e}}},s=function(){this.log=o.getLogger(),this.parserMap=a};s.prototype=Object.create(n.prototype),s.prototype.parse=function(e){var t=null;for(var r in this.parserMap)if(this.parserMap.hasOwnProperty(r)){var n=this.parserMap[r];if(n.testFn(e)){this.log.debug("Parsing widget config as: %s",r),t=n.parser;break}}if(null===t)throw new i("Could not determine the config parser to use");var o=new t;return o.parse(e)},s.prototype.addParserStrategy=function(e,t,r){this.parserMap[e]={parser:t,testFn:r}},t.exports=s},{"../../core/config-parser":35,"../../util/logger-factory":83,"../../util/verror":85,"./backbase-dom-config-parser":60,"./commonjs-package-config-parser":61,"./js-object-parser":62}],60:[function(e,t,r){"use strict";var n=e("../../core/config-parser"),i=e("./xml/widget"),o=e("./xml/helpers"),a=function(){};a.prototype=Object.create(n.prototype),a.prototype.parse=function(e){try{var t=new DOMParser,r=t.parseFromString(e,"application/xml"),n=r.documentElement,a="catalog"===n.tagName?o.getChildElements(n)[0]:n;return Promise.resolve(i(a))}catch(s){return Promise.reject(s)}},t.exports=a},{"../../core/config-parser":35,"./xml/helpers":65,"./xml/widget":68}],61:[function(e,t,r){"use strict";var n=e("../../core/config-parser"),i=e("../../util/util"),o=function(){};o.prototype=Object.create(n.prototype),o.prototype.parse=function(t){try{var r=JSON.parse(t),n=i.cloneDeep(e("../../core/default-widget-model"));return n.id=r.name||n.id,n.version=r.version||n.version,n.description=r.description||n.description,n._lang=r.locales||n._lang,Array.isArray(r.contributors)&&r.contributors.length>0&&(n.author=r.contributors[0].name||n.author,n.authorEmail=r.contributors[0].email||n.authorEmail,n.authorHref=r.contributors[0].web||n.authorHref),Array.isArray(r.licenses)&&r.licenses.length>0?(n.license=r.licenses[0].type||n.license,n.licenseHref=r.contributors[0].url||n.licenseHref):"string"==typeof n.license&&(n.license=r.license),n.defaultlocale=r.defaultlocale||n.defaultlocale,n.width=r.width||n.width,n.height=r.height||n.height,n.viewmodes=r.viewmodes||n.viewmodes,n.name=r.fullName||n.name,n.shortName=r.shortName||n.shortName,n.preferences=r.preferences||n.preferences,n.features=r.features||n.features,n.icons=r.icons||n.icons,n.content=r.content||n.content,Promise.resolve(n)}catch(o){return Promise.reject(o)}},t.exports=o},{"../../core/config-parser":35,"../../core/default-widget-model":37,"../../util/util":84}],62:[function(e,t,r){"use strict";var n=e("../../core/config-parser"),i=function(){};i.prototype=Object.create(n.prototype),i.prototype.parse=function(e){return e},t.exports=i},{"../../core/config-parser":35}],63:[function(e,t,r){"use strict";function n(e){var t=[];return s.pushIfExists(t,e.thumbnailUrl),s.pushIfExists(t,e.icon),t}function i(e,t){var r=s.getChildElementByName(e,"children"),n=r&&s.getChildElements(r);return n&&n.map(t).sort(o)}function o(e,t){var r=a(e,"area"),n=a(t,"area"),i=a(e,"order"),o=a(t,"order"),s=0;return r<n?s=-1:r>n?s=1:i<o?s=-1:i>o&&(s=1),s}function a(e,t){if("undefined"==typeof e.preferences[t])return null;var r=e.preferences[t].value,n=parseFloat(r);return isNaN(n)?r:n}var s=e("./helpers");t.exports={parseIcons:n,parseChildren:i}},{"./helpers":65}],64:[function(e,t,r){t.exports.PROPERTY_BLACKLIST=["description","shortName","thumbnailUrl","icon","viewmodes","author","authorEmail","authorHref","license","licenseHref","widgetChrome","config","src","isManageableArea","version","width","height"],t.exports.SPECIAL_TYPES=["contentRef","linkRef","datasource"],t.exports.NO_LOCALE_NAME="no_locale"},{}],65:[function(e,t,r){"use strict";function n(e){if(e&&e.value.length)return e.value}function i(e){var t=n(e);return t?t.split(/[,\s]/).filter(function(e){return e.trim().length>0}):[]}function o(e){return"undefined"!=typeof e&&null!==e}function a(e,t,r,n){o(r)&&(e[t]=n?n(r):r)}function s(e,t){o(t)&&e.push(t)}function c(e){if(o(e))return"string"==typeof e?"true"===e:e&&"true"===e.value}function l(e){return[].slice.call(e)}function u(e){if("string"==typeof e)return parseFloat(e)}function p(e){if("string"==typeof e){var t=parseInt(e,10);return isNaN(t)?void 0:t}}function h(e,t){for(var r=d(e),n=0;n<r.length;n++)if(r[n].tagName===t)return r[n]}function f(e,t,r){var n=h(e,t);return"undefined"==typeof r&&(r=null),n&&n.textContent||r}function d(e){return"undefined"!=typeof e.children?l(e.children):l(e.childNodes).filter(function(e){return 1===e.nodeType})}t.exports={assignIfExists:a,content:f,isExists:o,parseBool:c,parseString:n,parseFloat:u,parseInt:p,parseViewhint:i,pushIfExists:s,toArray:l,getChildElementByName:h,getChildElements:d}},{}],66:[function(e,t,r){(function(r){"use strict";function n(e){var t=h.getChildElementByName(e,"properties"),r=h.getChildElements(t),n=h.content(e,"locale")||c(),a={},s=r.reduce(function(e,t){var r=i(t,n);return a[r.name]=r.value,f.indexOf(r.name)===-1&&(e[r.name]=r),e},{}),l={id:h.content(e,"uuid"),name:h.content(e,"name",""),shortName:a.shortName,preferences:s,preferencesDict:a,type:e.tagName,locale:n,dir:h.content(e,"dir","ltr")};return h.assignIfExists(l,"tags",o(e)),h.assignIfExists(l,"extendedItemName",h.content(e,"extendedItemName")),h.assignIfExists(l,"parentItemName",h.content(e,"parentItemName")),h.assignIfExists(l,"contextItemName",h.content(e,"contextItemName")),h.assignIfExists(l,"lockState",h.content(e,"lockState")),h.assignIfExists(l,"securityProfile",h.content(e,"securityProfile")),h.assignIfExists(l,"manageable",h.parseBool(h.content(e,"manageable"))),l}function i(e,t){var r=e.attributes,n=h.parseString(r.name),i=h.parseString(r.label),o=h.parseString(r.itemName),a=r.manageable,c=h.parseBool(r.readonly),l=h.parseBool(r.localizable),u=r.viewHint&&h.parseViewhint(r.viewHint),p=r.type,f=h.toArray(e.getElementsByTagName("value")),m=f.map(function(e){return s(e)}),v=m.filter(function(e){return e.locale===t})[0];v||(v=m.filter(function(e){return!e.locale})[0]||{});var y={name:n,readonly:c||!1,value:v.value};return i&&(y.label=i),a&&(y.manageable=h.parseBool(a)),u&&(y.viewhints=u),o&&(y.itemName=o),p&&d.indexOf(p.value)>-1?y.type=p.value:d.indexOf(v.type)>-1&&(y.type=v.type),l&&(y.localizable=l,y._lang=m.reduce(function(e,t){var r=t.locale||g;return e[r]={value:t.value},e},{}),Object.defineProperty(y,"value",{enumerable:!0,set:function(e){var r=this._lang||(this._lang={}),n=r[t]||(r[t]={});n.value=e,v=n},get:function(){return v.value}})),y}function o(e){var t=h.getChildElementByName(e,"tags"),r=t&&h.getChildElements(t);return r&&r.map(a)}function a(e){return{type:e.attributes.type.value,name:h.parseString({value:e.textContent})}}function s(e){return{value:e.textContent,type:e.getAttribute("type"),locale:e.getAttribute("locale")}}function c(){var e,t=l();return t&&(e=t.getItem("bb:locale")),e||p.defaultLocale}function l(){var e="bb:__test";try{var t=r.localStorage;return t.setItem(e,e),t.removeItem(e),t}catch(n){return null}}var u=e("./constants"),p=e("../../../util/i18n"),h=e("./helpers"),f=u.PROPERTY_BLACKLIST,d=u.SPECIAL_TYPES,g=u.NO_LOCALE_NAME;t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../util/i18n":82,"./constants":64,"./helpers":65}],67:[function(e,t,r){(function(r){"use strict";function n(e){var t=c(e);return this._parseXmlItemModel(t.documentElement)}function i(e){var t=c(e),r=this;return h.getChildElements(t.documentElement).map(function(e){return r._parseXmlItemModel(e)}).filter(function(e){return!!e})}function o(e){var t=l(),r=e.tagName.toLowerCase(),n=this.getParser(r);return n?n(e,t):(t.warn("Unsupported item type [%s]",r),null)}function a(e,t){this._typeSpecificParser||(this._typeSpecificParser={}),this._typeSpecificParser[e]=t}function s(e){return this._typeSpecificParser&&this._typeSpecificParser[e]}function c(e){var t=new r.DOMParser;return t.parseFromString(e,"application/xml")}function l(){if(!p){var e=d.getLogger();p=e.child({childName:"model-parser"})}return p}function u(){var e=Object.create(g);return e.setParser("widget",f),e.setParser("container",f),e}var p,h=e("./helpers"),f=e("./widget"),d=e("../../../util/logger-factory"),g={parse:n,parseList:i,setParser:a,getParser:s,_parseXmlItemModel:o};t.exports={createInstance:u}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../util/logger-factory":83,"./helpers":65,"./widget":68}],68:[function(e,t,r){"use strict";function n(e){var t=h(e),r=t.preferencesDict,o={content:a(r),description:r.description,icons:f.parseIcons(r),title:r.title};d.assignIfExists(o,"width",d.parseInt(r.width,10)),d.assignIfExists(o,"height",d.parseInt(r.height,10)),d.assignIfExists(o,"isManageableArea",d.parseBool(r.isManageableArea)),d.assignIfExists(o,"viewmodes",c(r)),d.assignIfExists(o,"author",r.author),d.assignIfExists(o,"authorEmail",r.authorEmail),d.assignIfExists(o,"authorHref",r.authorHref),d.assignIfExists(o,"version",r.version),d.assignIfExists(o,"license",r.license),d.assignIfExists(o,"licenseHref",r.licenseHref),o.altContent=s(t);var l=i(t);Object.keys(l).length>0&&(o.datasources=l);var u=f.parseChildren(e,n);return(u||[]).length>0&&(o.children=u),delete t.preferencesDict,p(t,o)}function i(e){var t=e.preferences,r=Object.keys(t);return r.map(function(e){return t[e]}).filter(function(e){return"datasource"===e.type}).reduce(function(e,t){var r=o(t.value);return r.uri&&(r.name=t.name,e[t.name]=r),e},{})}function o(e){var t={};if(e){var r,n=l();try{r=m.parse(e,!0),t.params=Object.keys(r.query).map(function(e){return{name:e,value:r.query[e]}}),t.uri=t.params.length>0?e.slice(0,e.indexOf("?")):e}catch(i){n.error(i)}}return t}function a(e){var t={src:"",type:"text/html",encoding:"UTF-8"};return d.assignIfExists(t,"src",e.src),d.assignIfExists(t,"config",e.config),t}function s(e){var t=e.preferences,r=Object.keys(t),n=r.filter(function(e){return/^src\..*/.test(e)}),i=n.reduce(function(e,r){var n=t[r].value,i=r.replace(/^src\./,"");return e[i]={src:n,encoding:"UTF-8"},e},{});return n.forEach(function(t){delete e.preferences[t]}),i}function c(e){var t=e.viewmodes;return t?t.split(/\s+/).filter(function(e){return e.trim().length>0}):[]}function l(){if(!u){var e=g.getLogger();u=e.child({childName:"xml-widget-parser"})}return u}var u,p=e("../../../util/util").merge,h=e("./item"),f=e("./common"),d=e("./helpers"),g=e("../../../util/logger-factory"),m=e("url");t.exports=n},{"../../../util/logger-factory":83,"../../../util/util":84,"./common":63,"./helpers":65,"./item":66,url:7}],69:[function(e,t,r){"use strict";var n=e("../../util/deduping-fetch"),i=e("../../core/config-reader"),o=e("../../util/verror"),a=e("../../util/logger-factory"),s=function(e){e=e||{},this.log=a.getLogger(),this.useCache="boolean"!=typeof e.useCache||e.useCache,this.responseCache={}};s.prototype=Object.create(i.prototype),s.prototype.read=function(e){var t=this,r=this.log;return r.debug("Making http request for widget config to [%s]...",e),this.responseCache[e]?(this.log.debug("Using cached response for [%s]",e),this.responseCache[e]):n(e).then(function(t){return r.debug("Response received for [%s]. Status: %s.",e,t.status),t.status>=200&&t.status<300?Promise.resolve(t):Promise.reject(new Error(t.statusText))}).then(function(e){return e.text()}).then(function(n){return r.trace("Received config:\n%s",n),t.useCache&&(t.responseCache[e]=n),n})["catch"](function(t){throw new o(t,"Failed to XHR get from "+e)})},t.exports=s},{"../../core/config-reader":36,"../../util/deduping-fetch":78,"../../util/logger-factory":83,"../../util/verror":85}],70:[function(e,t,r){(function(r){"use strict";function n(){return c?c:new DOMParser}var i=e("../../core/preprocessing-widget-renderer"),o=e("../../util/verror"),a=e("./seamless/start-file-processor"),s=e("../../util/deduping-fetch"),c=null,l=function(e,t,r){r=r||{};var n=r.configVars||{};if("undefined"==typeof window.DOMParser)throw new Error("DOMParser is not shimmed or a native object. This renderer will not work");i.call(this,t,n),this.widgetContainerEl=e,this.parsingFormat=r.parsingFormat||null,this.configVars=n,this.useFolderLocalization=r.useFolderLocalization||!1,this.widgetEl=null,this.areaMap=null};l.prototype=Object.create(i.prototype),l.prototype.fetchStartFile=function(e){var t=this.log;return t.debug("Starting HTML5 seamless rendering..."),t.debug("Requesting start file [%s] ...",e.content.src),s(e.content.src).then(function(e){if(t.debug("Start file request resolved/ Status: %s",e.status),0===e.status||200===e.status)return e.text();var r=new Error(e.statusText);throw r.code=e.status,r}).then(function(e){return t.trace("Received HTML\n: %s",e),e})["catch"](function(t){var r=new o(t,"Failed to fetch: "+e.content.src);throw 404===t.code&&(r.code="STARTFILE_NOT_FOUND"),r})},l.prototype.process=function(e,t,i){var o,s=this.startFileProcessor=new a({document:document,configVars:this.configVars,log:this.log,startFileSrc:e.content.src});if(i){var c=n().parseFromString(i,"text/html");c=s.aggregateStylesheets(e,c),c=s.normalizeMediaUrls(e,c);var l=s.collateInvokableScripts(e,c);o=s.createWidgetRootNode(e,c),o=s.setDimensions(e,o),s.prepareScripts(e,o,l),this.widgetContainerEl.appendChild(o)}else for(var u=0;u<this.widgetContainerEl.children.length;u++)if(this.widgetContainerEl.children[u].hasAttribute("data-widget")){o=this.widgetContainerEl.children[u];break}Object.defineProperty(t,"body",{enumerable:!0,writable:!!this.configVars.compat,value:o}),r.cxp._widgets=r.cxp._widgets||{},r.cxp._widgets[e.id]=t,this.widgetEl=o},l.prototype.postprocess=function(e,t){return this.startFileProcessor.invokeScripts(e,t,this.widgetEl)},l.prototype.getWidgetNode=function(){return this.widgetEl||null},l.prototype.getParentNode=function(){return this.widgetContainerEl||null},l.prototype.setParentNode=function(e){this.widgetContainerEl=e},l.prototype.getWidth=function(){return this.getWidgetNode()?this.getWidgetNode().offsetWidth:"auto"},l.prototype.getHeight=function(){return this.getWidgetNode()?this.getWidgetNode().offsetHeight:"auto"},l.prototype.isRendered=function(){return!!this.widgetContainerEl.innerHTML.trim()},l.prototype.destroy=function(){for(var e=this.widgetEl.getAttribute("data-widget"),t=this.widgetEl.parentElement,n=null;t;){var i=t.getAttribute("data-chrome");if(i===e){n=t;break}t=t.parentElement}this.startFileProcessor.removeInlineScripts(this.widgetId,this.widgetEl),n?n.parentElement.removeChild(n):(this.widgetEl.parentElement.removeChild(this.widgetEl),this.widgetEl=null),delete r.cxp._widgets[this.widgetId]},l.prototype.getAreaNodes=function(){var e=this;if(!this.areaMap){e.areaMap={};var t=Array.prototype.slice.call(this.widgetEl.querySelectorAll("div[data-area]"));t.filter(function(t){return e._isDataAreaElementFromItem(e.widgetEl,t)}).forEach(function(t){var r=t.getAttribute("data-area");e.areaMap[r]=t})}return this.areaMap},l.prototype._isDataAreaElementFromItem=function(e,t){for(var r,n=e.getAttribute("data-widget"),i=t;i;){if(r="function"==typeof i.getAttribute?i.getAttribute("data-widget"):null)return r===n;i=i.parentNode}return!1},t.exports=l}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../core/preprocessing-widget-renderer":38,"../../util/deduping-fetch":78,"../../util/verror":85,"./seamless/start-file-processor":74}],71:[function(require,module,exports){"use strict";var Handlebars=require("handlebars/dist/handlebars.min"),HandlebarsHelpers=require("handlebars-helpers"),VError=require("../../../util/verror"),loggerFactory=require("../../../util/logger-factory"),i18n=require("../../../util/i18n"),HandlebarsIntl=require("../../../util/handlebars-intl-decorator"),HandlebarsPreprocessor=function(e){this.name="Handlebars Preprocessor",this.log=loggerFactory.getLogger(),this.dataObj={cxpConfig:e||{}},this.templateCache={},this.hbs=Handlebars.create();var t=HandlebarsPreprocessor.cxpHelpers;for(var r in t)t.hasOwnProperty(r)&&this.hbs.registerHelper(r,t[r]);i18n.intlSupported?HandlebarsIntl.registerWith(this.hbs):this.log.warn("The ECMAScript Internationalization API is not supported on this platform. Some i18n related features will fail.")};HandlebarsPreprocessor.prototype.process=function(widgetModel,startFileContent,context,messageBundle){var log=this.log,errMessage,templateKey=widgetModel.content.src,template=this.templateCache[templateKey];if(!template){if(widgetModel.content.type&&"application/x-handlebars-template"===widgetModel.content.type){var precompiledTemplate=null;try{eval("precompiledTemplate = "+startFileContent),template=this.hbs.template(precompiledTemplate)}catch(err){throw errMessage="There was a problem evaluating a pre-compiled handlebars template. Ensure it was compiled using the simple option. E.g.`handlebars index.handlebars -s -f index.js`",this.log.error(err,errMessage),new VError(err,errMessage)}}else{log.debug("Compiling handlebars template instance for %s",templateKey);try{template=this.hbs.compile(startFileContent)}catch(err){throw errMessage="There was a problem compiling a handlebars template",this.log.error(err,errMessage),new VError(err,errMessage)}}this.templateCache[templateKey]=template}if(messageBundle){var messages=messageBundle.messages||{},formats=messageBundle.formats||{},options=messageBundle.options||{},availableLocales=Object.keys(messages),bestFitLocale=i18n.chooseBestLocale(availableLocales,widgetModel.locale);this.dataObj.intl=messages[bestFitLocale]||messages[i18n.defaultLocale]||{},this.dataObj.intl.locales&&this.log.warn('"locales" is a reserved key. It will be overridden'),this.dataObj.intl.locales=widgetModel.locale===i18n.defaultLocale?widgetModel.locale:[widgetModel.locale,i18n.defaultLocale],this.dataObj.intl.formats&&this.log.warn('"formats" is a reserved key. It will be overridden'),this.dataObj.intl.formats=formats,this.dataObj.intl.options&&this.log.warn('"options" is a reserved key. It will be overridden'),this.dataObj.intl.options=options}var result;try{result=template(context,{data:this.dataObj}),log.trace("Using compiled Handlebars start file for %s:\n%s",templateKey,result)}catch(err){throw log.error(err,"A handlebars template [%s] could not be processed:\n\t%s",templateKey,err.message),err}return result},HandlebarsPreprocessor.prototype.registerHelper=function(e,t){this.hbs.registerHelper(e,t)},HandlebarsPreprocessor.prototype.registerPartial=function(e,t){this.hbs.registerPartial(e,t)},HandlebarsPreprocessor.cxpHelpers=HandlebarsHelpers,module.exports=HandlebarsPreprocessor},{"../../../util/handlebars-intl-decorator":81,"../../../util/i18n":82,"../../../util/logger-factory":83,"../../../util/verror":85,"handlebars-helpers":87,"handlebars/dist/handlebars.min":88}],72:[function(require,module,exports){"use strict";function guessTemplateNamespace(e,t){function r(e){return"undefined"!=typeof window[e]}var n;if(n="templates_"+e,r(n))return n;var i=t.preferences.soyNamespace;if(i&&r(i.value))return i.value;var o=t.preferences.viewNamespace;if(o){var a=o.value,s=a.replace("http://","").replace(/[\.\/]/g,"_");if(n=s+"_"+e,r(n))return n;if(n=s,r(n))return n}throw new Error("Could not guess soy template namespace for "+e)}function createTemplateItemData(e){var t={};return t.name=e.name,t.children=e.children||[],t.preferences=e.preferences||{},t.children=t.children.map(createTemplateItemData),t}var VError=require("../../../util/verror"),loggerFactory=require("../../../util/logger-factory"),resourceLoader=require("../seamless/resource-loader")(),util=require("../../../util/util"),convertToArray=Array.prototype.slice.call.bind(Array.prototype.slice),SoyPreprocessor=function(e){this.name="Soy Preprocessor",this.log=loggerFactory.getLogger(),this.configVars=e};SoyPreprocessor.prototype.process=function(widgetModel,startFileContent,context){var self=this,log=this.log;if("undefined"==typeof soy)throw new VError("Soy utils are not present. Cannot use Soy start file");var parser=new DOMParser,configDoc=parser.parseFromString(startFileContent,"application/xml"),resources=configDoc.getElementsByTagName("resources")[0];if(resources=resources||configDoc.getElementsByTagName("bb:resources")[0],!resources)throw new VError('"resources" element not found in config.xml');var templateName=widgetModel.preferences.TemplateName.value,templateScriptRegex=new RegExp("/templates/"+templateName+"/template\\.js$"),templateScriptNode=convertToArray(resources.children).filter(function(e){return templateScriptRegex.test(e.getAttribute("src"))})[0];templateScriptNode&&resources.removeChild(templateScriptNode);var templateSrc=util.replacePathVars(templateScriptNode.getAttribute("src"),this.configVars,this.log);return resourceLoader.loadScripts(templateSrc).then(function(){var startFileEl=document.createElement("div"),templateNamespace="window."+guessTemplateNamespace(templateName,widgetModel),fragment=null,template=null;try{eval("template = "+templateNamespace),fragment=soy.renderAsFragment(template[templateName],{item:createTemplateItemData(context),ij:self.configVars},null,self.configVars)}catch(err){var errMessage="There was a problem evaluating a pre-compiled Soy template.";throw log.error(err,errMessage),new VError(err,errMessage)}startFileEl.innerHTML=resources.innerHTML,startFileEl.appendChild(fragment);var areaNodes=fragment.classList&&fragment.classList.contains("bp-area")?[fragment]:convertToArray(fragment.getElementsByClassName("bp-area"));areaNodes.forEach(function(e,t){e.setAttribute("data-area",t)});var result=startFileEl.outerHTML;return log.trace("Using compiled Soy start file for %s:\n%s",templateNamespace,result),result})},module.exports=SoyPreprocessor},{"../../../util/logger-factory":83,"../../../util/util":84,"../../../util/verror":85,
"../seamless/resource-loader":73}],73:[function(e,t,r){"use strict";function n(){this._initilized=!1,this._allLoadingPromises={}}var i,o=e("promise-extensions")(Promise);t.exports=function(){return i||(i=new n),i},n.prototype._init=function(){this._initilized||(this.head=document.getElementsByTagName("head")[0]||document.documentElement,this.asyncSupported="undefined"!=typeof document.createElement("script").async,this._prepopulateLoadedCache(),this._initilized=!0)},n.prototype._prepopulateLoadedCache=function(){var e=this,t=Array.prototype.slice.call(document.getElementsByTagName("link"));t.forEach(function(t){var r=t.getAttribute("href"),n="stylesheet"===t.rel&&r;n&&e._addToCache(r,r)});var r=Array.prototype.slice.call(document.getElementsByTagName("script"));r.forEach(function(t){var r=t.getAttribute("src"),n=!t.innerHTML&&r;!n||t.async||e._getFromCache(r)||e._addToCache(r,Promise.resolve(r))})},n.prototype._normalizeKey=function(e){var t=decodeURI(e);return t.replace(/(?:features|widgets|containers|pages|templates)\/\[BBHOST\]/gi,"items")},n.prototype._addToCache=function(e,t){if(e){var r=this._normalizeKey(e);this._allLoadingPromises[r]=t}},n.prototype._getFromCache=function(e){if(e){var t=this._normalizeKey(e);return this._allLoadingPromises[t]}},n.prototype.loadScripts=function(e){return e instanceof Array||(e=[e]),this._init(),this.asyncSupported?this._loadScriptsAsync(e):this._loadScriptsSync(e)},n.prototype._loadScriptsAsync=function(e){var t=this,r=e.map(function(e){var r=t._getFromCache(e);if(!r){var n=document.createElement("script");n.src=e,n.async=!1,r=t._createScriptPromise(n),t._addToCache(e,r),t.head.insertBefore(n,t.head.firstChild)}return r});return o.settleAll(r)},n.prototype._loadScriptsSync=function(e){function t(e){return e.element&&r.head.insertBefore(e.element,r.head.firstChild),e.promise}var r=this,n=e.map(function(e){var t,n=r._getFromCache(e);return n||(t=document.createElement("script"),t.src=e,n=r._createScriptPromise(t),r._addToCache(e,n)),{element:t,promise:n}}),i=n.map(function(e){return e.promise}),a=Promise.resolve(t(n[0]||{})),s=n.slice(1).reduce(function(e,r){var n=t.bind(null,r);return e.then(n,n)},a);return s["catch"](function(){}),o.settleAll(i)},n.prototype._createScriptPromise=function(e){var t=e.src;return new Promise(function(r,n){e.onload=function(){r(t)},e.onerror=function(){n(t)}})},n.prototype.loadCss=function(e){e instanceof Array||(e=[e]),this._init();var t=this,r=t.head,n=[];return e.forEach(function(e){var i=t._getFromCache(e);if(i)n.push(i);else{var o=document.createElement("link");o.setAttribute("rel","stylesheet"),o.setAttribute("type","text/css"),o.setAttribute("href",e);var a=Promise.resolve(e);t._addToCache(e,a),n.push(a);var s=Array.prototype.slice.call(r.getElementsByTagName("link")).filter(function(e){return"stylesheet"===e.rel});if(s.length){var c=s.pop();c.parentNode.insertBefore(o,c.nextSibling)}else r.insertBefore(o,r.firstChild)}}),Promise.all(n)}},{"promise-extensions":145}],74:[function(e,t,r){(function(r){"use strict";function n(e){e=e||{},this.log=e.log||null,this.documentContext=e.document,this.configVars=e.configVars||{},this.startFileSrc=e.startFileSrc||"",this._scriptKeySuffix=""}var i,o=e("../../../util/util"),a=e("url"),s=e("./resource-loader")(),c=e("../../../util/verror");r.location&&(i=r.location.pathname),n.prototype.aggregateStylesheets=function(e,t){function r(t){var r=t.getAttribute("href"),n=i._normalizeResourceUrl(r,e);o.push(n)}function n(){s.loadCss(o),o=[]}var i=this,o=[],a=t.querySelectorAll(" head > style, head > link[rel=stylesheet]");return Array.prototype.slice.call(a).forEach(function(e){"style"===e.tagName.toLowerCase()?(n(),i.documentContext.head.appendChild(e)):e.getAttribute("href")&&r(e)}),n(),t},n.prototype.collateInvokableScripts=function(e,t){var r=this,n=t.getElementsByTagName("script"),i=Array.prototype.slice.call(n).reduce(function(t,n){if(!n.type||"text/javascript"===n.type){var i=n.innerHTML,o=n.getAttribute("src");i?t.push({content:i}):o&&t.push({src:r._normalizeResourceUrl(o,e)}),n.parentNode.removeChild(n)}return t},[]),o=t.getElementsByTagName("body")[0],a=o.getAttribute("onload");return a&&i.push({content:a}),i},n.prototype.normalizeMediaUrls=function(e,t){var r=this,n=t.getElementsByTagName("img");return Array.prototype.slice.call(n).forEach(function(t){var n=t.getAttribute("src");if(n){var i=r._normalizeResourceUrl(n,e);t.getAttribute("src")!==i&&(t.src=i)}}),t},n.prototype.createWidgetRootNode=function(e,t){var r=this.documentContext.createElement("div");r.id=e.id,r.setAttribute("data-widget",e.name);for(var n=t.getElementsByTagName("body")[0],i=0;i<n.attributes.length;i++){var o=n.attributes[i];o.specified&&"onload"!==o.name&&"id"!==o.name&&r.setAttribute(o.name,o.value)}return r.innerHTML=n.innerHTML,r},n.prototype.setDimensions=function(e,t){function r(r){e[r]&&!isNaN(parseInt(e[r]))&&(t.style[r]=parseInt(e[r])+"px",n.log.debug("Widget %s set to %s.",r,t.style[r]))}var n=this;return r("width"),r("height"),t},n.prototype.prepareScripts=function(e,t,n){var i=this;this._scriptKeySuffix="_"+this.startFileSrc;var o=this._getScriptKey(e.id);return r.cxp=r.cxp||{},r.cxp.scripts=r.cxp.scripts||{},r.cxp.scripts[o]=[],n.forEach(function(e){var r=i.documentContext.createElement("script");if(e.content){var n="cxp.scripts['"+o+"'].push(function(widget, __GADGET__,  __WIDGET__) { ",a=" });";r.innerHTML=n+e.content+a,r.setAttribute("data-cxp-script",o),i.documentContext.body.appendChild(r)}else r.setAttribute("data-src",e.src),t.appendChild(r)}),t},n.prototype.removeInlineScripts=function(e){var t=this._getScriptKey(e);r.cxp.scripts=r.cxp.scripts||{},delete r.cxp.scripts.scriptKey;var n=this.documentContext.querySelectorAll("script[data-cxp-script='"+t+"']");Array.prototype.slice.call(n).forEach(function(e){e.parentElement.removeChild(e)})},n.prototype.invokeScripts=function(e,t,n){var i=this,a=this.log,l=e.name,u=n.querySelectorAll("script[data-src]"),p=Array.prototype.slice.call(u).filter(function(e){return o.ensureElementBelongsToItem(l,e)}).map(function(t){var r=t.getAttribute("data-src");return r=i._normalizeResourceUrl(r,e)});return s.loadScripts(p).then(function(n){a.debug("JS resources have loaded.");var o=[];if(n){var s=n.filter(function(e){var t=e.isRejected();return t&&o.push(e.reason)}).length;s>0&&a.warn("%s scripts failed to load:\n%s",s,o.join(", "))}var c=i._getScriptKey(e.id);if(r.cxp&&r.cxp.scripts&&Array.isArray(r.cxp.scripts[c]))try{r.cxp.scripts[c].forEach(function(e){"function"==typeof e&&e.call(null,t,t,t)})}catch(l){a.warn('Failed to invoke inline scripts for widget "%s".\n%s',e.name,l)}})["catch"](function(e){throw new c(e,"Failed to render HTML5 seamless widget")})},n.prototype._normalizeResourceUrl=function(e,t){if(e=o.replacePathVars(e,this.configVars,this.log),o.isUrlDocumentRelative(e)){var r=t.content.src,n=r.substring(0,r.lastIndexOf("/")+1);if(o.isUrlDocumentRelative(r)){var s=i.substring(0,i.lastIndexOf("/")+1);n=a.resolve(s,n)}e=a.resolve(n,e)}return e},n.prototype._getScriptKey=function(e){return e+this._scriptKeySuffix},t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../util/util":84,"../../../util/verror":85,"./resource-loader":73,url:7}],75:[function(e,t,r){"use strict";function n(){i.call(this,window.localStorage)}var i=e("./web-storage-decorator");n.prototype=Object.create(i.prototype),t.exports=n},{"./web-storage-decorator":77}],76:[function(e,t,r){"use strict";function n(e){this.type=e}var i=e("../../util/util");n.prototype.initStorageEvent=function(e,t,r,n,i,o,a,s){this.type=e,this.canBubble=t,this.cancellable=r,this.key=n,this.oldValue=i,this.newValue=o,this.url=a,this.storageArea=s},n.prototype.toString=function(){return i.format("[object StorageEvent] (key=%s, oldValue=%s, newValue=%s, url=%s)",this.key,this.oldValue,this.newValue,this.url)},t.exports=n},{"../../util/util":84}],77:[function(e,t,r){(function(r){"use strict";function n(e){this.eventTarget=[],this.log=i.getLogger(),this._items=[],this._storage=e,this._prefix="",this._eventsEnabled=!1;var t=this;Object.defineProperty(this,"length",{enumerable:!1,configurable:!1,get:function(){return Object.keys(t._items).length}})}var i=e("../../util/logger-factory"),o=e("browser-bunyan"),a=e("../../core/widget-storage"),s=e("../../util/verror"),c=e("./storage-event"),l=e("../../util/util");n.prototype=Object.create(a.prototype),n.prototype.init=function(e,t){var r=this,n=this.log;this._prefix=e||"",n.debug("Initializing preference storage for widget [%s]",e),n.debug("Using internal storage [%s]",this._storage.toString()),n.level()<=o.TRACE&&n.trace("Initializing storage with the following preferences:\n %s",JSON.stringify(t)),t&&(this._items=Object.keys(t).map(function(e){return r.defineItem(t[e])})),this._eventsEnabled=!0},n.prototype.getItem=function(e){var t=this._storage.getItem(this._prefix+e);if("undefined"==typeof t||null===t){var r=this._getItemDefinition(e)||null;t=r?r.value:null}return"undefined"==typeof t&&(t=null),this.log.trace("Getting preference [%s=%s]",e,t),t},n.prototype.defineItem=function(e){var t=this,r=e.name;this._items.push(e);var n={enumerable:!0,configurable:!0,get:function(){return t.getItem(r)},set:function(e){return t.setItem(t._prefix+r,e)}};return Object.defineProperty(this,r,n),e},n.prototype.setItem=function(e,t,r){return this._ensureItemWritable(e),this.log.debug("Setting preference to storage [%s=%s]",e,t),null===t?this.removeItem(e):(this._notify(e,this.getItem(e),t),this._storage.setItem(this._prefix+e,t,r))},n.prototype.removeItem=function(e){return this._notify(e,this.getItem(e),null),this.log.debug("Removing preference from storage [%s]",e),this._storage.removeItem(this._prefix+e)},n.prototype.clear=function(){var e=this;this._notify(null,null,null),this.log.debug("Clearing preferences"),this._eventsEnabled=!1,Object.keys(this._storage).filter(function(t){return 0===t.indexOf(e._prefix)}).forEach(function(t){e.removeItem(t.substr(e.prefix.length))}),this._eventsEnabled=!0},n.prototype.key=function(e){return this._items[e]?this._items[e].name:null},n.prototype.keys=function(){var e=this,t=Object.keys(this._storage).filter(function(t){return 0===t.indexOf(e._prefix)});return 0===t.length?[]:t.map(function(t){return t.slice(e._prefix.length)})},n.prototype._getItemDefinition=function(e){var t=this._items.filter(function(t){return e===t.name})[0];return t||null},n.prototype._notify=function(e,t,n){if(this._eventsEnabled){var i=this,a=Array.isArray(this.eventTarget)?this.eventTarget:[this.eventTarget];a.filter(function(e){return void 0!==e&&null!==e}).forEach(function(a){if("function"!=typeof a.dispatchEvent){var s="Cannot dispatch StorageEvent for preferences. An event target was provided, but it does not implement the EventTarget interface. [%s, %s, %s]";return void i.log.warn(s,e,t,n)}var l=new c("storage");l.initStorageEvent("storage",!1,!1,e,t,n,i._prefix,i),r.nextTick(function(){i.log.level()<=o.DEBUG&&i.log.debug("Sending StorageEvent [%s] ",l),a.dispatchEvent(l)})})}},n.prototype._ensureItemWritable=function(e){var t=this._getItemDefinition(e);if(t&&t.readonly){var r=l.format("Attempted to modify readonly preference [%s]",e);throw this.log.warn(r),new s(r)}},t.exports=n}).call(this,e("_process"))},{"../../core/widget-storage":43,"../../util/logger-factory":83,"../../util/util":84,"../../util/verror":85,"./storage-event":76,_process:2,"browser-bunyan":86}],78:[function(e,t,r){(function(r){"use strict";function n(e,t,r){var n=c(t);d[e]=n,r>0&&(n.timeoutId=o(e,r))}function i(e){var t,r=d[e];return r&&(r.setLastAccessedTime(),t=r.value),t}function o(e,t,r){var n;return"undefined"==typeof r?(n=t,l.debug("setting sliding expire handler to purge item [%s] in %sms",e,n)):(n=r,l.debug("%sms elapsed since last access to item [%s]. Extending expiration time by %sms",t-r,e,n)),setTimeout(function(){var r=d[e];if(r){var n=(new Date).getTime()-r.lastAccessed;n>=t?(l.debug("purging expired item [%s]",e),delete d[e]):r.timeoutId=o(e,t,t-n)}},n)}function a(e){var t=p.isRunningOnFilesystem()?"include":"same-origin",r=e||{};return r.credentials||(r.credentials=t),r}function s(){Object.keys(d).forEach(function(e){var t=d[e].timeoutId;"undefined"!=typeof t&&clearTimeout(t),delete d[e]})}function c(e){var t=(new Date).getTime(),r=Object.create(g);return r.value=e,r.created=t,r.lastAccessed=t,r}var l,u=e("./logger-factory"),p=e("./util"),h=e("./fetch-file"),f=1e3,d={},g={setLastAccessedTime:function(){this.lastAccessed=(new Date).getTime()}};t.exports=function(e,t){var o="string"==typeof e?e:e.url,c=o,g=e.method||t&&t.method||"GET",m="string"==typeof g&&"GET"===g.toUpperCase();l||(l=u.getLogger()),m||s();var v=i(c);if(v&&m)l.debug("returning data for [%s] from cache",c);else{l.debug("data from [%s] not found in cache. Requesting it from remote resource...",c),t=a(t);var y=p.isUrlForFile(o)?h:r.fetch;v=y(e,t).then(function(e){var t=e.status;if(l.debug("response from [%s] received. Status: [%s]",c,t),t<200||t>299){var r=new Error(e.statusText);throw r._response=e,r}return e}).then(function(e){var t=i(c);return t&&(l.debug("holding data from [%s] in cache for %sms",c,f),n(c,t,f)),e})["catch"](function(e){if(l.debug("removing data for [%s] from cache as the following error occurred: [%s]",c,e.message),delete d[c],e._response)return e._response;throw e}),m&&n(c,v)}return v.then(function(e){return e.clone()})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./fetch-file":80,"./logger-factory":83,"./util":84}],79:[function(e,t,r){"use strict";t.exports=function(){function e(e,t,r){Object.defineProperty(e,t,{enumerable:!1,configurable:!0,value:r})}function t(t,r,n){var i;o.hasOwnProperty.call(t,r)?i=t[r]:e(t,r,i=[]),i.indexOf(n)<0&&i.push(n)}function r(e,t,r){var n,i,a;if(o.hasOwnProperty.call(e,t))for(r.target=e,n=e[t].slice(0),a=0;a<n.length;a++)i=n[a],"function"==typeof i?i.call(e,r):"function"==typeof i.handleEvent&&i.handleEvent(r)}function n(e,t,r){var n,i;o.hasOwnProperty.call(e,t)&&(n=e[t],i=n.indexOf(r),i>-1&&(n.splice(i,1),n.length||delete e[t]))}var i="@@",o={};return e(o,"addEventListener",function(e,r){t(this,i+e,r)}),e(o,"dispatchEvent",function(e){r(this,i+e.type,e)}),e(o,"removeEventListener",function(e,t){n(this,i+e,t)}),o}()},{}],80:[function(e,t,r){(function(e){"use strict";t.exports=function(t){return new Promise(function(r,n){var i="string"==typeof t?t:t.url,o=new e.XMLHttpRequest;o.onload=function(){r(new e.Response(o.responseText,{status:0===o.status?200:o.status}))},o.onerror=function(){n(new Error("Local request failed for "+t))},o.open("GET",i),o.send(null)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],81:[function(e,t,r){"use strict";function n(e){var t=i.create(),r={};if(t.registerHelper=function(e,t){"string"==typeof e?r[e]=t:Object.keys(e).forEach(function(t){r[t]=e[t]})},o.registerWith(t),r.formatNumber){var n=r.formatNumber;r.formatNumber=function(e){var t=[].slice.call(arguments);return t[0]=Number(e),n.apply(this,t)}}e.registerHelper(r)}var i=e("handlebars/dist/handlebars.min"),o=e("handlebars-intl");t.exports={registerWith:n}},{"handlebars-intl":8,"handlebars/dist/handlebars.min":88}],82:[function(e,t,r){(function(e){"use strict";var r=["ar","iw","he","dv","ha","fa","ps","ur","yi","ji"];t.exports={defaultLocale:"en",intlSupported:"undefined"!=typeof e.Intl,getDirection:function(e){return e.length>=2&&r.indexOf(e.substr(0,2))>=0?"rtl":"ltr"},chooseBestLocale:function(e,t){for(var r=t;r;){if(Array.prototype.indexOf.call(e,r)>-1)return r;var n=r.lastIndexOf("-");if(n<0)return;n>=2&&"-"===r.charAt(n-2)&&(n-=2),r=r.substring(0,n)}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],83:[function(e,t,r){"use strict";var n=e("browser-bunyan"),i=e("../util/util"),o={},a=null,s={defaultLoggerName:"logger",defaultLogLevel:"info"};s.createLogger=function(e){e=e||{};var t=e.parentLog||null,r=e.loggerName||this.defaultLoggerName,s=e.logLevel||this.defaultLogLevel,c=e.appendId||!1;c&&(r+="/"+i.randomId());var l;return l=t?t.child({childName:r}):n.createLogger({name:r,streams:[{level:s,stream:new n.ConsoleFormattedStream,type:"raw"}],src:n.resolveLevel(s)<=n.DEBUG}),o[r]=l,a=l,l},s.getLogger=function(e){return e&&o[e]?o[e]:a?a:s.createLogger()},t.exports=s},{"../util/util":84,"browser-bunyan":86}],84:[function(e,t,r){(function(r){"use strict";var n=e("browser-bunyan"),i={cloneDeep:e("lodash/lang/cloneDeep"),merge:e("lodash/object/merge"),omit:e("lodash/object/omit"),assign:e("lodash/object/assign")},o={};o.parseBoolean=function(e){return("boolean"==typeof e||e instanceof Boolean)&&1==e||("string"==typeof e||e instanceof String)&&/^\s*true\s*$/i.test(e)||("number"==typeof e||e instanceof Number)&&0!=e},o.isUrlAbsolute=function(e){var t=/^https?:\/\/|file?:\/\//i;return t.test(e)},o.isUrlSiteRelative=function(e){return 0===e.indexOf("/")},o.isUrlDocumentRelative=function(e){return!(o.isUrlAbsolute(e)||o.isUrlSiteRelative(e))},o.isRunningOnFilesystem=function(){return"undefined"!=typeof r.location&&"file:"===r.location.protocol},o.isUrlForFile=function(e){var t=/^file:/.test(e),r=o.isRunningOnFilesystem()&&o.isUrlDocumentRelative(e);return t||r},o.merge=i.merge,o.assign=i.assign,o.omit=i.omit,o.startsWith=function(e,t,r){return r=r||0,e.substr(r,t.length)===t},o.endsWith=function(e,t,r){if(String.prototype.endsWith)return e.endsWith(t,r);var n=e.toString();("number"!=typeof r||!isFinite(r)||Math.floor(r)!==r||r>n.length)&&(r=n.length),r-=t.length;var i=n.indexOf(t,r);return i!==-1&&i===r},o.cloneDeep=function(){try{return i.cloneDeep.apply(i,Array.prototype.slice.call(arguments))}catch(e){throw console.warn(e),e}},o.isArray=i.isArray,o.format=function(e){if(null===e)return"null";if("string"!=typeof e)return e.toString();for(var t=/%[sdj%]/g,r=1,n=arguments,i=n.length,o=String(e).replace(t,function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return e}}),a=n[r];r<i;a=n[++r])o+=" "+a;return o},o.getDescendantLocales=function(e){e=e.toLowerCase();for(var t,r=[],n=e.split("-");t=n.shift();){var i=r[r.length-1];r.push((i?i+"-":"")+t)}return r},o.randomId=function(){return Math.random().toString(36).substring(7)},o.replacePathVars=function(e,t,r){for(var i in t)if(t.hasOwnProperty(i)){var o=new RegExp("\\$\\("+i+"\\)","g");r&&r.level()<=n.DEBUG&&o.test(e)&&r.debug("Updating resource url. Replacing %s for %s in [%s]",o,t[i],e),e=e.replace(o,t[i])}return e},o.getContentBodyAndTypeFromResponse=function(e){return e.text().then(function(t){t=t.trim();var r=e.headers.get("content-type"),n=null,i=null;if(r&&r.indexOf("/json")!==-1?n="json":r&&r.indexOf("text/html")!==-1?n="html":"string"==typeof r&&r.length>0?i=new Error("Content type not supported for rendering: "+r):t&&o.startsWith(t,"{")?n="json":t&&o.startsWith(t,"<")?n="html":i=new Error("Undefined content type for response."),i)throw i;return{type:n,body:"json"===n?JSON.parse(t):t}})},o.ensureElementBelongsToItem=function(e,t){if(!e||!t)return!1;for(var r,n=t;n;){if(r=n.getAttribute?n.getAttribute("data-widget"):null)return r===e;n=n.parentNode}return!1},t.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"browser-bunyan":86,"lodash/lang/cloneDeep":130,"lodash/object/assign":139,"lodash/object/merge":142,"lodash/object/omit":143}],85:[function(e,t,r){function n(e){var t,r,i,o,a;return this instanceof n?(e instanceof Error||"object"==typeof e?t=Array.prototype.slice.call(arguments,1):(t=Array.prototype.slice.call(arguments,0),e=void 0),e&&e.strict||(t=t.map(function(e){return null===e?"null":void 0===e?"undefined":e})),a=t.length>0?t.join("; "):"",this.jse_shortmsg=a,this.jse_summary=a,e&&(i=e.cause,i&&e.cause instanceof Error||(i=e),i&&i instanceof Error&&(this.jse_cause=i,this.jse_summary+=": "+i.message)),this.message=this.jse_summary,Error.call(this,this.jse_summary),Error.captureStackTrace&&(o=e?e.constructorOpt:void 0,o=o||arguments.callee,Error.captureStackTrace(this,o)),this):(t=Array.prototype.slice.call(arguments,0),r=Object.create(n.prototype),n.apply(r,arguments),r)}n.prototype=Error.prototype,n.prototype.name="Widget Error",n.prototype.toString=function(){var e=this.hasOwnProperty("name")&&this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(e+=": "+this.message),e},n.prototype.cause=function(){return this.jse_cause},n.prototype.hasCode=function(e){if(!e)return!1;var t="[object Array]"!==Object.prototype.toString.call(e)?[e]:e;if(0===t.length)return!1;for(var r=this,n=!1;r;){if(r.code&&t.indexOf(r.code)>-1){n=!0;break}r=r.cause()}return n},t.exports=n},{}],86:[function(e,t,r){"use strict";function n(e){if("undefined"==typeof e||null===e)return e;if(Array.isArray(e))return e.slice();if("object"==typeof e){var t={};return Object.keys(e).forEach(function(r){t[r]=e[r]}),t}return e}function i(e,t){var r=e.split("\n");r[0]&&r[0].indexOf(v)>=0&&r.shift();var n=r[t],i=null;if(n){var o=/^\s*(at|.*@)\s*(.+)?$/.exec(n);i=Array.isArray(o)&&o[2]?o[2]:n}return i}function o(e,t){t||(t="    ");var r=e.split(/\r?\n/g);return t+r.join("\n"+t)}function a(e,t){if(t){if(b[t])return;b[t]=!0}console.error(e+"\n")}function s(e){return b[e]}function c(){}function l(){}function u(e){var t="string"==typeof e?P[e.toLowerCase()]:e;return t}function p(e,t,r){if(!(this instanceof p))return new p(e,t);var i;if(void 0!==t&&(i=e,e=t,!(i instanceof p)))throw new TypeError("invalid Logger creation: do not pass a second arg");if(!e)throw new TypeError("options (object) is required");if(i){if(e.name)throw new TypeError("invalid options.name: child cannot set logger name")}else if(!e.name)throw new TypeError("options.name (string) is required");if(e.stream&&e.streams)throw new TypeError('cannot mix "streams" and "stream" options');if(e.streams&&!Array.isArray(e.streams))throw new TypeError("invalid options.streams: must be an array");if(e.serializers&&("object"!=typeof e.serializers||Array.isArray(e.serializers)))throw new TypeError("invalid options.serializers: must be an object");var o,a,s;if(i&&r){this._isSimpleChild=!0,this._level=i._level,this.streams=i.streams,this.serializers=i.serializers,this.src=i.src,o=this.fields={};var l=Object.keys(i.fields);for(s=0;s<l.length;s++)a=l[s],o[a]=i.fields[a];var u=Object.keys(e);for(s=0;s<u.length;s++)a=u[s],o[a]=e[a]}else{var h=this;if(i){for(this._level=i._level,this.streams=[],s=0;s<i.streams.length;s++){var f=n(i.streams[s]);f.closeOnExit=!1,this.streams.push(f)}this.serializers=n(i.serializers),this.src=i.src,this.fields=n(i.fields),e.level&&this.level(e.level)}else this._level=Number.POSITIVE_INFINITY,this.streams=[],this.serializers=null,this.src=!1,this.fields={};e.stream?h.addStream({type:"stream",stream:e.stream,closeOnExit:!1,level:e.level}):e.streams?e.streams.forEach(function(t){h.addStream(t,e.level)}):i&&e.level?this.level(e.level):i||h.addStream({type:"raw",stream:new c,closeOnExit:!1,level:e.level}),e.serializers&&h.addSerializers(e.serializers),e.src&&(this.src=!0),o=n(e),delete o.stream,delete o.level,delete o.streams,delete o.serializers,delete o.src,this.serializers&&this._applySerializers(o),Object.keys(o).forEach(function(e){h.fields[e]=o[e]})}}function h(e){return function(){function t(t){var l;t[0]instanceof Error?(o={err:r.serializers&&r.serializers.err?r.serializers.err(t[0]):p.stdSerializers.err(t[0])},l={err:!0},c=1===t.length?[o.err.message]:Array.prototype.slice.call(t,1)):"object"!=typeof t[0]&&null!==t[0]||Array.isArray(t[0])?(o=null,c=Array.prototype.slice.call(t)):(o=t[0],c=Array.prototype.slice.call(t,1));var u=n(r.fields);u.level=e;var h=o?n(o):null;if(h&&(r.serializers&&r._applySerializers(h,l),Object.keys(h).forEach(function(e){u[e]=h[e]})),u.levelName=A[e],u.msg=y.apply(r,c),u.time||(u.time=new Date),r.src&&!u.src)try{throw new Error(v)}catch(f){var d=i(f.stack,2);d||s("src")||a("Unable to determine src line info","src"),u.src=d||""}return u.v=m,u}var r=this,o=null,c=arguments,l=null;return 0===arguments.length?this._level<=e:void(this._level>e||(l=t(c),this._emit(l)))}}function f(e){var t=e.stack||e.toString();if(e.cause&&"function"==typeof e.cause){var r=e.cause();r&&(t+="\nCaused by: "+f(r))}return t}function d(){var e=[];return function(t,r){return r&&"object"==typeof r?e.indexOf(r)!==-1?"[Circular]":(e.push(r),r):r}}var g="0.2.3",m=0,v="call-stack-error",y=function(e){if(null===e)return"null";if("string"!=typeof e)return e.toString();for(var t=/%[sdj%]/g,r=1,n=arguments,i=n.length,o=String(e).replace(t,function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}break;default:return e}}),a=n[r];r<i;a=n[++r])o+=" "+a;return o},b={};c.prototype.write=function(e){e.level<_?console.log(e):e.level<E?console.info(e):e.level<k?console.warn(e):console.error(e),e.err&&e.err.stack&&console.error(e.err.stack)},l.prototype.write=function(e){function t(e,t){return Array(t+1-(e+"").length).join("0")+e}var r,n="color: DimGray",i="color: SteelBlue",o="color: DimGray; font-style: italic; font-size: 0.9em";r=e.level<x?"color: DeepPink":e.level<_?"color: GoldenRod":e.level<E?"color: DarkTurquoise":e.level<k?"color: Purple":e.level<S?"color: Crimson":"color: Black";var a=e.childName?e.name+"/"+e.childName:e.name,s=A[e.level].toUpperCase();s=Array(6-s.length).join(" ")+s,console.log("[%s:%s:%s:%s] %c%s%c: %s: %c%s %c%s",t(e.time.getHours(),2),t(e.time.getMinutes(),2),t(e.time.getSeconds(),2),t(e.time.getMilliseconds(),4),r,s,n,a,i,e.msg,o,e.src||""),e.err&&e.err.stack&&console.log("%c%s,",r,e.err.stack)};var w=10,x=20,_=30,E=40,k=50,S=60,P={trace:w,debug:x,info:_,warn:E,error:k,fatal:S},A={};Object.keys(P).forEach(function(e){A[P[e]]=e}),p.prototype.addStream=function(e,t){var r=this;switch(null!==t&&void 0!==t||(t=_),e=n(e),!e.type&&e.stream&&(e.type="raw"),e.raw="raw"===e.type,e.level?e.level=u(e.level):e.level=u(t),e.level<r._level&&(r._level=e.level),e.type){case"stream":e.closeOnExit||(e.closeOnExit=!1);break;case"raw":e.closeOnExit||(e.closeOnExit=!1);break;default:throw new TypeError('unknown stream type "'+e.type+'"')}r.streams.push(e),delete r.haveNonRawStreams},p.prototype.addSerializers=function(e){var t=this;t.serializers||(t.serializers={}),Object.keys(e).forEach(function(r){var n=e[r];if("function"!=typeof n)throw new TypeError(y('invalid serializer for "%s" field: must be a function',r));t.serializers[r]=n})},p.prototype.child=function(e,t){return new this.constructor(this,e||{},t)},p.prototype.level=function(e){if(void 0===e)return this._level;for(var t=u(e),r=this.streams.length,n=0;n<r;n++)this.streams[n].level=t;this._level=t},p.prototype.levels=function(e,t){if(void 0===e)return this.streams.map(function(e){return e.level});var r;if("number"==typeof e){if(r=this.streams[e],void 0===r)throw new Error("invalid stream index: "+e)}else{for(var n=this.streams.length,i=0;i<n;i++){var o=this.streams[i];if(o.name===e){r=o;break}}if(!r)throw new Error(y('no stream with name "%s"',e))}if(void 0===t)return r.level;var a=u(t);r.level=a,a<this._level&&(this._level=a)},p.prototype._applySerializers=function(e,t){var r=this;Object.keys(this.serializers).forEach(function(n){if(!(void 0===e[n]||t&&t[n]))try{e[n]=r.serializers[n](e[n])}catch(i){a(y('bunyan: ERROR: Exception thrown from the "%s" Bunyan serializer. This should never happen. This is a bugin that serializer function.\n%s',n,i.stack||i)),e[n]=y('(Error in Bunyan log "%s" serializer broke field. See stderr for details.)',n)}})},p.prototype._emit=function(e,t){var r;if(void 0===this.haveNonRawStreams)for(this.haveNonRawStreams=!1,r=0;r<this.streams.length;r++)if(!this.streams[r].raw){this.haveNonRawStreams=!0;break}var n;if(t||this.haveNonRawStreams)try{n=JSON.stringify(e,d())+"\n"}catch(i){var s=i.stack.split(/\n/g,2).join("\n");a('bunyan: ERROR: Exception in `JSON.stringify(rec)`. You can install the "safe-json-stringify" module to have Bunyan fallback to safer stringification. Record:\n'+o(y("%s\n%s",e,i.stack)),s),n=y("(Exception in JSON.stringify(rec): %j. See stderr for details.)\n",i.message)}if(t)return n;var c=e.level;for(r=0;r<this.streams.length;r++){var l=this.streams[r];l.level<=c&&l.stream.write(l.raw?e:n)}return n},p.prototype.trace=h(w),p.prototype.debug=h(x),p.prototype.info=h(_),p.prototype.warn=h(E),p.prototype.error=h(k),p.prototype.fatal=h(S),p.stdSerializers={},p.stdSerializers.err=function(e){if(!e||!e.stack)return e;var t={message:e.message,name:e.name,stack:f(e),code:e.code,signal:e.signal};return t},t.exports=p,t.exports.TRACE=w,t.exports.DEBUG=x,t.exports.INFO=_,t.exports.WARN=E,t.exports.ERROR=k,t.exports.FATAL=S,t.exports.resolveLevel=u,t.exports.levelFromName=P,t.exports.nameFromLevel=A,t.exports.VERSION=g,t.exports.LOG_VERSION=m,t.exports.createLogger=function(e){return new p(e)},t.exports.safeCycles=d,t.exports.ConsoleFormattedStream=l,t.exports.ConsoleRawStream=c},{}],87:[function(e,t,r){"use strict";function n(e,t,r){var n="";if(e=parseInt(e,10),t=parseInt(t,10),isNaN(e)||isNaN(t))return"";var i,o=e>t?-1:1,a=Math.abs(t-e)+1;r.data&&(i=b.createFrame(r.data));for(var s=0;s<a;s++)i&&(i.index=e+s*o,i.from=e,i.to=t),n+=r.fn(this,{data:i});return n}function i(e,t){if(this.preferences)return t.fn(this.preferences[e])}function o(e){if(this.preferences){var t=this.preferences[e];return t?t.value:null}return null}function a(e,t){return Math.floor(parseFloat(e)/parseFloat(t))}function s(e,t){return e==t}function c(){for(var e=Array.prototype.slice.call(arguments),t=e[e.length-1],r=e.slice(0,e.length-1),n=0;n<r.length;n++)if(this.viewhints&&this.viewhints.indexOf(r[n])>=0)return t.fn(this);return t.inverse(this)}function l(e){var t={designmode:["designModeOnly"],role:["admin","manager","user","none"],input:["text-input","checkbox","select-one"],order:[],options:[]},r=this.viewhints;if(r&&r.length&&t[e]){var n=e.length,i=r.filter(function(r){return t[e].indexOf(r)!==-1||r.slice(0,n)===e})[0];if(i&&i.slice(0,n)===e){var o=i.slice(n,n+1);if("order"!==e||"-"!==o&&"="!==o)i="="===o?i.slice(n+1):void 0;else{var a=i.slice(n+1),s=parseFloat(a);isNaN(s)||(a=s),i=a}}return"designmode"===e&&(i=!!i),i}}function u(e,t){var r="";if(e&&"object"==typeof e&&(t=e,e=null),!e&&(e=l.call(this,"options"),!e))return r;var n=t.data&&t.data.intl||{},i=n.options||{},o=i[e];if(!Array.isArray(o))return r;var a=o.length-1;return o.reduce(function(e,r,n){var i=b.createFrame(t.data||{});return i.key=r,i.index=n,i.first=0===n,i.last=n===a,e+=t.fn({key:r},{data:i})},"")}function p(){return Array.prototype.slice.call(arguments,0,arguments.length-1).some(function(e){return!!e})}function h(){return Array.prototype.slice.call(arguments,0,arguments.length-1).every(function(e){return!!e})}function f(e){return!e}function d(e,t){var r=t.data;return r.cxpConfig?r.cxpConfig[e]:void 0}function g(e){var t=this.viewmodes||[],r=e?e.toLowerCase():"";return t.indexOf(r)>-1}function m(){return this.viewmodes&&this.viewmodes.length?this.viewmodes[0]:"none"}function v(e){var t=this.preferences,r=Object.keys(t).length>0&&this.securityProfile&&w[this.securityProfile]>=w.CONTRIBUTOR&&Object.keys(t).some(function(e){return t[e].viewhints&&t[e].viewhints.length>0});return r?e.fn(this):e.inverse(this)}function y(e,t){if("string"!=typeof e)return[];var r=new RegExp(t);return"string"!=typeof t&&(r=/\s*,+\s*|\s+/g),e.trim().split(r)}var b=e("handlebars/dist/handlebars.min"),w={ADMIN:16,CREATOR:8,COLLABORATOR:4,CONTRIBUTOR:2,CONSUMER:1,NONE:0};t.exports={range:n,withPreference:i,getPreferenceValue:o,divide:a,equal:s,hasViewHint:c,getViewHint:l,eachOption:u,or:p,and:h,not:f,
getConfig:d,hasViewmode:g,currentViewmode:m,allowEdit:v,split:y}},{"handlebars/dist/handlebars.min":88}],88:[function(e,t,r){!function(e,n){"object"==typeof r&&"object"==typeof t?t.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof r?r.Handlebars=n():e.Handlebars=n()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(){var e=v();return e.compile=function(t,r){return u.compile(t,r,e)},e.precompile=function(t,r){return u.precompile(t,r,e)},e.AST=c["default"],e.Compiler=u.Compiler,e.JavaScriptCompiler=h["default"],e.Parser=l.parser,e.parse=l.parse,e}var i=r(1)["default"];t.__esModule=!0;var o=r(2),a=i(o),s=r(21),c=i(s),l=r(22),u=r(27),p=r(28),h=i(p),f=r(25),d=i(f),g=r(20),m=i(g),v=a["default"].create,y=n();y.create=n,m["default"](y),y.Visitor=d["default"],y["default"]=y,t["default"]=y,e.exports=t["default"]},function(e,t){"use strict";t["default"]=function(e){return e&&e.__esModule?e:{"default":e}},t.__esModule=!0},function(e,t,r){"use strict";function n(){var e=new s.HandlebarsEnvironment;return f.extend(e,s),e.SafeString=l["default"],e.Exception=p["default"],e.Utils=f,e.escapeExpression=f.escapeExpression,e.VM=g,e.template=function(t){return g.template(t,e)},e}var i=r(3)["default"],o=r(1)["default"];t.__esModule=!0;var a=r(4),s=i(a),c=r(18),l=o(c),u=r(6),p=o(u),h=r(5),f=i(h),d=r(19),g=i(d),m=r(20),v=o(m),y=n();y.create=n,v["default"](y),y["default"]=y,t["default"]=y,e.exports=t["default"]},function(e,t){"use strict";t["default"]=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t},t.__esModule=!0},function(e,t,r){"use strict";function n(e,t,r){this.helpers=e||{},this.partials=t||{},this.decorators=r||{},c.registerDefaultHelpers(this),l.registerDefaultDecorators(this)}var i=r(1)["default"];t.__esModule=!0,t.HandlebarsEnvironment=n;var o=r(5),a=r(6),s=i(a),c=r(7),l=r(15),u=r(17),p=i(u),h="4.0.5";t.VERSION=h;var f=7;t.COMPILER_REVISION=f;var d={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};t.REVISION_CHANGES=d;var g="[object Object]";n.prototype={constructor:n,logger:p["default"],log:p["default"].log,registerHelper:function(e,t){if(o.toString.call(e)===g){if(t)throw new s["default"]("Arg not supported with multiple helpers");o.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(o.toString.call(e)===g)o.extend(this.partials,e);else{if("undefined"==typeof t)throw new s["default"]('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(o.toString.call(e)===g){if(t)throw new s["default"]("Arg not supported with multiple decorators");o.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]}};var m=p["default"].log;t.log=m,t.createFrame=o.createFrame,t.logger=p["default"]},function(e,t){"use strict";function r(e){return u[e]}function n(e){for(var t=1;t<arguments.length;t++)for(var r in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],r)&&(e[r]=arguments[t][r]);return e}function i(e,t){for(var r=0,n=e.length;n>r;r++)if(e[r]===t)return r;return-1}function o(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return h.test(e)?e.replace(p,r):e}function a(e){return!e&&0!==e||!(!g(e)||0!==e.length)}function s(e){var t=n({},e);return t._parent=e,t}function c(e,t){return e.path=t,e}function l(e,t){return(e?e+".":"")+t}t.__esModule=!0,t.extend=n,t.indexOf=i,t.escapeExpression=o,t.isEmpty=a,t.createFrame=s,t.blockParams=c,t.appendContextPath=l;var u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},p=/[&<>"'`=]/g,h=/[&<>"'`=]/,f=Object.prototype.toString;t.toString=f;var d=function(e){return"function"==typeof e};d(/x/)&&(t.isFunction=d=function(e){return"function"==typeof e&&"[object Function]"===f.call(e)}),t.isFunction=d;var g=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===f.call(e)};t.isArray=g},function(e,t){"use strict";function r(e,t){var i=t&&t.loc,o=void 0,a=void 0;i&&(o=i.start.line,a=i.start.column,e+=" - "+o+":"+a);for(var s=Error.prototype.constructor.call(this,e),c=0;c<n.length;c++)this[n[c]]=s[n[c]];Error.captureStackTrace&&Error.captureStackTrace(this,r),i&&(this.lineNumber=o,this.column=a)}t.__esModule=!0;var n=["description","fileName","lineNumber","message","name","number","stack"];r.prototype=new Error,t["default"]=r,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){a["default"](e),c["default"](e),u["default"](e),h["default"](e),d["default"](e),m["default"](e),y["default"](e)}var i=r(1)["default"];t.__esModule=!0,t.registerDefaultHelpers=n;var o=r(8),a=i(o),s=r(9),c=i(s),l=r(10),u=i(l),p=r(11),h=i(p),f=r(12),d=i(f),g=r(13),m=i(g),v=r(14),y=i(v)},function(e,t,r){"use strict";t.__esModule=!0;var n=r(5);t["default"]=function(e){e.registerHelper("blockHelperMissing",function(t,r){var i=r.inverse,o=r.fn;if(t===!0)return o(this);if(t===!1||null==t)return i(this);if(n.isArray(t))return t.length>0?(r.ids&&(r.ids=[r.name]),e.helpers.each(t,r)):i(this);if(r.data&&r.ids){var a=n.createFrame(r.data);a.contextPath=n.appendContextPath(r.data.contextPath,r.name),r={data:a}}return o(t,r)})},e.exports=t["default"]},function(e,t,r){"use strict";var n=r(1)["default"];t.__esModule=!0;var i=r(5),o=r(6),a=n(o);t["default"]=function(e){e.registerHelper("each",function(e,t){function r(t,r,o){l&&(l.key=t,l.index=r,l.first=0===r,l.last=!!o,u&&(l.contextPath=u+t)),c+=n(e[t],{data:l,blockParams:i.blockParams([e[t],t],[u+t,null])})}if(!t)throw new a["default"]("Must pass iterator to #each");var n=t.fn,o=t.inverse,s=0,c="",l=void 0,u=void 0;if(t.data&&t.ids&&(u=i.appendContextPath(t.data.contextPath,t.ids[0])+"."),i.isFunction(e)&&(e=e.call(this)),t.data&&(l=i.createFrame(t.data)),e&&"object"==typeof e)if(i.isArray(e))for(var p=e.length;p>s;s++)s in e&&r(s,s,s===e.length-1);else{var h=void 0;for(var f in e)e.hasOwnProperty(f)&&(void 0!==h&&r(h,s-1),h=f,s++);void 0!==h&&r(h,s-1,!0)}return 0===s&&(c=o(this)),c})},e.exports=t["default"]},function(e,t,r){"use strict";var n=r(1)["default"];t.__esModule=!0;var i=r(6),o=n(i);t["default"]=function(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new o["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')})},e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=!0;var n=r(5);t["default"]=function(e){e.registerHelper("if",function(e,t){return n.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||n.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,r){return e.helpers["if"].call(this,t,{fn:r.inverse,inverse:r.fn,hash:r.hash})})},e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e){e.registerHelper("log",function(){for(var t=[void 0],r=arguments[arguments.length-1],n=0;n<arguments.length-1;n++)t.push(arguments[n]);var i=1;null!=r.hash.level?i=r.hash.level:r.data&&null!=r.data.level&&(i=r.data.level),t[0]=i,e.log.apply(e,t)})},e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e){e.registerHelper("lookup",function(e,t){return e&&e[t]})},e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=!0;var n=r(5);t["default"]=function(e){e.registerHelper("with",function(e,t){n.isFunction(e)&&(e=e.call(this));var r=t.fn;if(n.isEmpty(e))return t.inverse(this);var i=t.data;return t.data&&t.ids&&(i=n.createFrame(t.data),i.contextPath=n.appendContextPath(t.data.contextPath,t.ids[0])),r(e,{data:i,blockParams:n.blockParams([e],[i&&i.contextPath])})})},e.exports=t["default"]},function(e,t,r){"use strict";function n(e){a["default"](e)}var i=r(1)["default"];t.__esModule=!0,t.registerDefaultDecorators=n;var o=r(16),a=i(o)},function(e,t,r){"use strict";t.__esModule=!0;var n=r(5);t["default"]=function(e){e.registerDecorator("inline",function(e,t,r,i){var o=e;return t.partials||(t.partials={},o=function(i,o){var a=r.partials;r.partials=n.extend({},a,t.partials);var s=e(i,o);return r.partials=a,s}),t.partials[i.args[0]]=i.fn,o})},e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=!0;var n=r(5),i={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=n.indexOf(i.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=i.lookupLevel(e),"undefined"!=typeof console&&i.lookupLevel(i.level)<=e){var t=i.methodMap[e];console[t]||(t="log");for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;r>o;o++)n[o-1]=arguments[o];console[t].apply(console,n)}}};t["default"]=i,e.exports=t["default"]},function(e,t){"use strict";function r(e){this.string=e}t.__esModule=!0,r.prototype.toString=r.prototype.toHTML=function(){return""+this.string},t["default"]=r,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){var t=e&&e[0]||1,r=v.COMPILER_REVISION;if(t!==r){if(r>t){var n=v.REVISION_CHANGES[r],i=v.REVISION_CHANGES[t];throw new m["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+i+").")}throw new m["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function i(e,t){function r(r,n,i){i.hash&&(n=d.extend({},n,i.hash),i.ids&&(i.ids[0]=!0)),r=t.VM.resolvePartial.call(this,r,n,i);var o=t.VM.invokePartial.call(this,r,n,i);if(null==o&&t.compile&&(i.partials[i.name]=t.compile(r,e.compilerOptions,t),o=i.partials[i.name](n,i)),null!=o){if(i.indent){for(var a=o.split("\n"),s=0,c=a.length;c>s&&(a[s]||s+1!==c);s++)a[s]=i.indent+a[s];o=a.join("\n")}return o}throw new m["default"]("The partial "+i.name+" could not be compiled when running in runtime-only mode")}function n(t){function r(t){return""+e.main(i,t,i.helpers,i.partials,a,c,s)}var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=o.data;n._setup(o),!o.partial&&e.useData&&(a=l(t,a));var s=void 0,c=e.useBlockParams?[]:void 0;return e.useDepths&&(s=o.depths?t!==o.depths[0]?[t].concat(o.depths):o.depths:[t]),(r=u(e.main,r,i,o.depths||[],a,c))(t,o)}if(!t)throw new m["default"]("No environment passed to template");if(!e||!e.main)throw new m["default"]("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var i={strict:function(e,t){if(!(t in e))throw new m["default"]('"'+t+'" not defined in '+e);return e[t]},lookup:function(e,t){for(var r=e.length,n=0;r>n;n++)if(e[n]&&null!=e[n][t])return e[n][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:d.escapeExpression,invokePartial:r,fn:function(t){var r=e[t];return r.decorator=e[t+"_d"],r},programs:[],program:function(e,t,r,n,i){var a=this.programs[e],s=this.fn(e);return t||i||n||r?a=o(this,e,s,t,r,n,i):a||(a=this.programs[e]=o(this,e,s)),a},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var r=e||t;return e&&t&&e!==t&&(r=d.extend({},t,e)),r},noop:t.VM.noop,compilerInfo:e.compiler};return n.isTop=!0,n._setup=function(r){r.partial?(i.helpers=r.helpers,i.partials=r.partials,i.decorators=r.decorators):(i.helpers=i.merge(r.helpers,t.helpers),e.usePartial&&(i.partials=i.merge(r.partials,t.partials)),(e.usePartial||e.useDecorators)&&(i.decorators=i.merge(r.decorators,t.decorators)))},n._child=function(t,r,n,a){if(e.useBlockParams&&!n)throw new m["default"]("must pass block params");if(e.useDepths&&!a)throw new m["default"]("must pass parent depths");return o(i,t,e[t],r,0,n,a)},n}function o(e,t,r,n,i,o,a){function s(t){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=a;return a&&t!==a[0]&&(s=[t].concat(a)),r(e,t,e.helpers,e.partials,i.data||n,o&&[i.blockParams].concat(o),s)}return s=u(r,s,e,a,n,o),s.program=t,s.depth=a?a.length:0,s.blockParams=i||0,s}function a(e,t,r){return e?e.call||r.name||(r.name=e,e=r.partials[e]):e="@partial-block"===r.name?r.data["partial-block"]:r.partials[r.name],e}function s(e,t,r){r.partial=!0,r.ids&&(r.data.contextPath=r.ids[0]||r.data.contextPath);var n=void 0;if(r.fn&&r.fn!==c&&(r.data=v.createFrame(r.data),n=r.data["partial-block"]=r.fn,n.partials&&(r.partials=d.extend({},r.partials,n.partials))),void 0===e&&n&&(e=n),void 0===e)throw new m["default"]("The partial "+r.name+" could not be found");return e instanceof Function?e(t,r):void 0}function c(){return""}function l(e,t){return t&&"root"in t||(t=t?v.createFrame(t):{},t.root=e),t}function u(e,t,r,n,i,o){if(e.decorator){var a={};t=e.decorator(t,a,r,n&&n[0],i,o,n),d.extend(t,a)}return t}var p=r(3)["default"],h=r(1)["default"];t.__esModule=!0,t.checkRevision=n,t.template=i,t.wrapProgram=o,t.resolvePartial=a,t.invokePartial=s,t.noop=c;var f=r(5),d=p(f),g=r(6),m=h(g),v=r(4)},function(e,t){(function(r){"use strict";t.__esModule=!0,t["default"]=function(e){var t="undefined"!=typeof r?r:window,n=t.Handlebars;e.noConflict=function(){return t.Handlebars===e&&(t.Handlebars=n),e}},e.exports=t["default"]}).call(t,function(){return this}())},function(e,t){"use strict";t.__esModule=!0;var r={helpers:{helperExpression:function(e){return"SubExpression"===e.type||("MustacheStatement"===e.type||"BlockStatement"===e.type)&&!!(e.params&&e.params.length||e.hash)},scopedId:function(e){return/^\.|this\b/.test(e.original)},simpleId:function(e){return 1===e.parts.length&&!r.helpers.scopedId(e)&&!e.depth}}};t["default"]=r,e.exports=t["default"]},function(e,t,r){"use strict";function n(e,t){if("Program"===e.type)return e;s["default"].yy=f,f.locInfo=function(e){return new f.SourceLocation(t&&t.srcName,e)};var r=new l["default"](t);return r.accept(s["default"].parse(e))}var i=r(1)["default"],o=r(3)["default"];t.__esModule=!0,t.parse=n;var a=r(23),s=i(a),c=r(24),l=i(c),u=r(26),p=o(u),h=r(5);t.parser=s["default"];var f={};h.extend(f,p)},function(e,t){"use strict";var r=function(){function e(){this.yy={}}var t={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition_plus0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,1],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(e,t,r,n,i,o,a){var s=o.length-1;switch(i){case 1:return o[s-1];case 2:this.$=n.prepareProgram(o[s]);break;case 3:this.$=o[s];break;case 4:this.$=o[s];break;case 5:this.$=o[s];break;case 6:this.$=o[s];break;case 7:this.$=o[s];break;case 8:this.$=o[s];break;case 9:this.$={type:"CommentStatement",value:n.stripComment(o[s]),strip:n.stripFlags(o[s],o[s]),loc:n.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:o[s],value:o[s],loc:n.locInfo(this._$)};break;case 11:this.$=n.prepareRawBlock(o[s-2],o[s-1],o[s],this._$);break;case 12:this.$={path:o[s-3],params:o[s-2],hash:o[s-1]};break;case 13:this.$=n.prepareBlock(o[s-3],o[s-2],o[s-1],o[s],!1,this._$);break;case 14:this.$=n.prepareBlock(o[s-3],o[s-2],o[s-1],o[s],!0,this._$);break;case 15:this.$={open:o[s-5],path:o[s-4],params:o[s-3],hash:o[s-2],blockParams:o[s-1],strip:n.stripFlags(o[s-5],o[s])};break;case 16:this.$={path:o[s-4],params:o[s-3],hash:o[s-2],blockParams:o[s-1],strip:n.stripFlags(o[s-5],o[s])};break;case 17:this.$={path:o[s-4],params:o[s-3],hash:o[s-2],blockParams:o[s-1],strip:n.stripFlags(o[s-5],o[s])};break;case 18:this.$={strip:n.stripFlags(o[s-1],o[s-1]),program:o[s]};break;case 19:var c=n.prepareBlock(o[s-2],o[s-1],o[s],o[s],!1,this._$),l=n.prepareProgram([c],o[s-1].loc);l.chained=!0,this.$={strip:o[s-2].strip,program:l,chain:!0};break;case 20:this.$=o[s];break;case 21:this.$={path:o[s-1],strip:n.stripFlags(o[s-2],o[s])};break;case 22:this.$=n.prepareMustache(o[s-3],o[s-2],o[s-1],o[s-4],n.stripFlags(o[s-4],o[s]),this._$);break;case 23:this.$=n.prepareMustache(o[s-3],o[s-2],o[s-1],o[s-4],n.stripFlags(o[s-4],o[s]),this._$);break;case 24:this.$={type:"PartialStatement",name:o[s-3],params:o[s-2],hash:o[s-1],indent:"",strip:n.stripFlags(o[s-4],o[s]),loc:n.locInfo(this._$)};break;case 25:this.$=n.preparePartialBlock(o[s-2],o[s-1],o[s],this._$);break;case 26:this.$={path:o[s-3],params:o[s-2],hash:o[s-1],strip:n.stripFlags(o[s-4],o[s])};break;case 27:this.$=o[s];break;case 28:this.$=o[s];break;case 29:this.$={type:"SubExpression",path:o[s-3],params:o[s-2],hash:o[s-1],loc:n.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:o[s],loc:n.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:n.id(o[s-2]),value:o[s],loc:n.locInfo(this._$)};break;case 32:this.$=n.id(o[s-1]);break;case 33:this.$=o[s];break;case 34:this.$=o[s];break;case 35:this.$={type:"StringLiteral",value:o[s],original:o[s],loc:n.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(o[s]),original:Number(o[s]),loc:n.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===o[s],original:"true"===o[s],loc:n.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:n.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:n.locInfo(this._$)};break;case 40:this.$=o[s];break;case 41:this.$=o[s];break;case 42:this.$=n.preparePath(!0,o[s],this._$);break;case 43:this.$=n.preparePath(!1,o[s],this._$);break;case 44:o[s-2].push({part:n.id(o[s]),original:o[s],separator:o[s-1]}),this.$=o[s-2];break;case 45:this.$=[{part:n.id(o[s]),original:o[s]}];break;case 46:this.$=[];break;case 47:o[s-1].push(o[s]);break;case 48:this.$=[o[s]];break;case 49:o[s-1].push(o[s]);break;case 50:this.$=[];break;case 51:o[s-1].push(o[s]);break;case 58:this.$=[];break;case 59:o[s-1].push(o[s]);break;case 64:this.$=[];break;case 65:o[s-1].push(o[s]);break;case 70:this.$=[];break;case 71:o[s-1].push(o[s]);break;case 78:this.$=[];break;case 79:o[s-1].push(o[s]);break;case 82:this.$=[];break;case 83:o[s-1].push(o[s]);break;case 86:this.$=[];break;case 87:o[s-1].push(o[s]);break;case 90:this.$=[];break;case 91:o[s-1].push(o[s]);break;case 94:this.$=[];break;case 95:o[s-1].push(o[s]);break;case 98:this.$=[o[s]];break;case 99:o[s-1].push(o[s]);break;case 100:this.$=[o[s]];break;case 101:o[s-1].push(o[s])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{13:40,15:[1,20],17:39},{20:42,56:41,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:45,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:48,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:42,56:49,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:50,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,51]},{72:[1,35],86:52},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:53,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:54,38:56,39:[1,58],43:57,44:[1,59],45:55,47:[2,54]},{28:60,43:61,44:[1,59],47:[2,56]},{13:63,15:[1,20],18:[1,62]},{15:[2,48],18:[2,48]},{33:[2,86],57:64,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:65,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:66,47:[1,67]},{30:68,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:69,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:70,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:71,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:75,33:[2,80],50:72,63:73,64:76,65:[1,44],69:74,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,80]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,51]},{20:75,53:81,54:[2,84],63:82,64:76,65:[1,44],69:83,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:84,47:[1,67]},{47:[2,55]},{4:85,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:86,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:87,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:88,47:[1,67]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:75,33:[2,88],58:89,63:90,64:76,65:[1,44],69:91,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:92,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:93,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,31:94,33:[2,60],63:95,64:76,65:[1,44],69:96,70:77,71:78,72:[1,79],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,66],36:97,63:98,64:76,65:[1,44],69:99,70:77,71:78,72:[1,79],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,22:100,23:[2,52],63:101,64:76,65:[1,44],69:102,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,92],62:103,63:104,64:76,65:[1,44],69:105,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,106]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:107,72:[1,108],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,109],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,110]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:56,39:[1,58],43:57,44:[1,59],45:112,46:111,47:[2,76]},{33:[2,70],40:113,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,114]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:75,63:116,64:76,65:[1,44],67:115,68:[2,96],69:117,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,118]},{32:119,33:[2,62],74:120,75:[1,121]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:122,74:123,75:[1,121]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,124]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,125]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,109]},{20:75,63:126,64:76,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:75,33:[2,72],41:127,63:128,64:76,65:[1,44],69:129,70:77,71:78,72:[1,79],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,130]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,131]},{33:[2,63]},{72:[1,133],76:132},{33:[1,134]},{33:[2,69]},{15:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:135,74:136,75:[1,121]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,138],77:[1,137]
},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,139]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],55:[2,55],57:[2,20],61:[2,57],74:[2,81],83:[2,85],87:[2,18],91:[2,89],102:[2,53],105:[2,93],111:[2,19],112:[2,77],117:[2,97],120:[2,63],123:[2,69],124:[2,12],136:[2,75],137:[2,32]},parseError:function(e,t){throw new Error(e)},parse:function(e){function t(){var e;return e=r.lexer.lex()||1,"number"!=typeof e&&(e=r.symbols_[e]||e),e}var r=this,n=[0],i=[null],o=[],a=this.table,s="",c=0,l=0,u=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var p=this.lexer.yylloc;o.push(p);var h=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var f,d,g,m,v,y,b,w,x,_={};;){if(g=n[n.length-1],this.defaultActions[g]?m=this.defaultActions[g]:((null===f||"undefined"==typeof f)&&(f=t()),m=a[g]&&a[g][f]),"undefined"==typeof m||!m.length||!m[0]){var E="";if(!u){x=[];for(y in a[g])this.terminals_[y]&&y>2&&x.push("'"+this.terminals_[y]+"'");E=this.lexer.showPosition?"Parse error on line "+(c+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+x.join(", ")+", got '"+(this.terminals_[f]||f)+"'":"Parse error on line "+(c+1)+": Unexpected "+(1==f?"end of input":"'"+(this.terminals_[f]||f)+"'"),this.parseError(E,{text:this.lexer.match,token:this.terminals_[f]||f,line:this.lexer.yylineno,loc:p,expected:x})}}if(m[0]instanceof Array&&m.length>1)throw new Error("Parse Error: multiple actions possible at state: "+g+", token: "+f);switch(m[0]){case 1:n.push(f),i.push(this.lexer.yytext),o.push(this.lexer.yylloc),n.push(m[1]),f=null,d?(f=d,d=null):(l=this.lexer.yyleng,s=this.lexer.yytext,c=this.lexer.yylineno,p=this.lexer.yylloc,u>0&&u--);break;case 2:if(b=this.productions_[m[1]][1],_.$=i[i.length-b],_._$={first_line:o[o.length-(b||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(b||1)].first_column,last_column:o[o.length-1].last_column},h&&(_._$.range=[o[o.length-(b||1)].range[0],o[o.length-1].range[1]]),v=this.performAction.call(_,s,l,c,this.yy,m[1],i,o),"undefined"!=typeof v)return v;b&&(n=n.slice(0,-1*b*2),i=i.slice(0,-1*b),o=o.slice(0,-1*b)),n.push(this.productions_[m[1]][0]),i.push(_.$),o.push(_._$),w=a[n[n.length-2]][n[n.length-1]],n.push(w);break;case 3:return!0}}return!0}},r=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,r,n,i;this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),a=0;a<o.length&&(r=this._input.match(this.rules[o[a]]),!r||t&&!(r[0].length>t[0].length)||(t=r,n=a,this.options.flex));a++);return t?(i=t[0].match(/(?:\r\n?|\n).*/g),i&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,o[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e?e:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return"undefined"!=typeof e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}};return e.options={},e.performAction=function(e,t,r,n){function i(e,r){return t.yytext=t.yytext.substr(e,t.yyleng-r)}switch(r){case 0:if("\\\\"===t.yytext.slice(-2)?(i(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(i(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(t.yytext=t.yytext.substr(5,t.yyleng-9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:return this.popState(),44;case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(t.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:return 72;case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return t.yytext=i(1,2).replace(/\\"/g,'"'),80;case 32:return t.yytext=i(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:return 82;case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return t.yytext=t.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],e.conditions={mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}},e}();return t.lexer=r,e.prototype=t,t.Parser=e,new e}();t.__esModule=!0,t["default"]=r},function(e,t,r){"use strict";function n(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=e}function i(e,t,r){void 0===t&&(t=e.length);var n=e[t-1],i=e[t-2];return n?"ContentStatement"===n.type?(i||!r?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(n.original):void 0:r}function o(e,t,r){void 0===t&&(t=-1);var n=e[t+1],i=e[t+2];return n?"ContentStatement"===n.type?(i||!r?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(n.original):void 0:r}function a(e,t,r){var n=e[null==t?0:t+1];if(n&&"ContentStatement"===n.type&&(r||!n.rightStripped)){var i=n.value;n.value=n.value.replace(r?/^\s+/:/^[ \t]*\r?\n?/,""),n.rightStripped=n.value!==i}}function s(e,t,r){var n=e[null==t?e.length-1:t-1];if(n&&"ContentStatement"===n.type&&(r||!n.leftStripped)){var i=n.value;return n.value=n.value.replace(r?/\s+$/:/[ \t]+$/,""),n.leftStripped=n.value!==i,n.leftStripped}}var c=r(1)["default"];t.__esModule=!0;var l=r(25),u=c(l);n.prototype=new u["default"],n.prototype.Program=function(e){var t=!this.options.ignoreStandalone,r=!this.isRootSeen;this.isRootSeen=!0;for(var n=e.body,c=0,l=n.length;l>c;c++){var u=n[c],p=this.accept(u);if(p){var h=i(n,c,r),f=o(n,c,r),d=p.openStandalone&&h,g=p.closeStandalone&&f,m=p.inlineStandalone&&h&&f;p.close&&a(n,c,!0),p.open&&s(n,c,!0),t&&m&&(a(n,c),s(n,c)&&"PartialStatement"===u.type&&(u.indent=/([ \t]+$)/.exec(n[c-1].original)[1])),t&&d&&(a((u.program||u.inverse).body),s(n,c)),t&&g&&(a(n,c),s((u.inverse||u.program).body))}}return e},n.prototype.BlockStatement=n.prototype.DecoratorBlock=n.prototype.PartialBlockStatement=function(e){this.accept(e.program),this.accept(e.inverse);var t=e.program||e.inverse,r=e.program&&e.inverse,n=r,c=r;if(r&&r.chained)for(n=r.body[0].program;c.chained;)c=c.body[c.body.length-1].program;var l={open:e.openStrip.open,close:e.closeStrip.close,openStandalone:o(t.body),closeStandalone:i((n||t).body)};if(e.openStrip.close&&a(t.body,null,!0),r){var u=e.inverseStrip;u.open&&s(t.body,null,!0),u.close&&a(n.body,null,!0),e.closeStrip.open&&s(c.body,null,!0),!this.options.ignoreStandalone&&i(t.body)&&o(n.body)&&(s(t.body),a(n.body))}else e.closeStrip.open&&s(t.body,null,!0);return l},n.prototype.Decorator=n.prototype.MustacheStatement=function(e){return e.strip},n.prototype.PartialStatement=n.prototype.CommentStatement=function(e){var t=e.strip||{};return{inlineStandalone:!0,open:t.open,close:t.close}},t["default"]=n,e.exports=t["default"]},function(e,t,r){"use strict";function n(){this.parents=[]}function i(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash")}function o(e){i.call(this,e),this.acceptKey(e,"program"),this.acceptKey(e,"inverse")}function a(e){this.acceptRequired(e,"name"),this.acceptArray(e.params),this.acceptKey(e,"hash")}var s=r(1)["default"];t.__esModule=!0;var c=r(6),l=s(c);n.prototype={constructor:n,mutating:!1,acceptKey:function(e,t){var r=this.accept(e[t]);if(this.mutating){if(r&&!n.prototype[r.type])throw new l["default"]('Unexpected node type "'+r.type+'" found when accepting '+t+" on "+e.type);e[t]=r}},acceptRequired:function(e,t){if(this.acceptKey(e,t),!e[t])throw new l["default"](e.type+" requires "+t)},acceptArray:function(e){for(var t=0,r=e.length;r>t;t++)this.acceptKey(e,t),e[t]||(e.splice(t,1),t--,r--)},accept:function(e){if(e){if(!this[e.type])throw new l["default"]("Unknown type: "+e.type,e);this.current&&this.parents.unshift(this.current),this.current=e;var t=this[e.type](e);return this.current=this.parents.shift(),!this.mutating||t?t:t!==!1?e:void 0}},Program:function(e){this.acceptArray(e.body)},MustacheStatement:i,Decorator:i,BlockStatement:o,DecoratorBlock:o,PartialStatement:a,PartialBlockStatement:function(e){a.call(this,e),this.acceptKey(e,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:i,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(e){this.acceptArray(e.pairs)},HashPair:function(e){this.acceptRequired(e,"value")}},t["default"]=n,e.exports=t["default"]},function(e,t,r){"use strict";function n(e,t){if(t=t.path?t.path.original:t,e.path.original!==t){var r={loc:e.path.loc};throw new m["default"](e.path.original+" doesn't match "+t,r)}}function i(e,t){this.source=e,this.start={line:t.first_line,column:t.first_column},this.end={line:t.last_line,column:t.last_column}}function o(e){return/^\[.*\]$/.test(e)?e.substr(1,e.length-2):e}function a(e,t){return{open:"~"===e.charAt(2),close:"~"===t.charAt(t.length-3)}}function s(e){return e.replace(/^\{\{~?\!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function c(e,t,r){r=this.locInfo(r);for(var n=e?"@":"",i=[],o=0,a="",s=0,c=t.length;c>s;s++){var l=t[s].part,u=t[s].original!==l;if(n+=(t[s].separator||"")+l,u||".."!==l&&"."!==l&&"this"!==l)i.push(l);else{if(i.length>0)throw new m["default"]("Invalid path: "+n,{loc:r});".."===l&&(o++,a+="../")}}return{type:"PathExpression",data:e,depth:o,parts:i,original:n,loc:r}}function l(e,t,r,n,i,o){var a=n.charAt(3)||n.charAt(2),s="{"!==a&&"&"!==a,c=/\*/.test(n);return{type:c?"Decorator":"MustacheStatement",path:e,params:t,hash:r,escaped:s,strip:i,loc:this.locInfo(o)}}function u(e,t,r,i){n(e,r),i=this.locInfo(i);var o={type:"Program",body:t,strip:{},loc:i};return{type:"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:o,openStrip:{},inverseStrip:{},closeStrip:{},loc:i}}function p(e,t,r,i,o,a){i&&i.path&&n(e,i);var s=/\*/.test(e.open);t.blockParams=e.blockParams;var c=void 0,l=void 0;if(r){if(s)throw new m["default"]("Unexpected inverse block on decorator",r);r.chain&&(r.program.body[0].closeStrip=i.strip),l=r.strip,c=r.program}return o&&(o=c,c=t,t=o),{type:s?"DecoratorBlock":"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:t,inverse:c,openStrip:e.strip,inverseStrip:l,closeStrip:i&&i.strip,loc:this.locInfo(a)}}function h(e,t){if(!t&&e.length){var r=e[0].loc,n=e[e.length-1].loc;r&&n&&(t={source:r.source,start:{line:r.start.line,column:r.start.column},end:{line:n.end.line,column:n.end.column}})}return{type:"Program",body:e,strip:{},loc:t}}function f(e,t,r,i){return n(e,r),{type:"PartialBlockStatement",name:e.path,params:e.params,hash:e.hash,program:t,openStrip:e.strip,closeStrip:r&&r.strip,loc:this.locInfo(i)}}var d=r(1)["default"];t.__esModule=!0,t.SourceLocation=i,t.id=o,t.stripFlags=a,t.stripComment=s,t.preparePath=c,t.prepareMustache=l,t.prepareRawBlock=u,t.prepareBlock=p,t.prepareProgram=h,t.preparePartialBlock=f;var g=r(6),m=d(g)},function(e,t,r){"use strict";function n(){}function i(e,t,r){if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new u["default"]("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);t=t||{},"data"in t||(t.data=!0),t.compat&&(t.useDepths=!0);var n=r.parse(e,t),i=(new r.Compiler).compile(n,t);return(new r.JavaScriptCompiler).compile(i,t)}function o(e,t,r){function n(){var n=r.parse(e,t),i=(new r.Compiler).compile(n,t),o=(new r.JavaScriptCompiler).compile(i,t,void 0,!0);return r.template(o)}function i(e,t){return o||(o=n()),o.call(this,e,t)}if(void 0===t&&(t={}),null==e||"string"!=typeof e&&"Program"!==e.type)throw new u["default"]("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);"data"in t||(t.data=!0),t.compat&&(t.useDepths=!0);var o=void 0;return i._setup=function(e){return o||(o=n()),o._setup(e)},i._child=function(e,t,r,i){return o||(o=n()),o._child(e,t,r,i)},i}function a(e,t){if(e===t)return!0;if(p.isArray(e)&&p.isArray(t)&&e.length===t.length){for(var r=0;r<e.length;r++)if(!a(e[r],t[r]))return!1;return!0}}function s(e){if(!e.path.parts){var t=e.path;e.path={type:"PathExpression",data:!1,depth:0,parts:[t.original+""],original:t.original+"",loc:t.loc}}}var c=r(1)["default"];t.__esModule=!0,t.Compiler=n,t.precompile=i,t.compile=o;var l=r(6),u=c(l),p=r(5),h=r(21),f=c(h),d=[].slice;n.prototype={compiler:n,equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var r=0;t>r;r++){var n=this.opcodes[r],i=e.opcodes[r];if(n.opcode!==i.opcode||!a(n.args,i.args))return!1}t=this.children.length;for(var r=0;t>r;r++)if(!this.children[r].equals(e.children[r]))return!1;return!0},guid:0,compile:function(e,t){this.sourceNode=[],this.opcodes=[],this.children=[],this.options=t,this.stringParams=t.stringParams,this.trackIds=t.trackIds,t.blockParams=t.blockParams||[];var r=t.knownHelpers;if(t.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0,lookup:!0},r)for(var n in r)n in r&&(t.knownHelpers[n]=r[n]);return this.accept(e)},compileProgram:function(e){var t=new this.compiler,r=t.compile(e,this.options),n=this.guid++;return this.usePartial=this.usePartial||r.usePartial,this.children[n]=r,this.useDepths=this.useDepths||r.useDepths,n},accept:function(e){if(!this[e.type])throw new u["default"]("Unknown type: "+e.type,e);this.sourceNode.unshift(e);var t=this[e.type](e);return this.sourceNode.shift(),t},Program:function(e){this.options.blockParams.unshift(e.blockParams);for(var t=e.body,r=t.length,n=0;r>n;n++)this.accept(t[n]);return this.options.blockParams.shift(),this.isSimple=1===r,this.blockParams=e.blockParams?e.blockParams.length:0,this},BlockStatement:function(e){s(e);var t=e.program,r=e.inverse;t=t&&this.compileProgram(t),r=r&&this.compileProgram(r);var n=this.classifySexpr(e);"helper"===n?this.helperSexpr(e,t,r):"simple"===n?(this.simpleSexpr(e),this.opcode("pushProgram",t),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("blockValue",e.path.original)):(this.ambiguousSexpr(e,t,r),this.opcode("pushProgram",t),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(e){var t=e.program&&this.compileProgram(e.program),r=this.setupFullMustacheParams(e,t,void 0),n=e.path;this.useDecorators=!0,this.opcode("registerDecorator",r.length,n.original)},PartialStatement:function(e){this.usePartial=!0;var t=e.program;t&&(t=this.compileProgram(e.program));var r=e.params;if(r.length>1)throw new u["default"]("Unsupported number of partial arguments: "+r.length,e);r.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):r.push({type:"PathExpression",parts:[],depth:0}));var n=e.name.original,i="SubExpression"===e.name.type;i&&this.accept(e.name),this.setupFullMustacheParams(e,t,void 0,!0);var o=e.indent||"";this.options.preventIndent&&o&&(this.opcode("appendContent",o),o=""),this.opcode("invokePartial",i,n,o),this.opcode("append")},PartialBlockStatement:function(e){this.PartialStatement(e)},MustacheStatement:function(e){this.SubExpression(e),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(e){this.DecoratorBlock(e)},ContentStatement:function(e){e.value&&this.opcode("appendContent",e.value)},CommentStatement:function(){},SubExpression:function(e){s(e);var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ambiguousSexpr:function(e,t,r){var n=e.path,i=n.parts[0],o=null!=t||null!=r;this.opcode("getContext",n.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",r),n.strict=!0,this.accept(n),this.opcode("invokeAmbiguous",i,o)},simpleSexpr:function(e){var t=e.path;t.strict=!0,this.accept(t),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,r){var n=this.setupFullMustacheParams(e,t,r),i=e.path,o=i.parts[0];if(this.options.knownHelpers[o])this.opcode("invokeKnownHelper",n.length,o);else{if(this.options.knownHelpersOnly)throw new u["default"]("You specified knownHelpersOnly, but used the unknown helper "+o,e);i.strict=!0,i.falsy=!0,this.accept(i),this.opcode("invokeHelper",n.length,i.original,f["default"].helpers.simpleId(i))}},PathExpression:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0],r=f["default"].helpers.scopedId(e),n=!e.depth&&!r&&this.blockParamIndex(t);n?this.opcode("lookupBlockParam",n,e.parts):t?e.data?(this.options.data=!0,this.opcode("lookupData",e.depth,e.parts,e.strict)):this.opcode("lookupOnContext",e.parts,e.falsy,e.strict,r):this.opcode("pushContext")},StringLiteral:function(e){this.opcode("pushString",e.value)},NumberLiteral:function(e){this.opcode("pushLiteral",e.value)},BooleanLiteral:function(e){this.opcode("pushLiteral",e.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(e){var t=e.pairs,r=0,n=t.length;for(this.opcode("pushHash");n>r;r++)this.pushParam(t[r].value);for(;r--;)this.opcode("assignToHash",t[r].key);this.opcode("popHash")},opcode:function(e){this.opcodes.push({opcode:e,args:d.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(e){e&&(this.useDepths=!0)},classifySexpr:function(e){var t=f["default"].helpers.simpleId(e.path),r=t&&!!this.blockParamIndex(e.path.parts[0]),n=!r&&f["default"].helpers.helperExpression(e),i=!r&&(n||t);if(i&&!n){var o=e.path.parts[0],a=this.options;a.knownHelpers[o]?n=!0:a.knownHelpersOnly&&(i=!1)}return n?"helper":i?"ambiguous":"simple"},pushParams:function(e){for(var t=0,r=e.length;r>t;t++)this.pushParam(e[t])},pushParam:function(e){var t=null!=e.value?e.value:e.original||"";if(this.stringParams)t.replace&&(t=t.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",t,e.type),"SubExpression"===e.type&&this.accept(e);else{if(this.trackIds){var r=void 0;if(!e.parts||f["default"].helpers.scopedId(e)||e.depth||(r=this.blockParamIndex(e.parts[0])),r){var n=e.parts.slice(1).join(".");this.opcode("pushId","BlockParam",r,n)}else t=e.original||t,t.replace&&(t=t.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",e.type,t)}this.accept(e)}},setupFullMustacheParams:function(e,t,r,n){var i=e.params;return this.pushParams(i),this.opcode("pushProgram",t),this.opcode("pushProgram",r),e.hash?this.accept(e.hash):this.opcode("emptyHash",n),i},blockParamIndex:function(e){for(var t=0,r=this.options.blockParams.length;r>t;t++){var n=this.options.blockParams[t],i=n&&p.indexOf(n,e);if(n&&i>=0)return[t,i]}}}},function(e,t,r){"use strict";function n(e){this.value=e}function i(){}function o(e,t,r,n){var i=t.popStack(),o=0,a=r.length;for(e&&a--;a>o;o++)i=t.nameLookup(i,r[o],n);return e?[t.aliasable("container.strict"),"(",i,", ",t.quotedString(r[o]),")"]:i}var a=r(1)["default"];t.__esModule=!0;var s=r(4),c=r(6),l=a(c),u=r(5),p=r(29),h=a(p);i.prototype={nameLookup:function(e,t){return i.isValidJavaScriptVariableName(t)?[e,".",t]:[e,"[",JSON.stringify(t),"]"]},depthedLookup:function(e){return[this.aliasable("container.lookup"),'(depths, "',e,'")']},compilerInfo:function(){var e=s.COMPILER_REVISION,t=s.REVISION_CHANGES[e];return[e,t]},appendToBuffer:function(e,t,r){return u.isArray(e)||(e=[e]),e=this.source.wrap(e,t),this.environment.isSimple?["return ",e,";"]:r?["buffer += ",e,";"]:(e.appendToBuffer=!0,e)},initializeBuffer:function(){return this.quotedString("")},compile:function(e,t,r,n){this.environment=e,this.options=t,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!n,this.name=this.environment.name,this.isChild=!!r,this.context=r||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(e,t),this.useDepths=this.useDepths||e.useDepths||e.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||e.useBlockParams;var i=e.opcodes,o=void 0,a=void 0,s=void 0,c=void 0;for(s=0,c=i.length;c>s;s++)o=i[s],this.source.currentLocation=o.loc,a=a||o.loc,this[o.opcode].apply(this,o.args);if(this.source.currentLocation=a,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new l["default"]("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend("var decorators = container.decorators;\n"),this.decorators.push("return fn;"),n?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var u=this.createFunctionContext(n);if(this.isChild)return u;var p={compiler:this.compilerInfo(),main:u};this.decorators&&(p.main_d=this.decorators,p.useDecorators=!0);var h=this.context,f=h.programs,d=h.decorators;for(s=0,c=f.length;c>s;s++)f[s]&&(p[s]=f[s],d[s]&&(p[s+"_d"]=d[s],p.useDecorators=!0));return this.environment.usePartial&&(p.usePartial=!0),this.options.data&&(p.useData=!0),this.useDepths&&(p.useDepths=!0),this.useBlockParams&&(p.useBlockParams=!0),this.options.compat&&(p.compat=!0),n?p.compilerOptions=this.options:(p.compiler=JSON.stringify(p.compiler),this.source.currentLocation={start:{line:1,column:0}},p=this.objectLiteral(p),t.srcName?(p=p.toStringWithSourceMap({file:t.destName}),p.map=p.map&&p.map.toString()):p=p.toString()),p},preamble:function(){this.lastContext=0,this.source=new h["default"](this.options.srcName),this.decorators=new h["default"](this.options.srcName)},createFunctionContext:function(e){var t="",r=this.stackVars.concat(this.registers.list);r.length>0&&(t+=", "+r.join(", "));var n=0;for(var i in this.aliases){var o=this.aliases[i];this.aliases.hasOwnProperty(i)&&o.children&&o.referenceCount>1&&(t+=", alias"+ ++n+"="+i,o.children[0]="alias"+n)}var a=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&a.push("blockParams"),this.useDepths&&a.push("depths");var s=this.mergeSource(t);return e?(a.push(s),Function.apply(this,a)):this.source.wrap(["function(",a.join(","),") {\n  ",s,"}"])},mergeSource:function(e){var t=this.environment.isSimple,r=!this.forceBuffer,n=void 0,i=void 0,o=void 0,a=void 0;return this.source.each(function(e){e.appendToBuffer?(o?e.prepend("  + "):o=e,a=e):(o&&(i?o.prepend("buffer += "):n=!0,a.add(";"),o=a=void 0),i=!0,t||(r=!1))}),r?o?(o.prepend("return "),a.add(";")):i||this.source.push('return "";'):(e+=", buffer = "+(n?"":this.initializeBuffer()),o?(o.prepend("return buffer + "),a.add(";")):this.source.push("return buffer;")),e&&this.source.prepend("var "+e.substring(2)+(n?"":";\n")),this.source.merge()},blockValue:function(e){var t=this.aliasable("helpers.blockHelperMissing"),r=[this.contextName(0)];this.setupHelperArgs(e,0,r);var n=this.popStack();r.splice(1,0,n),this.push(this.source.functionCall(t,"call",r))},ambiguousBlockValue:function(){var e=this.aliasable("helpers.blockHelperMissing"),t=[this.contextName(0)];this.setupHelperArgs("",0,t,!0),this.flushInline();var r=this.topStack();t.splice(1,0,r),this.pushSource(["if (!",this.lastHelper,") { ",r," = ",this.source.functionCall(e,"call",t),"}"])},appendContent:function(e){this.pendingContent?e=this.pendingContent+e:this.pendingLocation=this.source.currentLocation,this.pendingContent=e},append:function(){if(this.isInline())this.replaceStack(function(e){return[" != null ? ",e,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var e=this.popStack();this.pushSource(["if (",e," != null) { ",this.appendToBuffer(e,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(e){this.lastContext=e},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(e,t,r,n){var i=0;n||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(e[i++])),this.resolvePath("context",e,i,t,r)},lookupBlockParam:function(e,t){this.useBlockParams=!0,this.push(["blockParams[",e[0],"][",e[1],"]"]),this.resolvePath("context",t,1)},lookupData:function(e,t,r){e?this.pushStackLiteral("container.data(data, "+e+")"):this.pushStackLiteral("data"),this.resolvePath("data",t,0,!0,r)},resolvePath:function(e,t,r,n,i){var a=this;if(this.options.strict||this.options.assumeObjects)return void this.push(o(this.options.strict&&i,this,t,e));for(var s=t.length;s>r;r++)this.replaceStack(function(i){var o=a.nameLookup(i,t[r],e);return n?[" && ",o]:[" != null ? ",o," : ",i]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(e,t){this.pushContext(),this.pushString(t),"SubExpression"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(e){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(e?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(e.ids)),this.stringParams&&(this.push(this.objectLiteral(e.contexts)),this.push(this.objectLiteral(e.types))),this.push(this.objectLiteral(e.values))},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){null!=e?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},registerDecorator:function(e,t){var r=this.nameLookup("decorators",t,"decorator"),n=this.setupHelperArgs(t,e);this.decorators.push(["fn = ",this.decorators.functionCall(r,"",["fn","props","container",n])," || fn;"])},invokeHelper:function(e,t,r){var n=this.popStack(),i=this.setupHelper(e,t),o=r?[i.name," || "]:"",a=["("].concat(o,n);this.options.strict||a.push(" || ",this.aliasable("helpers.helperMissing")),a.push(")"),this.push(this.source.functionCall(a,"call",i.callParams))},invokeKnownHelper:function(e,t){var r=this.setupHelper(e,t);this.push(this.source.functionCall(r.name,"call",r.callParams))},invokeAmbiguous:function(e,t){this.useRegister("helper");var r=this.popStack();this.emptyHash();var n=this.setupHelper(0,e,t),i=this.lastHelper=this.nameLookup("helpers",e,"helper"),o=["(","(helper = ",i," || ",r,")"];this.options.strict||(o[0]="(helper = ",o.push(" != null ? helper : ",this.aliasable("helpers.helperMissing"))),this.push(["(",o,n.paramsInit?["),(",n.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",n.callParams)," : helper))"])},invokePartial:function(e,t,r){var n=[],i=this.setupParams(t,1,n);e&&(t=this.popStack(),delete i.name),r&&(i.indent=JSON.stringify(r)),i.helpers="helpers",i.partials="partials",i.decorators="container.decorators",e?n.unshift(t):n.unshift(this.nameLookup("partials",t,"partial")),
this.options.compat&&(i.depths="depths"),i=this.objectLiteral(i),n.push(i),this.push(this.source.functionCall("container.invokePartial","",n))},assignToHash:function(e){var t=this.popStack(),r=void 0,n=void 0,i=void 0;this.trackIds&&(i=this.popStack()),this.stringParams&&(n=this.popStack(),r=this.popStack());var o=this.hash;r&&(o.contexts[e]=r),n&&(o.types[e]=n),i&&(o.ids[e]=i),o.values[e]=t},pushId:function(e,t,r){"BlockParam"===e?this.pushStackLiteral("blockParams["+t[0]+"].path["+t[1]+"]"+(r?" + "+JSON.stringify("."+r):"")):"PathExpression"===e?this.pushString(t):"SubExpression"===e?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:i,compileChildren:function(e,t){for(var r=e.children,n=void 0,i=void 0,o=0,a=r.length;a>o;o++){n=r[o],i=new this.compiler;var s=this.matchExistingProgram(n);null==s?(this.context.programs.push(""),s=this.context.programs.length,n.index=s,n.name="program"+s,this.context.programs[s]=i.compile(n,t,this.context,!this.precompile),this.context.decorators[s]=i.decorators,this.context.environments[s]=n,this.useDepths=this.useDepths||i.useDepths,this.useBlockParams=this.useBlockParams||i.useBlockParams):(n.index=s,n.name="program"+s,this.useDepths=this.useDepths||n.useDepths,this.useBlockParams=this.useBlockParams||n.useBlockParams)}},matchExistingProgram:function(e){for(var t=0,r=this.context.environments.length;r>t;t++){var n=this.context.environments[t];if(n&&n.equals(e))return t}},programExpression:function(e){var t=this.environment.children[e],r=[t.index,"data",t.blockParams];return(this.useBlockParams||this.useDepths)&&r.push("blockParams"),this.useDepths&&r.push("depths"),"container.program("+r.join(", ")+")"},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},push:function(e){return e instanceof n||(e=this.source.wrap(e)),this.inlineStack.push(e),e},pushStackLiteral:function(e){this.push(new n(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),e&&this.source.push(e)},replaceStack:function(e){var t=["("],r=void 0,i=void 0,o=void 0;if(!this.isInline())throw new l["default"]("replaceStack on non-inline");var a=this.popStack(!0);if(a instanceof n)r=[a.value],t=["(",r],o=!0;else{i=!0;var s=this.incrStack();t=["((",this.push(s)," = ",a,")"],r=this.topStack()}var c=e.call(this,r);o||this.popStack(),i&&this.stackSlot--,this.push(t.concat(c,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;this.inlineStack=[];for(var t=0,r=e.length;r>t;t++){var i=e[t];if(i instanceof n)this.compileStack.push(i);else{var o=this.incrStack();this.pushSource([o," = ",i,";"]),this.compileStack.push(o)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),r=(t?this.inlineStack:this.compileStack).pop();if(!e&&r instanceof n)return r.value;if(!t){if(!this.stackSlot)throw new l["default"]("Invalid stack pop");this.stackSlot--}return r},topStack:function(){var e=this.isInline()?this.inlineStack:this.compileStack,t=e[e.length-1];return t instanceof n?t.value:t},contextName:function(e){return this.useDepths&&e?"depths["+e+"]":"depth"+e},quotedString:function(e){return this.source.quotedString(e)},objectLiteral:function(e){return this.source.objectLiteral(e)},aliasable:function(e){var t=this.aliases[e];return t?(t.referenceCount++,t):(t=this.aliases[e]=this.source.wrap(e),t.aliasable=!0,t.referenceCount=1,t)},setupHelper:function(e,t,r){var n=[],i=this.setupHelperArgs(t,e,n,r),o=this.nameLookup("helpers",t,"helper"),a=this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : {}");return{params:n,paramsInit:i,name:o,callParams:[a].concat(n)}},setupParams:function(e,t,r){var n={},i=[],o=[],a=[],s=!r,c=void 0;s&&(r=[]),n.name=this.quotedString(e),n.hash=this.popStack(),this.trackIds&&(n.hashIds=this.popStack()),this.stringParams&&(n.hashTypes=this.popStack(),n.hashContexts=this.popStack());var l=this.popStack(),u=this.popStack();(u||l)&&(n.fn=u||"container.noop",n.inverse=l||"container.noop");for(var p=t;p--;)c=this.popStack(),r[p]=c,this.trackIds&&(a[p]=this.popStack()),this.stringParams&&(o[p]=this.popStack(),i[p]=this.popStack());return s&&(n.args=this.source.generateArray(r)),this.trackIds&&(n.ids=this.source.generateArray(a)),this.stringParams&&(n.types=this.source.generateArray(o),n.contexts=this.source.generateArray(i)),this.options.data&&(n.data="data"),this.useBlockParams&&(n.blockParams="blockParams"),n},setupHelperArgs:function(e,t,r,n){var i=this.setupParams(e,t,r);return i=this.objectLiteral(i),n?(this.useRegister("options"),r.push("options"),["options=",i]):r?(r.push(i),""):i}},function(){for(var e="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),t=i.RESERVED_WORDS={},r=0,n=e.length;n>r;r++)t[e[r]]=!0}(),i.isValidJavaScriptVariableName=function(e){return!i.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)},t["default"]=i,e.exports=t["default"]},function(e,t,r){"use strict";function n(e,t,r){if(o.isArray(e)){for(var n=[],i=0,a=e.length;a>i;i++)n.push(t.wrap(e[i],r));return n}return"boolean"==typeof e||"number"==typeof e?e+"":e}function i(e){this.srcFile=e,this.source=[]}t.__esModule=!0;var o=r(5),a=void 0;try{}catch(s){}a||(a=function(e,t,r,n){this.src="",n&&this.add(n)},a.prototype={add:function(e){o.isArray(e)&&(e=e.join("")),this.src+=e},prepend:function(e){o.isArray(e)&&(e=e.join("")),this.src=e+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),i.prototype={isEmpty:function(){return!this.source.length},prepend:function(e,t){this.source.unshift(this.wrap(e,t))},push:function(e,t){this.source.push(this.wrap(e,t))},merge:function(){var e=this.empty();return this.each(function(t){e.add(["  ",t,"\n"])}),e},each:function(e){for(var t=0,r=this.source.length;r>t;t++)e(this.source[t])},empty:function(){var e=this.currentLocation||{start:{}};return new a(e.start.line,e.start.column,this.srcFile)},wrap:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return e instanceof a?e:(e=n(e,this,t),new a(t.start.line,t.start.column,this.srcFile,e))},functionCall:function(e,t,r){return r=this.generateList(r),this.wrap([e,t?"."+t+"(":"(",r,")"])},quotedString:function(e){return'"'+(e+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(e){var t=[];for(var r in e)if(e.hasOwnProperty(r)){var i=n(e[r],this);"undefined"!==i&&t.push([this.quotedString(r),":",i])}var o=this.generateList(t);return o.prepend("{"),o.add("}"),o},generateList:function(e){for(var t=this.empty(),r=0,i=e.length;i>r;r++)r&&t.add(","),t.add(n(e[r],this));return t},generateArray:function(e){var t=this.generateList(e);return t.prepend("["),t.add("]"),t}},t["default"]=i,e.exports=t["default"]}])})},{}],89:[function(e,t,r){function n(e,t){if("function"!=typeof e)throw new TypeError(i);return t=o(void 0===t?e.length-1:+t||0,0),function(){for(var r=arguments,n=-1,i=o(r.length-t,0),a=Array(i);++n<i;)a[n]=r[t+n];switch(t){case 0:return e.call(this,a);case 1:return e.call(this,r[0],a);case 2:return e.call(this,r[0],r[1],a)}var s=Array(t+1);for(n=-1;++n<t;)s[n]=r[n];return s[t]=a,e.apply(this,s)}}var i="Expected a function",o=Math.max;t.exports=n},{}],90:[function(e,t,r){(function(r){function n(e){var t=e?e.length:0;for(this.data={hash:s(null),set:new a};t--;)this.push(e[t])}var i=e("./cachePush"),o=e("./getNative"),a=o(r,"Set"),s=o(Object,"create");n.prototype.push=i,t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./cachePush":111,"./getNative":116}],91:[function(e,t,r){function n(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}t.exports=n},{}],92:[function(e,t,r){function n(e,t){for(var r=-1,n=e.length;++r<n&&t(e[r],r,e)!==!1;);return e}t.exports=n},{}],93:[function(e,t,r){function n(e,t){for(var r=-1,n=e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}t.exports=n},{}],94:[function(e,t,r){function n(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}t.exports=n},{}],95:[function(e,t,r){function n(e,t,r){for(var n=-1,o=i(t),a=o.length;++n<a;){var s=o[n],c=e[s],l=r(c,t[s],s,e,t);(l===l?l===c:c!==c)&&(void 0!==c||s in e)||(e[s]=l)}return e}var i=e("../object/keys");t.exports=n},{"../object/keys":140}],96:[function(e,t,r){function n(e,t){return null==t?e:i(t,o(t),e)}var i=e("./baseCopy"),o=e("../object/keys");t.exports=n},{"../object/keys":140,"./baseCopy":98}],97:[function(e,t,r){function n(e,t,r,d,g,m,v){var b;if(r&&(b=g?r(e,d,g):r(e)),void 0!==b)return b;if(!h(e))return e;var w=p(e);if(w){if(b=c(e),!t)return i(e,b)}else{var _=D.call(e),E=_==y;if(_!=x&&_!=f&&(!E||g))return F[_]?l(e,_,t):g?e:{};if(b=u(E?{}:e),!t)return a(b,e)}m||(m=[]),v||(v=[]);for(var k=m.length;k--;)if(m[k]==e)return v[k];return m.push(e),v.push(b),(w?o:s)(e,function(i,o){b[o]=n(i,t,r,o,e,m,v)}),b}var i=e("./arrayCopy"),o=e("./arrayEach"),a=e("./baseAssign"),s=e("./baseForOwn"),c=e("./initCloneArray"),l=e("./initCloneByTag"),u=e("./initCloneObject"),p=e("../lang/isArray"),h=e("../lang/isObject"),f="[object Arguments]",d="[object Array]",g="[object Boolean]",m="[object Date]",v="[object Error]",y="[object Function]",b="[object Map]",w="[object Number]",x="[object Object]",_="[object RegExp]",E="[object Set]",k="[object String]",S="[object WeakMap]",P="[object ArrayBuffer]",A="[object Float32Array]",C="[object Float64Array]",R="[object Int8Array]",O="[object Int16Array]",N="[object Int32Array]",I="[object Uint8Array]",j="[object Uint8ClampedArray]",T="[object Uint16Array]",L="[object Uint32Array]",F={};F[f]=F[d]=F[P]=F[g]=F[m]=F[A]=F[C]=F[R]=F[O]=F[N]=F[w]=F[x]=F[_]=F[k]=F[I]=F[j]=F[T]=F[L]=!0,F[v]=F[y]=F[b]=F[E]=F[S]=!1;var M=Object.prototype,D=M.toString;t.exports=n},{"../lang/isArray":132,"../lang/isObject":135,"./arrayCopy":91,"./arrayEach":92,"./baseAssign":96,"./baseForOwn":103,"./initCloneArray":118,"./initCloneByTag":119,"./initCloneObject":120}],98:[function(e,t,r){function n(e,t,r){r||(r={});for(var n=-1,i=t.length;++n<i;){var o=t[n];r[o]=e[o]}return r}t.exports=n},{}],99:[function(e,t,r){function n(e,t){var r=e?e.length:0,n=[];if(!r)return n;var c=-1,l=i,u=!0,p=u&&t.length>=s?a(t):null,h=t.length;p&&(l=o,u=!1,t=p);e:for(;++c<r;){var f=e[c];if(u&&f===f){for(var d=h;d--;)if(t[d]===f)continue e;n.push(f)}else l(t,f,0)<0&&n.push(f)}return n}var i=e("./baseIndexOf"),o=e("./cacheIndexOf"),a=e("./createCache"),s=200;t.exports=n},{"./baseIndexOf":104,"./cacheIndexOf":110,"./createCache":114}],100:[function(e,t,r){function n(e,t,r,l){l||(l=[]);for(var u=-1,p=e.length;++u<p;){var h=e[u];c(h)&&s(h)&&(r||a(h)||o(h))?t?n(h,t,r,l):i(l,h):r||(l[l.length]=h)}return l}var i=e("./arrayPush"),o=e("../lang/isArguments"),a=e("../lang/isArray"),s=e("./isArrayLike"),c=e("./isObjectLike");t.exports=n},{"../lang/isArguments":131,"../lang/isArray":132,"./arrayPush":94,"./isArrayLike":121,"./isObjectLike":125}],101:[function(e,t,r){var n=e("./createBaseFor"),i=n();t.exports=i},{"./createBaseFor":113}],102:[function(e,t,r){function n(e,t){return i(e,t,o)}var i=e("./baseFor"),o=e("../object/keysIn");t.exports=n},{"../object/keysIn":141,"./baseFor":101}],103:[function(e,t,r){function n(e,t){return i(e,t,o)}var i=e("./baseFor"),o=e("../object/keys");t.exports=n},{"../object/keys":140,"./baseFor":101}],104:[function(e,t,r){function n(e,t,r){if(t!==t)return i(e,r);for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}var i=e("./indexOfNaN");t.exports=n},{"./indexOfNaN":117}],105:[function(e,t,r){function n(e,t,r,h,f){if(!c(e))return e;var d=s(t)&&(a(t)||u(t)),g=d?void 0:p(t);return i(g||t,function(i,a){if(g&&(a=i,i=t[a]),l(i))h||(h=[]),f||(f=[]),o(e,t,a,n,r,h,f);else{var s=e[a],c=r?r(s,i,a,e,t):void 0,u=void 0===c;u&&(c=i),void 0===c&&(!d||a in e)||!u&&(c===c?c===s:s!==s)||(e[a]=c)}}),e}var i=e("./arrayEach"),o=e("./baseMergeDeep"),a=e("../lang/isArray"),s=e("./isArrayLike"),c=e("../lang/isObject"),l=e("./isObjectLike"),u=e("../lang/isTypedArray"),p=e("../object/keys");t.exports=n},{"../lang/isArray":132,"../lang/isObject":135,"../lang/isTypedArray":137,"../object/keys":140,"./arrayEach":92,"./baseMergeDeep":106,"./isArrayLike":121,"./isObjectLike":125}],106:[function(e,t,r){function n(e,t,r,n,p,h,f){for(var d=h.length,g=t[r];d--;)if(h[d]==g)return void(e[r]=f[d]);var m=e[r],v=p?p(m,g,r,e,t):void 0,y=void 0===v;y&&(v=g,s(g)&&(a(g)||l(g))?v=a(m)?m:s(m)?i(m):[]:c(g)||o(g)?v=o(m)?u(m):c(m)?m:{}:y=!1),h.push(g),f.push(v),y?e[r]=n(v,g,p,h,f):(v===v?v!==m:m===m)&&(e[r]=v)}var i=e("./arrayCopy"),o=e("../lang/isArguments"),a=e("../lang/isArray"),s=e("./isArrayLike"),c=e("../lang/isPlainObject"),l=e("../lang/isTypedArray"),u=e("../lang/toPlainObject");t.exports=n},{"../lang/isArguments":131,"../lang/isArray":132,"../lang/isPlainObject":136,"../lang/isTypedArray":137,"../lang/toPlainObject":138,"./arrayCopy":91,"./isArrayLike":121}],107:[function(e,t,r){function n(e){return function(t){return null==t?void 0:t[e]}}t.exports=n},{}],108:[function(e,t,r){function n(e,t,r){if("function"!=typeof e)return i;if(void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 3:return function(r,n,i){return e.call(t,r,n,i)};case 4:return function(r,n,i,o){return e.call(t,r,n,i,o)};case 5:return function(r,n,i,o,a){return e.call(t,r,n,i,o,a)}}return function(){return e.apply(t,arguments)}}var i=e("../utility/identity");t.exports=n},{"../utility/identity":144}],109:[function(e,t,r){(function(e){function r(e){var t=new n(e.byteLength),r=new i(t);return r.set(new i(e)),t}var n=e.ArrayBuffer,i=e.Uint8Array;t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],110:[function(e,t,r){function n(e,t){var r=e.data,n="string"==typeof t||i(t)?r.set.has(t):r.hash[t];return n?0:-1}var i=e("../lang/isObject");t.exports=n},{"../lang/isObject":135}],111:[function(e,t,r){function n(e){var t=this.data;"string"==typeof e||i(e)?t.set.add(e):t.hash[e]=!0}var i=e("../lang/isObject");t.exports=n},{"../lang/isObject":135}],112:[function(e,t,r){function n(e){return a(function(t,r){var n=-1,a=null==t?0:r.length,s=a>2?r[a-2]:void 0,c=a>2?r[2]:void 0,l=a>1?r[a-1]:void 0;for("function"==typeof s?(s=i(s,l,5),a-=2):(s="function"==typeof l?l:void 0,a-=s?1:0),c&&o(r[0],r[1],c)&&(s=a<3?void 0:s,a=1);++n<a;){var u=r[n];u&&e(t,u,s)}return t})}var i=e("./bindCallback"),o=e("./isIterateeCall"),a=e("../function/restParam");t.exports=n},{"../function/restParam":89,"./bindCallback":108,"./isIterateeCall":123}],113:[function(e,t,r){function n(e){return function(t,r,n){for(var o=i(t),a=n(t),s=a.length,c=e?s:-1;e?c--:++c<s;){var l=a[c];if(r(o[l],l,o)===!1)break}return t}}var i=e("./toObject");t.exports=n},{"./toObject":129}],114:[function(e,t,r){(function(r){function n(e){return s&&a?new i(e):null}var i=e("./SetCache"),o=e("./getNative"),a=o(r,"Set"),s=o(Object,"create");t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./SetCache":90,"./getNative":116}],115:[function(e,t,r){var n=e("./baseProperty"),i=n("length");t.exports=i},{"./baseProperty":107}],116:[function(e,t,r){function n(e,t){var r=null==e?void 0:e[t];return i(r)?r:void 0}var i=e("../lang/isNative");t.exports=n},{"../lang/isNative":134}],117:[function(e,t,r){function n(e,t,r){for(var n=e.length,i=t+(r?0:-1);r?i--:++i<n;){var o=e[i];if(o!==o)return i}return-1}t.exports=n},{}],118:[function(e,t,r){function n(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&o.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var i=Object.prototype,o=i.hasOwnProperty;t.exports=n},{}],119:[function(e,t,r){function n(e,t,r){var n=e.constructor;switch(t){case u:return i(e);case o:case a:return new n((+e));case p:case h:case f:case d:case g:case m:case v:case y:case b:var x=e.buffer;return new n(r?i(x):x,e.byteOffset,e.length);case s:case l:return new n(e);case c:var _=new n(e.source,w.exec(e));_.lastIndex=e.lastIndex}return _}var i=e("./bufferClone"),o="[object Boolean]",a="[object Date]",s="[object Number]",c="[object RegExp]",l="[object String]",u="[object ArrayBuffer]",p="[object Float32Array]",h="[object Float64Array]",f="[object Int8Array]",d="[object Int16Array]",g="[object Int32Array]",m="[object Uint8Array]",v="[object Uint8ClampedArray]",y="[object Uint16Array]",b="[object Uint32Array]",w=/\w*$/;t.exports=n},{"./bufferClone":109}],120:[function(e,t,r){function n(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=Object),new t}t.exports=n},{}],121:[function(e,t,r){function n(e){return null!=e&&o(i(e))}var i=e("./getLength"),o=e("./isLength");t.exports=n},{"./getLength":115,"./isLength":124}],122:[function(e,t,r){function n(e,t){return e="number"==typeof e||i.test(e)?+e:-1,t=null==t?o:t,e>-1&&e%1==0&&e<t}var i=/^\d+$/,o=9007199254740991;t.exports=n},{}],123:[function(e,t,r){function n(e,t,r){if(!a(r))return!1;var n=typeof t;if("number"==n?i(r)&&o(t,r.length):"string"==n&&t in r){var s=r[t];return e===e?e===s:s!==s}return!1}var i=e("./isArrayLike"),o=e("./isIndex"),a=e("../lang/isObject");t.exports=n},{"../lang/isObject":135,"./isArrayLike":121,"./isIndex":122}],124:[function(e,t,r){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}var i=9007199254740991;t.exports=n},{}],125:[function(e,t,r){function n(e){return!!e&&"object"==typeof e}t.exports=n},{}],126:[function(e,t,r){function n(e,t){e=i(e);for(var r=-1,n=t.length,o={};++r<n;){var a=t[r];a in e&&(o[a]=e[a])}return o}var i=e("./toObject");t.exports=n},{"./toObject":129}],127:[function(e,t,r){function n(e,t){var r={};return i(e,function(e,n,i){t(e,n,i)&&(r[n]=e)}),r}var i=e("./baseForIn");t.exports=n},{"./baseForIn":102}],128:[function(e,t,r){function n(e){for(var t=c(e),r=t.length,n=r&&e.length,l=!!n&&s(n)&&(o(e)||i(e)),p=-1,h=[];++p<r;){var f=t[p];(l&&a(f,n)||u.call(e,f))&&h.push(f)}return h}var i=e("../lang/isArguments"),o=e("../lang/isArray"),a=e("./isIndex"),s=e("./isLength"),c=e("../object/keysIn"),l=Object.prototype,u=l.hasOwnProperty;t.exports=n},{"../lang/isArguments":131,"../lang/isArray":132,"../object/keysIn":141,"./isIndex":122,"./isLength":124}],129:[function(e,t,r){function n(e){return i(e)?e:Object(e)}var i=e("../lang/isObject");t.exports=n},{"../lang/isObject":135}],130:[function(e,t,r){function n(e,t,r){return"function"==typeof t?i(e,!0,o(t,r,1)):i(e,!0)}var i=e("../internal/baseClone"),o=e("../internal/bindCallback");t.exports=n},{"../internal/baseClone":97,"../internal/bindCallback":108}],131:[function(e,t,r){function n(e){return o(e)&&i(e)&&s.call(e,"callee")&&!c.call(e,"callee")}var i=e("../internal/isArrayLike"),o=e("../internal/isObjectLike"),a=Object.prototype,s=a.hasOwnProperty,c=a.propertyIsEnumerable;t.exports=n},{"../internal/isArrayLike":121,"../internal/isObjectLike":125}],132:[function(e,t,r){var n=e("../internal/getNative"),i=e("../internal/isLength"),o=e("../internal/isObjectLike"),a="[object Array]",s=Object.prototype,c=s.toString,l=n(Array,"isArray"),u=l||function(e){return o(e)&&i(e.length)&&c.call(e)==a};t.exports=u},{"../internal/getNative":116,"../internal/isLength":124,"../internal/isObjectLike":125}],133:[function(e,t,r){function n(e){return i(e)&&s.call(e)==o}var i=e("./isObject"),o="[object Function]",a=Object.prototype,s=a.toString;t.exports=n},{"./isObject":135}],134:[function(e,t,r){function n(e){return null!=e&&(i(e)?u.test(c.call(e)):o(e)&&a.test(e))}var i=e("./isFunction"),o=e("../internal/isObjectLike"),a=/^\[object .+?Constructor\]$/,s=Object.prototype,c=Function.prototype.toString,l=s.hasOwnProperty,u=RegExp("^"+c.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=n},{"../internal/isObjectLike":125,"./isFunction":133}],135:[function(e,t,r){function n(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}t.exports=n},{}],136:[function(e,t,r){function n(e){var t;if(!a(e)||u.call(e)!=s||o(e)||!l.call(e,"constructor")&&(t=e.constructor,"function"==typeof t&&!(t instanceof t)))return!1;var r;return i(e,function(e,t){r=t}),void 0===r||l.call(e,r)}var i=e("../internal/baseForIn"),o=e("./isArguments"),a=e("../internal/isObjectLike"),s="[object Object]",c=Object.prototype,l=c.hasOwnProperty,u=c.toString;t.exports=n},{"../internal/baseForIn":102,"../internal/isObjectLike":125,"./isArguments":131}],137:[function(e,t,r){function n(e){return o(e)&&i(e.length)&&!!R[N.call(e)]}var i=e("../internal/isLength"),o=e("../internal/isObjectLike"),a="[object Arguments]",s="[object Array]",c="[object Boolean]",l="[object Date]",u="[object Error]",p="[object Function]",h="[object Map]",f="[object Number]",d="[object Object]",g="[object RegExp]",m="[object Set]",v="[object String]",y="[object WeakMap]",b="[object ArrayBuffer]",w="[object Float32Array]",x="[object Float64Array]",_="[object Int8Array]",E="[object Int16Array]",k="[object Int32Array]",S="[object Uint8Array]",P="[object Uint8ClampedArray]",A="[object Uint16Array]",C="[object Uint32Array]",R={};R[w]=R[x]=R[_]=R[E]=R[k]=R[S]=R[P]=R[A]=R[C]=!0,R[a]=R[s]=R[b]=R[c]=R[l]=R[u]=R[p]=R[h]=R[f]=R[d]=R[g]=R[m]=R[v]=R[y]=!1;var O=Object.prototype,N=O.toString;t.exports=n},{"../internal/isLength":124,"../internal/isObjectLike":125}],138:[function(e,t,r){function n(e){return i(e,o(e))}var i=e("../internal/baseCopy"),o=e("../object/keysIn");t.exports=n},{"../internal/baseCopy":98,"../object/keysIn":141}],139:[function(e,t,r){var n=e("../internal/assignWith"),i=e("../internal/baseAssign"),o=e("../internal/createAssigner"),a=o(function(e,t,r){return r?n(e,t,r):i(e,t)});t.exports=a},{"../internal/assignWith":95,"../internal/baseAssign":96,"../internal/createAssigner":112}],140:[function(e,t,r){var n=e("../internal/getNative"),i=e("../internal/isArrayLike"),o=e("../lang/isObject"),a=e("../internal/shimKeys"),s=n(Object,"keys"),c=s?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&i(e)?a(e):o(e)?s(e):[]}:a;t.exports=c},{"../internal/getNative":116,"../internal/isArrayLike":121,"../internal/shimKeys":128,"../lang/isObject":135}],141:[function(e,t,r){function n(e){if(null==e)return[];c(e)||(e=Object(e));var t=e.length;t=t&&s(t)&&(o(e)||i(e))&&t||0;for(var r=e.constructor,n=-1,l="function"==typeof r&&r.prototype===e,p=Array(t),h=t>0;++n<t;)p[n]=n+"";for(var f in e)h&&a(f,t)||"constructor"==f&&(l||!u.call(e,f))||p.push(f);return p}var i=e("../lang/isArguments"),o=e("../lang/isArray"),a=e("../internal/isIndex"),s=e("../internal/isLength"),c=e("../lang/isObject"),l=Object.prototype,u=l.hasOwnProperty;t.exports=n},{"../internal/isIndex":122,"../internal/isLength":124,"../lang/isArguments":131,"../lang/isArray":132,"../lang/isObject":135}],142:[function(e,t,r){var n=e("../internal/baseMerge"),i=e("../internal/createAssigner"),o=i(n);t.exports=o},{"../internal/baseMerge":105,"../internal/createAssigner":112}],143:[function(e,t,r){var n=e("../internal/arrayMap"),i=e("../internal/baseDifference"),o=e("../internal/baseFlatten"),a=e("../internal/bindCallback"),s=e("./keysIn"),c=e("../internal/pickByArray"),l=e("../internal/pickByCallback"),u=e("../function/restParam"),p=u(function(e,t){if(null==e)return{};if("function"!=typeof t[0]){var t=n(o(t),String);return c(e,i(s(e),t))}var r=a(t[0],t[1],3);return l(e,function(e,t,n){return!r(e,t,n)})});t.exports=p},{"../function/restParam":89,"../internal/arrayMap":93,"../internal/baseDifference":99,"../internal/baseFlatten":100,"../internal/bindCallback":108,"../internal/pickByArray":126,"../internal/pickByCallback":127,"./keysIn":141}],144:[function(e,t,r){function n(e){return e}t.exports=n},{}],145:[function(e,t,r){(function(e){function r(e,t){"use strict";var r={isRejected:function(){return!e},isFulfilled:function(){return e}};return r.isResolved=r.isFulfilled,e?Object.defineProperty(r,"value",{enumerable:!0,value:t}):Object.defineProperty(r,"reason",{enumerable:!0,value:t}),r}function n(e){"use strict";return e.prototype.spread=function(t){return this.then(function(t){return e.all(t)}).then(function(e){return t.apply(null,e)})},e.prototype.delay=function(t){return this.then(function(r){return new e(function(e){setTimeout(function(){e(r)},t)})})},e.delay=function(e,t){return void 0===t&&(t=e,e=void 0),this.resolve(e).delay(t)},e.prototype["finally"]=function(t){var r=function(){},n=new e(function(e){var r;try{r=t()}finally{e(r)}}).then(r,r);return this.then(function(e){return n.then(function(){return e})},function(e){return n.then(function(){throw e})})},e.prototype.reflect=function(){return this.then(function(e){return r(!0,e)},function(e){return r(!1,e)})},e.settleAll=function(t){var r=Array.isArray(t)?t:[t];return this.all(r.map(function(t){return e.resolve(t).reflect()}))},e.prototype.done=function(){this["catch"](function(e){s(function(){throw e})})},e}function i(e,t){"use strict";t.forEach(function(t){e.prototype[t]=function(){var r=this.__instance,n=r[t].apply(r,c(arguments));return e.resolve(n)}})}function o(e,t,r){"use strict";r.forEach(function(r){e[r]=function(){var n=t[r].apply(t,c(arguments));return e.resolve(n)}})}function a(e){"use strict";var t=function(t){var r=new e(t);Object.defineProperty(this,"__instance",{value:r})};return t.resolve=function(e){var t=this;return e&&e.__instance&&"object"==typeof e.__instance?e:new t(function(t){t(e)})},o(t,e,["all","reject","race"]),i(t,["then","catch"]),n(t)}var s=function(){"use strict";return s?s:"[object process]"==={}.toString.call(e.process)?e.process.nextTick.bind(e.process):function(e){setTimeout(e,0)}}(),c=function(){"use strict";var e=Array.prototype.slice;return function(t){return t?e.call(t):[]}}();t.exports=function(t){"use strict";var r=t||e.Promise;if(!r)throw new Error("No Promise implementation found.");if("function"!=typeof r)throw new TypeError("Not supported. The argument provided is not a constructor.");return a(r)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],146:[function(e,t,r){"use strict";function n(e){return new a(e)}var i=e("./cxp-util"),o=e("browser-bunyan"),a=function(e){e=e||{};var t="cxp-web";this.log=e.log?e.log.child({childName:t}):o.createLogger({name:t||"logger",streams:Array.isArray(e.logStreams)?e.logStreams:[{level:e.logLevel||"info",stream:new o.ConsoleFormattedStream,type:"raw"}]}),this.settings={}};a.prototype.util=i,a.prototype.clone=function(){var e=new a,t=this.settings;return e.settings=Object.keys(t).reduce(function(e,r){return e[r]=t[r],e},{}),e},a.prototype.set=function(e,t){this.settings[e]=t},a.prototype.get=function(e){return this.settings[e]},a.prototype.enable=function(e){this.settings[e]=!0},a.prototype.disable=function(e){this.settings[e]=!1},a.prototype.enabled=function(e){return!!this.settings[e]},a.prototype.disabled=function(e){return!this.settings[e]},a.prototype.getLogger=function(){return this.log},a.prototype.toSerializableObject=function(){var e=["logStreams","storageFactory"];return JSON.parse(JSON.stringify(this.settings,function(t,r){return e.indexOf(t)>-1?void 0:r}))},t.exports={Configuration:a,createInstance:n}},{"./cxp-util":147,"browser-bunyan":86}],147:[function(e,t,r){"use strict";t.exports={getPreference:function(e,t){return e.preferences[t]||null},getPreferenceValue:function(e,t){var r=this.getPreference(e,t);return r?r.value:null}}},{}],148:[function(e,t,r){"use strict";function n(e){this._datasource=e}var i=e("backbase-widget-engine/src/datasource/datasource-resolver"),o=e("backbase-widget-engine/src/datasource/datasource-resolver-helpers");t.exports=n,n.prototype.resolveUrl=function(e){var t=this._datasource.uri,r=t.split(":");if(2!==r.length)throw new Error("Invalid breadcrumb datasource uri: ",t);var n=[].concat(this._datasource.params||[]),i=o.trimSlashes(r[1]);i&&n.push({name:"uuid",value:i});var a=e.apiRoot||"",s=a+"/portal/navigation/breadcrumb",c=o.resolveQueryString(e,n);return c&&(s+="?"+c),s},n.prototype.processResponse=function(e){return e.json()},n.getInstance=i.createFactoryFunction("breadcrumb",n)},{"backbase-widget-engine/src/datasource/datasource-resolver":46,"backbase-widget-engine/src/datasource/datasource-resolver-helpers":45}],149:[function(e,t,r){"use strict";function n(e){this._datasource=e}var i=e("backbase-widget-engine/src/datasource/datasource-resolver"),o=e("backbase-widget-engine/src/datasource/datasource-resolver-helpers"),a=e("backbase-widget-engine/src/util/util"),s="assets";t.exports=n,n.prototype.resolveUrl=function(e){var t=this._datasource.uri,r=t.split(":");if(2!==r.length)throw new Error("Invalid contentrendered datasource uri: ",t);var n=(this._datasource.params||[]).map(function(t){var r=o.resolveParameter(e,t);return"template"===r.name&&(r.name="templateUrl"),r}).filter(function(e){return e.name&&e.name!==s}),i=o.resolveExpression(e,o.trimSlashes(r[1]));i&&n.push({name:"uuid",value:i});var a=e.contextItemName;a&&n.push({name:"contextItemName",value:a});var c=e.apiRoot||"",l=c+"/portal/contenttemplates/rendered",u=o.buildQueryString(n);return u&&(l+="?"+u),l},n.prototype.processResponse=function(e,t){var r=this;return e.text().then(function(e){if(a.isRunningOnFilesystem()){var n=t.contextRoot||"",i=t.remoteContextRoot||"",o=r._datasource.params.filter(function(e){return e.name===s})[0]||{},c="local"===o.value,l=c||!i?n:i;return a.isUrlAbsolute(l)?r._makeReferenceAbsolute(e,l):e}return e})},n.prototype._makeReferenceAbsolute=function(e,t){if("undefined"!=typeof DOMParser){var r=new DOMParser,n=r.parseFromString(e,"text/html");return this._getElementObjectsByAttr(n.body,"href").concat(this._getElementObjectsByAttr(n.body,"src")).filter(function(e){return e.value&&a.isUrlSiteRelative(e.value)}).forEach(function(e){var r=new URL(e.value,t).href;e.element.setAttribute(e.attr,r)}),n.body.innerHTML}return e},n.prototype._getElementObjectsByAttr=function(e,t){return Array.prototype.map.call(e.querySelectorAll("["+t+"]"),function(e){return{attr:t,value:e.getAttribute(t),element:e}})},n.getInstance=i.createFactoryFunction("contentrendered",n)},{"backbase-widget-engine/src/datasource/datasource-resolver":46,"backbase-widget-engine/src/datasource/datasource-resolver-helpers":45,"backbase-widget-engine/src/util/util":84}],150:[function(e,t,r){"use strict";function n(e){this._datasource=e}var i=e("backbase-widget-engine/src/datasource/datasource-resolver"),o=e("../model/parsers/xml/model-parser"),a=e("backbase-widget-engine/src/datasource/datasource-resolver-helpers");t.exports=n,n.prototype.resolveUrl=function(e){var t=this._datasource.uri,r=t.split(":");if(2!==r.length)throw new Error("Invalid link datasource uri: ",t);var n=[].concat(this._datasource.params||[]),i=a.trimSlashes(r[1]);i&&n.push({name:"f",value:"uuid(eq)"+i});var o=n.some(function(e){return"depth"===e.name});o||n.push({name:"depth",value:1});var s=e.apiRoot||"",c=e.portalName,l=s+"/portal/portals/"+c+"/links.xml",u=a.resolveQueryString(e,n);return u&&(l+="?"+u),l},n.prototype.processResponse=function(e){return e.text().then(function(e){var t=o.parseList(e);return t&&t.length?t[0]:null})},n.getInstance=i.createFactoryFunction("link",n)},{"../model/parsers/xml/model-parser":168,"backbase-widget-engine/src/datasource/datasource-resolver":46,
"backbase-widget-engine/src/datasource/datasource-resolver-helpers":45}],151:[function(e,t,r){"use strict";function n(e){this._datasource=e}var i=e("backbase-widget-engine/src/datasource/datasource-resolver"),o=e("backbase-widget-engine/src/datasource/datasource-resolver-helpers");t.exports=n,n.prototype.resolveUrl=function(e){var t=this._datasource.uri,r=t.split(":");if(2!==r.length)throw new Error("Invalid navigation datasource uri: ",t);var n=[].concat(this._datasource.params||[]),i=o.trimSlashes(r[1]);i&&n.push({name:"uuid",value:i});var a=e.apiRoot||"",s=a+"/portal/navigation/tree",c=o.resolveQueryString(e,n);return c&&(s+="?"+c),s},n.prototype.processResponse=function(e){return e.json()},n.getInstance=i.createFactoryFunction("navigation",n)},{"backbase-widget-engine/src/datasource/datasource-resolver":46,"backbase-widget-engine/src/datasource/datasource-resolver-helpers":45}],152:[function(e,t,r){"use strict";function n(e){this._datasource=e}var i=e("backbase-widget-engine/src/datasource/datasource-resolver"),o=e("../model/parsers/xml/model-parser"),a=e("backbase-widget-engine/src/datasource/datasource-resolver-helpers");t.exports=n,n.prototype.resolveUrl=function(e){var t=this._datasource.uri,r=t.split(":");if(2!==r.length)throw new Error("Invalid link datasource uri: ",t);var n=[].concat(this._datasource.params||[]);n.push({name:"pc",value:!1});var i=e.apiRoot||"",o=a.resolveExpression(e,a.trimSlashes(r[1])),s=a.resolveQueryString(e,n);return i+"/portal/portals/"+o+".xml?"+s},n.prototype.processResponse=function(e){return e.text().then(function(e){return o.parse(e)})},n.getInstance=i.createFactoryFunction("portal",n)},{"../model/parsers/xml/model-parser":168,"backbase-widget-engine/src/datasource/datasource-resolver":46,"backbase-widget-engine/src/datasource/datasource-resolver-helpers":45}],153:[function(e,t,r){"use strict";var n=e("./render/render.js"),i=e("./configuration/configuration.js"),o=e("./model/strategies/xml-cxp-model");t.exports={getRenderer:n.createInstance,createConfiguration:i.createInstance,getModel:o.createInstance}},{"./configuration/configuration.js":146,"./model/strategies/xml-cxp-model":171,"./render/render.js":175}],154:[function(e,t,r){"use strict";function n(e,t,r,n){this._config=e,this.type=t,this._portalName=r,this._filter=n||null,this._requiredParams=this._getRequiredParams(),this._logger=this._config.getLogger().child({childName:"item-collection-context"})}t.exports=n,n.prototype._getRequiredParams=function(){switch(this.type){case"link":return{depth:10,ps:50};case"page":return{depth:10};default:return null}},n.prototype.get=function(){throw new Error("Method not implemented")},n.prototype.create=function(e){throw new Error("Method not implemented")},n.prototype.filter=function(e,t,r){throw new Error("Method not implemented")}},{}],155:[function(e,t,r){"use strict";function n(e,t,r,n,i){this._config=e,this.itemName=t,this.itemType=r,this._findById=n||!1,this._portalName=i,this._requiredParams=this._getRequiredParams(),this._logger=this._config.getLogger().child({childName:"item-context"})}t.exports=n,n.prototype._getRequiredParams=function(){var e={},t=this._config.enabled("designmode"),r=this.itemType;return"link"!==r&&"page"!==r||(e.depth=10),!t||"widget"!==r&&"container"!==r&&"page"!==r||(e.designmode=!0),e},n.prototype.get=function(e){throw new Error("Method not implemented")},n.prototype.update=function(e){throw new Error("Method not implemented")},n.prototype.revert=function(){throw new Error("Method not implemented")},n.prototype.remove=function(){throw new Error("Method not implemented")}},{}],156:[function(e,t,r){"use strict";function n(e,t,r,n){var i=e.preferences[t];i||(i={name:t},e.preferences[t]=i),i.value=r,n&&(i.type=n)}function i(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return s[255&e]+s[e>>8&255]+s[e>>16&255]+s[e>>24&255]+"-"+s[255&t]+s[t>>8&255]+"-"+s[t>>16&15|64]+s[t>>24&255]+"-"+s[63&r|128]+s[r>>8&255]+"-"+s[r>>16&255]+s[r>>24&255]+s[255&n]+s[n>>8&255]+s[n>>16&255]+s[n>>24&255]}function o(e){return e+i()}function a(e,t){var r={designmode:["designModeOnly"],role:["admin","manager","user","none"],input:["text-input","checkbox","select-one"],order:[]};if(!t||!t.length||!r[e])return null;var n=t.filter(function(t){return r[e].indexOf(t)!==-1||t.slice(0,e.length)===e})[0];if(n&&"order"===e){var i=n.split("-");i=2===i.length?i[1]:null;var o=parseFloat(i);isNaN(o)||(i=o),n=i}return n=n||("input"===e?"text-input":null),"designmode"===e&&(n=!!n),n}t.exports={modifyPreference:n,generateItemName:o,getViewHint:a};for(var s=[],c=0;c<256;c++)s[c]=(c<16?"0":"")+c.toString(16)},{}],157:[function(e,t,r){"use strict";function n(e){this.config=e,this.helpers=i}var i=e("../core/model-helpers");t.exports=n,n.prototype.items=function(e,t){throw new Error("Method not implemented")},n.prototype.item=function(e,t,r){throw new Error("Method not implemented")},n.prototype.itemById=function(e,t,r){throw new Error("Method not implemented")},n.prototype.portal=function(e){throw new Error("Method not implemented")}},{"../core/model-helpers":156}],158:[function(e,t,r){"use strict";function n(e,t){this._config=e,Object.defineProperty(this,"portalName",{value:t||this._config.get("portalName")})}n.prototype.item=function(e,t,r){throw new Error("Method not implemented")},n.prototype.itemById=function(e,t,r){throw new Error("Method not implemented")},n.prototype.items=function(e,t){throw new Error("Method not implemented")},t.exports=n},{}],159:[function(e,t,r){"use strict";function n(e){this.configuration=e;var t=e.get("remoteContextRoot");if("string"!=typeof t)throw new Error("RestApiConsumer needs remoteContextRoot variable to be set");/\/$/.test(t)===!1&&(t+="/"),this.baseUrl=t,this.logger=e.getLogger().child({childName:"rest-api-consumer"})}function i(e){return new n(e)}function o(e){return c.isObject(e)?"application/json":e&&e.indexOf("<?xml")>=0?"text/xml":"application/xml"}function a(e){return e.get("csrfToken")||null}var s=e("backbase-widget-engine/src/util/deduping-fetch"),c=e("../../util");t.exports={RestApiConsumer:n,createInstance:i},n.prototype._encodeQueryParameters=function(e){var t=[];return Object.keys(e).forEach(function(r){Array.isArray(e[r])?e[r].forEach(function(e){t.push(r+"[]="+encodeURIComponent(e))}):t.push(r+"="+encodeURIComponent(e[r]))}),t.join("&")},n.prototype._buildUrl=function(e,t){var r=this._encodeQueryParameters(t||{}),n=this.baseUrl+e;return r.length>0&&(n+=(e.indexOf("?")>=0?"&":"?")+r),n},n.prototype._makeRequest=function(e,t,r){var n=this,i=this._buildUrl(e,r);this.logger.debug("Making REST request to [%s]",i);var o=s(i,t).then(function(e){if(e.status<200||e.status>=300){var t=new Error(e.statusText);throw t.response=e,t}return n.logger.debug("Request successful server responds %s",e.status),e});return o["catch"](function(e){n.logger.error("Request failed with: %s",e)}),o},n.prototype.get=function(e,t){return this._makeRequest(e,{method:"GET",headers:{Pragma:"no-cache","Cache-Control":"no-cache"}},t)},n.prototype.post=function(e,t){var r={};c.isObject(t)&&(t=JSON.stringify(t));var n=o(t);n&&(r["Content-Type"]=n);var i=a(this.configuration);return i&&(r[i.name]=i.value),this._makeRequest(e,{method:"POST",body:t,headers:r})},n.prototype.put=function(e,t){var r={};c.isObject(t)&&(t=JSON.stringify(t));var n=o(t);n&&(r["Content-Type"]=n);var i=a(this.configuration);return i&&(r[i.name]=i.value),this._makeRequest(e,{method:"PUT",body:t||"",headers:r})},n.prototype["delete"]=function(e,t){var r={},n=a(this.configuration);return n&&(r[n.name]=n.value),this._makeRequest(e,{method:"DELETE",headers:r},t)}},{"../../util":178,"backbase-widget-engine/src/util/deduping-fetch":78}],160:[function(e,t,r){"use strict";var n=e("./property-generator"),i=["type","name","contextItemName","extendedItemName","parentItemName"],o=["shortName","description"];t.exports=function(e,t,r){r=r||[],i.forEach(function(r){t.hasOwnProperty(r)&&(e.beginElement(r),e.text(t[r]),e.endElement(r))}),t.id&&(e.beginElement("uuid"),e.text(t.id),e.endElement("uuid")),"boolean"==typeof t.manageable&&(e.beginElement("manageable"),e.text(t.manageable?"true":"false"),e.endElement("manageable")),e.beginElement("properties"),o.forEach(function(r){t[r]&&n(e,{name:r,readonly:!1,value:t[r]})}),Array.isArray(r)&&r.length>0&&r.forEach(function(t){n(e,t)}),Array.isArray(t.icons)&&t.icons.length>0&&t.icons.forEach(function(t,r){var i=0===r?"thumbnailUrl":"icon";n(e,{name:i,readonly:!1,value:t})});var a=t.preferences||{};return Object.keys(a).forEach(function(r){n(e,a[r],t.locale)}),e.endElement("properties"),t.tags&&t.tags.length>0&&(e.beginElement("tags"),t.tags.forEach(function(t){var r={type:t.type};t.manageable&&(r.manageable=!0),t.blacklist&&(r.blacklist=!0),e.beginElement("tag",r),e.text(t.name),e.endElement("tag")}),e.endElement("tags")),e}},{"./property-generator":163}],161:[function(e,t,r){"use strict";var n=e("./xml-builder"),i=e("./base-xml-generator");t.exports=function(e){var t=new n;return t.beginElement("link"),i(t,e),t.endElement("link"),t.toString()}},{"./base-xml-generator":160,"./xml-builder":165}],162:[function(e,t,r){"use strict";var n=e("./xml-builder"),i=e("./base-xml-generator");t.exports=function(e){var t=new n;return t.beginElement("page"),i(t,e),t.endElement("page"),t.toString()}},{"./base-xml-generator":160,"./xml-builder":165}],163:[function(e,t,r){"use strict";function n(e,t,r){var n={name:t.name,readonly:t.readonly||!1},i=t.type||("order"===t.name?"double":null);"boolean"==typeof t.manageable&&(n.manageable=t.manageable),"boolean"==typeof t.localizable&&(n.localizable=t.localizable),t.markedForDeletion===!0&&(n.markedForDeletion=!0),t.label&&(n.label=t.label),i&&(n.type=i),t.viewhints&&t.viewhints.length>0&&(n.viewHint=t.viewhints.join(",")),e.beginElement("property",n),o(e,t,r),e.endElement("property")}function i(e,t,r){e.beginElement("value",r),e.text(t),e.endElement("value")}function o(e,t,r){var n=r||a;if(t.localizable){var o=t._lang;o||(o={},o[n]={value:t.value}),Object.keys(o).forEach(function(t){var r=o[t],n={};r.markedForDeletion===!0&&(n.markedForDeletion=!0),t!==a&&(n.locale=t),i(e,r.value,n)})}else i(e,t.value)}var a=e("backbase-widget-engine/src/strategies/parser/xml/constants").NO_LOCALE_NAME;t.exports=n},{"backbase-widget-engine/src/strategies/parser/xml/constants":64}],164:[function(e,t,r){"use strict";var n=e("./xml-builder"),i=e("./base-xml-generator"),o=["author","authorEmail","authorHref","license","licenseHref"];t.exports=function(e,t){var r=t?"container":"widget",a=[];o.forEach(function(t){e[t]&&a.push({name:t,readonly:!1,value:e[t]})}),e.content&&e.content.src&&a.push({name:"src",readonly:!1,value:e.content.src}),e.altContent&&Object.keys(e.altContent).forEach(function(t){a.push({name:"src."+t,readonly:!1,value:e.altContent[t].src})}),e.viewmodes&&e.viewmodes.length>0&&a.push({name:"viewmodes",readonly:!1,value:e.viewmodes.join(" ")});var s=new n;return s.beginElement(r),i(s,e,a),s.endElement(r),s.toString()}},{"./base-xml-generator":160,"./xml-builder":165}],165:[function(e,t,r){"use strict";function n(e){return e.replace(s,function(e){return a[e]||e})}function i(e){return null===e||void 0===e?"":String(e)}function o(){this._xml=""}t.exports=o;var a={"<":"&lt;",">":"&gt;",'"':"&quot;","&":"&amp;"},s=/[<>"&]/g;o.prototype.beginElement=function(e,t){var r="";t&&(r=Object.keys(t).reduce(function(e,r){var o=i(t[r]);return e+" "+r+'="'+n(o)+'"'},"")),this._xml+="<"+e+r+">"},o.prototype.endElement=function(e){this._xml+="</"+e+">"},o.prototype.text=function(e){this._xml+=n(i(e))},o.prototype.xml=function(e){this._xml+=e},o.prototype.toString=function(){return this._xml}},{}],166:[function(e,t,r){"use strict";function n(e){return s(e,!0)}function i(e){return s(e,!1)}function o(e,r){var n=r||e.type;if(!n)throw new TypeError('Item type is required. Either provide it as the second argument or set "type" property of the model');var i="generate"+n[0].toUpperCase()+n.substr(1);if(!t.exports[i])throw new Error("Unsupported type passed "+r);return t.exports[i](e)}function a(e){if(!e)throw new TypeError("catalogItems argument is required. It must be an item model object or an array of such objects.");Array.isArray(e)||(e=[e]);var t=new u;return t.beginElement("catalog"),e.forEach(function(e){t.xml(o(e))}),t.endElement("catalog"),t.toString()}var s=e("./widget-xml-generator"),c=e("./page-xml-generator"),l=e("./link-xml-generator"),u=e("./xml-builder");t.exports={generate:o,generateWidget:i,generateContainer:n,generatePage:c,generateLink:l,generateCatalog:a}},{"./link-xml-generator":161,"./page-xml-generator":162,"./widget-xml-generator":164,"./xml-builder":165}],167:[function(e,t,r){"use strict";function n(e){var t=f(e),r=t.preferencesDict,n=r.itemType;"menuHeader"===n&&(n="LINK");var i={children:[],itemType:n,title:r.title};"function"==typeof g[n]&&g[n](i,r);var o=p(e);return(o||[]).length>0&&(i.children=o),delete i.preferencesDict,h(t,i)}function i(e){e.navPattern=null}function o(e,t){e.itemRef=t.ItemRef,e.href=t.generatedUrl,t.Url&&(e.url=t.Url),e.generatedUrl=t.generatedUrl}function a(e,t){e.className=t.className}function s(e,t){e.url=t.Url}function c(e,t){e.redirectionMethod=t.redirectionMethod,e.url=t.Url,e.targetPage=t.targetPage}function l(e,t){e.itemRef=t.ItemRef,e.href=t.generatedUrl,t.Url&&(e.url=t.Url),e.generatedUrl=t.generatedUrl}function u(e,t){e.itemRef=t.ItemRef,e.href=t.generatedUrl,t.Url&&(e.url=t.Url),e.generatedUrl=t.generatedUrl;try{e.state=JSON.parse(t.State)}catch(r){throw new Error('Failed to parse "state" property of link ['+e.itemRef+"]. Error: "+r.message)}t.sectionName&&(e.sectionName=t.sectionName)}function p(e){var t=d.getChildElementByName(e,"children"),r=t&&d.getChildElements(t);return r&&r.map(n)}var h=e("../../../util").merge,f=e("backbase-widget-engine/src/strategies/parser/xml/item"),d=e("backbase-widget-engine/src/strategies/parser/xml/helpers");t.exports=n;var g={LINK:i,divider:a,page:o,externalLink:s,redirect:c,alias:l,state:u}},{"../../../util":178,"backbase-widget-engine/src/strategies/parser/xml/helpers":65,"backbase-widget-engine/src/strategies/parser/xml/item":66}],168:[function(e,t,r){"use strict";var n=e("./link"),i=e("./page"),o=e("./portal"),a=e("backbase-widget-engine/src/strategies/parser/xml/model-parser"),s=a.createInstance();s.setParser("link",n),s.setParser("page",i),s.setParser("portal",o),t.exports=s},{"./link":167,"./page":169,"./portal":170,"backbase-widget-engine/src/strategies/parser/xml/model-parser":67}],169:[function(e,t,r){"use strict";function n(e){var t=o(e),r=t.preferencesDict,n={content:i(r),children:[],description:r.description,icons:s.parseIcons(r)},c=s.parseChildren(e,a);return(c||[]).length>0&&(n.children=c),delete t.preferencesDict,l(t,n)}function i(e){var t={src:"",type:"text/html",encoding:"UTF-8"};return c.assignIfExists(t,"src",e.src),t}var o=e("backbase-widget-engine/src/strategies/parser/xml/item"),a=e("backbase-widget-engine/src/strategies/parser/xml/widget"),s=e("backbase-widget-engine/src/strategies/parser/xml/common"),c=e("backbase-widget-engine/src/strategies/parser/xml/helpers"),l=e("../../../util").merge;t.exports=n},{"../../../util":178,"backbase-widget-engine/src/strategies/parser/xml/common":63,"backbase-widget-engine/src/strategies/parser/xml/helpers":65,"backbase-widget-engine/src/strategies/parser/xml/item":66,"backbase-widget-engine/src/strategies/parser/xml/widget":68}],170:[function(e,t,r){"use strict";function n(e){var t=i(e);return delete t.preferencesDict,t}var i=e("backbase-widget-engine/src/strategies/parser/xml/item");t.exports=n},{"backbase-widget-engine/src/strategies/parser/xml/item":66}],171:[function(e,t,r){"use strict";function n(e){o.apply(this,[e])}function i(e){return new n(e)}var o=e("../core/model"),a=e("./xml-portal-context");t.exports={XmlCxpModel:n,createInstance:i},n.prototype=Object.create(o.prototype),n.prototype.items=function(e,t){return new a(this.config).items(e,t)},n.prototype.item=function(e,t,r){return new a(this.config).item(e,t,r)},n.prototype.itemById=function(e,t,r){return new a(this.config).itemById(e,t,r)},n.prototype.portal=function(e){return new a(this.config,e)}},{"../core/model":157,"./xml-portal-context":174}],172:[function(e,t,r){"use strict";function n(e,t,r,n){a.call(this,e,t,r,n),this._apiConsumer=s.createInstance(this._config)}var i=e("../parsers/xml/model-parser"),o=e("../generators/xml-generator"),a=e("../core/item-collection-context"),s=e("../core/rest-api-consumer");t.exports=n,n.prototype=Object.create(a.prototype),n.prototype.get=function(){var e=this._portalName,t="portals/"+e+"/"+this.type+"s",r=this._filter,n=this._requiredParams,o=[],a=[];r&&(o=["f="+r.name+"("+r.operator+")"+encodeURIComponent(r.value)]),n&&(a=Object.keys(n).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])}));var s=o.concat(a).join("&");return t+=s.length>0?"?"+s:"",this._apiConsumer.get(t).then(function(e){return e.text()}).then(function(e){this._logger.info("Parsing %s",t);var r=i.parseList(e);return this._logger.info("%s parsed successfully"),r}.bind(this))},n.prototype.filter=function(e,t,r){var i={name:e,value:t,operator:r||"eq"};return new n(this._config,this.type,this._portalName,i)},n.prototype.create=function(e){var t=["parentItemName"];"link"!==this.type&&t.push("extendedItemName"),t.forEach(function(t){if("undefined"==typeof e[t]||"string"!=typeof e[t]||0===e[t].length)throw new Error("ItemCollectionContext.create needs the model has the field named: "+t)});var r=this._portalName;e.contextItemName=r,"undefined"==typeof e.preferences&&(e.preferences={});var n=o.generate(e,this.type),a="portals/"+r+"/"+this.type+"s";return this._apiConsumer.post(a,n).then(function(e){return e.text()}).then(function(e){this._logger.info("Parsing newly created item's xml");var t=i.parse(e);return this._logger.info("Newly created item parsed successfully"),t}.bind(this))}},{"../core/item-collection-context":154,"../core/rest-api-consumer":159,"../generators/xml-generator":166,"../parsers/xml/model-parser":168}],173:[function(e,t,r){"use strict";function n(e,t,r,n,i){s.call(this,e,t,r,n,i),this._apiConsumer=a.createInstance(this._config)}var i=e("../parsers/xml/model-parser"),o=e("../generators/xml-generator"),a=e("../core/rest-api-consumer"),s=e("../core/item-context");t.exports=n,n.prototype=Object.create(s.prototype),n.prototype.get=function(e){var t="object"==typeof e?e:{};return this._findById?this._getItemById():this._getItemByName(t)},n.prototype._buildParams=function(){return Object.keys(this._requiredParams).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(this._requiredParams[e])}.bind(this)).join("&")},n.prototype._getItemByName=function(e){var t=this._portalName,r=this.itemType+"s/"+this.itemName,n=e.allLocalizedValues===!0?"/details":".xml",o="portals/"+t+"/"+r+n,a=this._buildParams();return a.length>0&&(o+="?"+a),this._apiConsumer.get(o).then(function(e){return e.text()}).then(function(e){this._logger.info("Parsing response from [%s]",r);var t=i.parse(e);return this._logger.info("Response from [%s] parsed successfully",r),t}.bind(this))},n.prototype._getItemById=function(){var e=this._portalName,t=encodeURIComponent(this.itemName),r=this.itemType+"s",n=r+"?f=uuid(eq)"+t,o="portals/"+e+"/"+n,a=this._buildParams();return a.length>0&&(o+="&"+a),this._apiConsumer.get(o).then(function(e){return e.text()}).then(function(e){this._logger.info("Parsing response from [%s]",n);var t=i.parseList(e);this._logger.info("Response from [%s] parsed successfully",n);var r=t[0];if(!r)throw new Error("Item of type ["+this.itemType+"] with id ["+this.itemName+"] not found");return r}.bind(this))},n.prototype.update=function(e){var t=this._portalName,r="portals/"+t+"/"+this.itemType+"s/"+this.itemName,n=e;e.name&&e.name.indexOf("~")>0&&(n=Object.create(e),n.parentItemName=void 0,n.extendedItemName=void 0,n.id=void 0);var i=o.generate(n,this.itemType);return this._apiConsumer.put(r,i).then(function(){this._logger.info("%s named %s updated successfully",this.itemType,this.itemName)}.bind(this))},n.prototype.revert=function(){var e="portals/"+this._portalName+"/"+this.itemType+"s/"+this.itemName+".xml";return this._apiConsumer["delete"](e)},n.prototype.remove=function(){var e="portals/"+this._portalName+"/"+this.itemType+"s/"+this.itemName;return this._apiConsumer["delete"](e)}},{"../core/item-context":155,"../core/rest-api-consumer":159,"../generators/xml-generator":166,"../parsers/xml/model-parser":168}],174:[function(e,t,r){"use strict";function n(){i.apply(this,[].slice.call(arguments))}var i=e("../core/portal-context"),o=e("./xml-item-context"),a=e("./xml-item-collection-context");n.prototype=Object.create(i.prototype),n.prototype.item=function(e,t,r){var n=r&&r.config||this._config;return new o(n,e,t,(!1),this._getPortalName(r))},n.prototype.itemById=function(e,t,r){var n=r&&r.config||this._config;return new o(n,e,t,(!0),this._getPortalName(r))},n.prototype.items=function(e,t){var r=t&&t.config||this._config;return new a(r,e,this._getPortalName(t))},n.prototype._getPortalName=function(e){var t=e&&e.config;return t&&t.get("portalName")||this.portalName},t.exports=n},{"../core/portal-context":158,"./xml-item-collection-context":172,"./xml-item-context":173}],175:[function(e,t,r){"use strict";var n=e("./strategies/html5-item-renderer"),i=function(e){return e.get("contextRoot")||e.set("contextRoot",""),e.get("remoteContextRoot")||e.set("remoteContextRoot",""),new n(e)};t.exports={createInstance:i}},{"./strategies/html5-item-renderer":177}],176:[function(e,t,r){(function(r){"use strict";function n(e,t){t=t||{};var r=t.log||e.getLogger();this._config=e,this._log=r.child({childName:"chrome-renderer"})}var i=e("handlebars/dist/handlebars.min"),o=e("handlebars-helpers"),a=e("backbase-widget-engine/src/util/deduping-fetch"),s=["windowed","maximized"],c="data-chrome",l="data-widget-holder",u={},p=i.create();Object.keys(o).forEach(function(e){p.registerHelper(e,o[e])}),t.exports=n,n.prototype.getChrome=function(e,t,r){var n=this._findChromeElement(e,t.name),i=this._findWidgetHolderElement(n);return i?Promise.resolve({chromeElement:n,widgetHolderElement:i}):this._renderChrome(e,t,r)},n.prototype._renderChrome=function(e,t,n){var i,o,a=this,u=!n||n.useChrome!==!1,p=e&&e.ownerDocument||r.document,h=u?this._getTemplate():Promise.resolve(null);return h.then(function(e){if(e&&t.viewmodes&&s.indexOf(t.viewmodes[0])>=0){var r=e(t),n=p.createElement("div");n.innerHTML=r,i=a._findChromeElement(n,t.name),o=a._findWidgetHolderElement(i),i?i.parentNode.removeChild(i):a._log.warn('Chrome layout does not have an element with "data-chrome" attribute. Falling back to blank chrome.'),o||(i=null,a._log.warn('Chrome layout does not have an element with "data-widget-holder" attribute. Falling back to blank chrome.'))}return i||(i=p.createElement("div"),i.setAttribute(c,t.name),i.setAttribute(l,""),o=i),{chromeElement:i,widgetHolderElement:o}})},n.prototype._getTemplate=function(){var e=this._config.get("chromeSrc"),t=this._log;if(!e){var r='No chrome template configured. Widgets with "windowed" or "maximized" view modes will be displayed without chrome.';return t.warn(r),Promise.resolve(null)}var n=this._config.get("contextRoot"),i=this._config.get("apiRoot"),o=e.replace(/\$\(contextRoot\)/,n).replace(/\$\(apiRoot\)/,i),s=u[o];return s||(t.debug("Requesting chrome template from %s",o),s=a(o).then(function(e){if(t.debug("Chrome template request resolved. Status: %s",e.status),0===e.status||200===e.status)return e.text();throw new Error(e.statusText)}).then(function(e){t.trace("Chrome template body\n: %s",e),t.debug("Compiling handlebars template instance from %s",o);try{return p.compile(e)}catch(r){throw t.error("There was a problem compiling a handlebars template"),r}})["catch"](function(e){return t.error(e),delete u[o],null}),u[o]=s),s},n.prototype._findChromeElement=function(e,t){if(!e)return null;var r="*["+c+'="'+(t||"")+'"]';return e.querySelector(r)},n.prototype._findWidgetHolderElement=function(e){if(!e)return null;var t="*["+l+"]";return e.hasAttribute(l)?e:e.querySelector(t)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"backbase-widget-engine/src/util/deduping-fetch":78,"handlebars-helpers":87,"handlebars/dist/handlebars.min":88}],177:[function(e,t,r){"use strict";var n=e("backbase-widget-engine"),i=e("promise-extensions")(Promise),o=e("browser-bunyan"),a=e("../../util"),s=e("./chrome-renderer"),c=e("../../datasource/link-datasource-resolver"),l=e("../../datasource/portal-datasource-resolver"),u=e("../../datasource/contentrendered-datasource-resolver"),p=e("../../datasource/navigation-datasource-resolver"),h=e("../../datasource/breadcrumb-datasource-resolver"),f=function(e){this.config=e,this.log=e.getLogger().child({childName:"html5-item-renderer"}),this.plugins=[],this.features=[],this._widgetEngines=[],this._chromeRenderer=new s(e,{log:this.log}),this._datasourceResolvers=[c.getInstance,l.getInstance,u.getInstance,p.getInstance,h.getInstance]};t.exports=f,f.prototype.start=function(e,t,r){if(!e||0===e.length)return i.resolve();r=r||{};var n=this.log,s=this;n.info("Starting item tree rendering..."),n.level()<=o.TRACE&&n.trace("Item tree model is this:\n %s",JSON.stringify(e,null,"\t"));var c=Date.now(),l=Array.isArray(e)?e:[e];if(1===l.length&&r.contentName){var u=a.cloneDeep(l[0]);if(u.content=u.altContent[r.contentName],"undefined"==typeof u.content){var p=new Error('Given content name "'+r.contentName+'" not found for item named "'+e.name+'"');return i.reject(p)}l=[u]}return this._render(l,t,r).then(function(e){n.info("Item tree rendering complete.");var t=Date.now()-c,r={time:t,failures:[]},i=s._flattenArray(e);r=i.reduce(function(e,t){if(t.isRejected()){var r="function"==typeof t.reason.cause&&t.reason.cause()||t.reason;e.failures.push(r)}return e},r);var o=r.failures.length;if(o>0&&n.warn("%s/%s items failed to load.",o,i.length),o===i.length){var a=new Error("All items in a rendering tree failed to render");throw a.result=r,a}return r})},f.prototype.addFeature=function(e){return"object"==typeof e&&this.features.push(e),this},f.prototype.addPlugin=function(e){return"object"==typeof e&&this.plugins.push(e),this},f.prototype._renderItem=function(e,t){var r=this,i=this.config,o="";e.content&&e.content.src?o=e.content.src.replace(/\/[^\/]+$/,""):e.content&&e.content.config&&(o=e.content.config.replace(/\/[^\/]+$/,"")),o=o.replace(/\$\(contextRoot\)/,i.get("contextRoot")).replace(/\$\(apiRoot\)/,i.get("apiRoot"));var a=new n({log:this.log}),s=i.get("storageFactory");a.init({widgetPath:o,widgetEl:t,initialModel:e,storage:s?s.get(e):null,configVars:i.toSerializableObject()}),this._datasourceResolvers.forEach(function(e){a.addDatasourceResolver(e)}),this.plugins.forEach(function(e){a.addPlugin(e)}),this.features.forEach(function(e){a.addFeature(e)}),i.enabled("compat")&&a.enableCompatibility();var c=a.start(e,t);return c.delay(0).then(function(e){return r._widgetEngines.push(a),e})},f.prototype.destroyAllItems=function(){this._widgetEngines.forEach(function(e){e.destroy()}),this._widgetEngines=[]},f.prototype.destroyItem=function(e){var t=this._widgetEngines.filter(function(t){return t.widgetEngine.config.initialModel.id===e})[0];if(t){t.destroy();var r=this._widgetEngines.indexOf(t);return this._widgetEngines.splice(r,1),this}},f.prototype.rerenderItem=function(e,t,r){var n=document.createElement("div"),i=document.querySelector('[data-chrome="'+t+'"]');return i.parentNode.insertBefore(n,i),this.destroyItem(e),this.start(r,n).then(function(){var e=n.firstElementChild;n.parentNode.insertBefore(e,n),n.parentNode.removeChild(n)})},f.prototype._render=function(e,t,r){var n=this,o=e.map(function(e){return n._chromeRenderer.getChrome(t,e,r)});return Promise.all(o).then(function(r){return r.map(function(r,n){return{itemModel:e[n],chrome:r,parentEl:t}})}).then(function(e){var t=[];return e.forEach(function(e,r,i){n._attachChrome(e,r,i),t.push(n._renderItem(e.itemModel,e.chrome.widgetHolderElement))}),i.settleAll(t)}).then(function(t){var i=[];return t.filter(function(e){return e.isFulfilled()}).map(function(e){return e.value}).forEach(function(t){var o=t.areaNodes;if(o){var a=e.filter(function(e){return e.id===t.id})[0];Object.keys(o).forEach(function(e){var s=a.children||[],c=s.filter(function(t){var r;return r=Array.isArray(t.preferences)?t.preferences.filter(function(e){return"area"===e.name})[0]:t.preferences.area,r&&r.value===e});n.log.info("Rendering %s child item(s) for area [%s] of item [%s]...",c.length,e,t.id);var l=o[e];i.push(n._render(c,l,r))})}}),Promise.all(t.concat(i))})},f.prototype._attachChrome=function(e,t,r){var n,i=e.chrome.chromeElement,o=e.parentEl;if(!i.parentNode){if(0===t)n=o.firstElementChild;else{var a=r[t-1].chrome.chromeElement;n=a.nextElementSibling}o.insertBefore(i,n)}},f.prototype._flattenArray=function d(e){return e.reduce(function(e,t){return e.concat(Array.isArray(t)?d(t):t)},[])}},{"../../datasource/breadcrumb-datasource-resolver":148,"../../datasource/contentrendered-datasource-resolver":149,"../../datasource/link-datasource-resolver":150,"../../datasource/navigation-datasource-resolver":151,"../../datasource/portal-datasource-resolver":152,"../../util":178,"./chrome-renderer":176,"backbase-widget-engine":47,"browser-bunyan":86,"promise-extensions":145}],178:[function(e,t,r){"use strict";t.exports={isObject:e("lodash/lang/isObject"),merge:e("lodash/object/merge"),cloneDeep:e("lodash/lang/cloneDeep")}},{"lodash/lang/cloneDeep":130,"lodash/lang/isObject":135,"lodash/object/merge":142}],179:[function(e,t,r){"use strict";t.exports=e("backbase-widget-engine/src/util/deduping-fetch")},{"backbase-widget-engine/src/util/deduping-fetch":78}],180:[function(e,t,r){!function(){function e(e){var t=e.__resizeTriggers__,r=t.firstElementChild,n=t.lastElementChild,i=r.firstElementChild;n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight,i.style.width=r.offsetWidth+1+"px",i.style.height=r.offsetHeight+1+"px",r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight}function t(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height}function r(r){var n=this;e(this),this.__resizeRAF__&&s(this.__resizeRAF__),this.__resizeRAF__=a(function(){t(n)&&(n.__resizeLast__.width=n.offsetWidth,n.__resizeLast__.height=n.offsetHeight,n.__resizeListeners__.forEach(function(e){e.call(n,r)}))})}function n(){if(!o){var e=(y?y:"")+".resize-triggers { "+(b?b:"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e)),t.appendChild(r),o=!0}}var i=document.attachEvent,o=!1;if(!i){var a=function(){var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)};return function(t){return e(t)}}(),s=function(){var e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout;return function(t){return e(t)}}(),c=!1,l="animation",u="",p="animationstart",h="Webkit Moz O ms".split(" "),f="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),d="",g=document.createElement("fakeelement");if(void 0!==g.style.animationName&&(c=!0),c===!1)for(var m=0;m<h.length;m++)if(void 0!==g.style[h[m]+"AnimationName"]){d=h[m],l=d+"Animation",u="-"+d.toLowerCase()+"-",p=f[m],c=!0;break}var v="resizeanim",y="@"+u+"keyframes "+v+" { from { opacity: 0; } to { opacity: 0; } } ",b=u+"animation: 1ms "+v+"; ";
}window.addResizeListener=function(t,o){i?t.attachEvent("onresize",o):(t.__resizeTriggers__||("static"==getComputedStyle(t).position&&(t.style.position="relative"),n(),t.__resizeLast__={},t.__resizeListeners__=[],(t.__resizeTriggers__=document.createElement("div")).className="resize-triggers",t.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',t.appendChild(t.__resizeTriggers__),e(t),t.addEventListener("scroll",r,!0),p&&t.__resizeTriggers__.addEventListener(p,function(r){r.animationName==v&&e(t)})),t.__resizeListeners__.push(o))},window.removeResizeListener=function(e,t){i?e.detachEvent("onresize",t):(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),e.__resizeListeners__.length||(e.removeEventListener("scroll",r),e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)))}}()},{}],181:[function(e,t,r){"use strict";!function(e){var t=e.prototype,r=t.parseFromString;t.parseFromString=function(e,t){if(/^\s*text\/html\s*(?:;|$)/i.test(t)){var n=document.implementation.createHTMLDocument("");return e.toLowerCase().indexOf("<!doctype")>-1?n.documentElement.innerHTML=e:n.body.innerHTML=e,n}return r.apply(this,arguments)}}(DOMParser),window.system_scroll=window.scroll,window.scroll=function(e,t){window.cxp.mobile.scrollTo(""+e,""+t),window.system_scroll(e,t)}},{}],182:[function(e,t,r){"use strict";window.b$.module("gadgets.pubsub",function(){function e(e,t,r,n){"boolean"!=typeof r&&(r=!0),c.publish(e,t,r,n)}function t(e,t){c.subscribe(e,t)}function r(e,t){c.unsubscribe(e,t)}function n(e){c.flush(e)}function i(e){function t(t){return"[{"+e+"}]."+t}var r=this;return{publish:function(e,n,i,o){r.publish(t(e),n,i,o)},subscribe:function(e,n){r.subscribe(t(e),n)},unsubscribe:function(e,n){r.unsubscribe(t(e),n)},flush:function(e){r.flush(t(e))}}}var o=window.b$.Class,a=o.extend(function(){this.callbacks=[]},{queue:[],subscribe:function(e){this.callbacks.push(e)},unsubscribe:function(e){e?this.callbacks=this.callbacks.filter(function(t){return t!==e}):this.callbacks=[]},publish:function(e,t){t&&this.flush(),this.callbacks.forEach(function(t){t(e)})},flush:function(){this.queue=[]}}),s=o.extend(function(){this.channels={}},{subscribe:function(e,t){this.channels[e]||(this.channels[e]=new a),this.channels[e].subscribe(t),window.cxp.mobile.subscribe(e)},unsubscribe:function(e,t){this.channels[e]&&(this.channels[e].unsubscribe(t),window.cxp.mobile.unsubscribe(e))},publish:function(e,t,r,n){this.channels[e]&&this.channels[e].publish(t,r),t=t||{},n=n||"","SYSTEM"!==n&&window.cxp.mobile.publish(e,JSON.stringify(t),n)},flush:function(e){this.channels[e]&&this.channels[e].flush()}}),c=new s;this.name="pubsub",this.publish=e,this.subscribe=t,this.unsubscribe=r,this.flush=n,this.channel=i})},{}],183:[function(e,t,r){"use strict";window.cxp=window.cxp||{},window.mobile=window.mobile||{},window.cxp.mobile=window.mobile,window.cxp.mobile.render=function(t,r,n,i,o,a,s,c){e("./common/dom-parser-polyfill"),e("javascript-detect-element-resize"),e("./common/pubsub");var l,u=/(iPhone|iPod|iPad).*AppleWebKit/i.test(navigator.userAgent);if(u){console.info("Portal Client Mobile is rendering in iOS mode");var p=e("./platforms/ios/ios-bridge");p.enable(),l=e("./platforms/ios/ios-page-renderer")}else console.info("Portal client mobile is rendering in Android mode"),l=e("./platforms/android/android-page-renderer");window.cxp.mobile.plugins=a,o.contextItemName=c;var h=new l;h.render(document.getElementById(t),o,window.gadgets.pubsub,{portalName:c,localContextRoot:r,remoteContextRoot:n,apiRoot:i,logLevel:s})},window.renderWidget=window.cxp.mobile.render},{"./common/dom-parser-polyfill":181,"./common/pubsub":182,"./platforms/android/android-page-renderer":187,"./platforms/ios/ios-bridge":188,"./platforms/ios/ios-page-renderer":189,"javascript-detect-element-resize":180}],184:[function(e,t,r){"use strict";var n=function(e){this.size=e||1e3,this.buffer=[],this.decoratedStreams=[]};n.prototype.decorateStream=function(e){this.decoratedStreams.push(e)},n.prototype.write=function(e){this.buffer.length>=this.size&&this.buffer.shift(),this.buffer.push(e)},n.prototype.flush=function(){for(var e;e=this.buffer.shift();)this.decoratedStreams.forEach(function(t){t.write(e)})},n.prototype.clear=function(){this.buffer=[]},t.exports=n},{}],185:[function(e,t,r){"use strict";function n(e){e=e||{},this.printLevel=!!e.printLevel,this.printTimestamp=!!e.printTimestamp}n.prototype.write=function(e){function t(e,t){return Array(t+1-(e+"").length).join("0")+e}function r(){return"["+t(e.time.getHours(),2)+":"+t(e.time.getMinutes(),2)+":"+t(e.time.getSeconds(),2)+":"+t(e.time.getMilliseconds(),4)+"]"}var n,i=e.childName?e.name+"/"+e.childName:e.name;n=e.level<30?"log":e.level<40?"info":e.level<50?"warn":"error";var o=this.printTimestamp?r()+" ":"",a=this.printLevel?e.levelName.toUpperCase()+": ":"";console[n](o+a+i+": "+e.msg)},t.exports=n},{}],186:[function(e,t,r){(function(e){"use strict";var r=e.document,n=function(){};n.prototype.write=function(e){var t=r.createElement("IFRAME");t.setAttribute("src","log://?type="+e.levelName+"&msg="+e.msg+" ("+e.time+")"),r.documentElement.appendChild(t),t.parentNode.removeChild(t),t=null},t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],187:[function(e,t,r){"use strict";var n=e("../../render/page-renderer"),i=e("../../logging/console-plain-log-stream"),o=function(){n.call(this)};o.prototype=Object.create(n.prototype),o.prototype._createLogStreams=function(e){return[{level:e,stream:new i}]},o.prototype._renderForPlatform=function(e,t,r){var n=e.features?e:e.children;t.start(n,r).then(function(e){var t="Item tree rendered in "+e.time+"ms",r=document.getElementsByTagName("html")[0],n=function(){window.cxp.mobile.resize(r.scrollHeight)};window.addResizeListener(r,n),console.log(t),window.cxp.mobile.itemLoaded()})["catch"](function(e){console.log(e)})},t.exports=o},{"../../logging/console-plain-log-stream":185,"../../render/page-renderer":193}],188:[function(e,t,r){(function(e){"use strict";var r=e.window,n=e.document;t.exports={enable:function(){function e(e){return encodeURIComponent(e).replace(/[!()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)}).replace(/[']/g,function(e){return"\\'"})}function t(e){var t=n.createElement("IFRAME");t.setAttribute("src",e),n.documentElement.appendChild(t),t.parentNode.removeChild(t),t=null}function i(e){t("bb-loaded://?time="+e)}function o(){t("bb-reload://")}function a(e,r){t("bb-resize://?w="+e+"&h="+r)}function s(e,r){t("bb-scroll://?x="+e+"&y="+r)}function c(r,n,i){t("bb-publish://?event="+e(r)+"&type="+e(i)+"&payload="+e(n))}function l(r){t("bb-subscribe://?event="+e(r))}function u(r){t("bb-unsubscribe://?event="+e(r))}function p(){if(0!==arguments.length){var r=[];Array.prototype.push.apply(r,arguments);for(var n=r.shift(),i=r.shift(),o=r,a=0;a<o.length;a++)o[a]=e(o[a]);t("bb-plugin://?plugin="+e(n)+"&method="+e(i)+"&params="+o.join("&params="))}}function h(e,t,n,i,o){for(var a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,r="x"==e?t:3&t|8;return r.toString(16)}),s=[e,t,a].join("."),c=function(){r.gadgets.pubsub.unsubscribe("plugin.success."+s,l),r.gadgets.pubsub.unsubscribe("plugin.error."+s,u)},l=function(e){e.keep||c(),i&&i(e.data)},u=function(e){e.keep||c(),o&&o(e.data)},h=0;h<n.length;h++){var f=n[h];"object"==typeof f&&(n[h]=JSON.stringify(f))}return r.gadgets.pubsub.subscribe("plugin.success."+s,l),r.gadgets.pubsub.subscribe("plugin.error."+s,u),p.apply(r.cxp.mobile,[e,t,a].concat(n)),a}r.XMLHttpRequest&&!function(e){XMLHttpRequest.prototype.send=function(t){this.setRequestHeader("bb.nsurlrequest.webview","true"),e.call(this,t)}}(XMLHttpRequest.prototype.send),r.cxp.mobile={loaded:i,reload:o,resizeTo:a,scrollTo:s,publish:c,subscribe:l,unsubscribe:u,callPlugin:h}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],189:[function(e,t,r){"use strict";var n=e("../../render/page-renderer"),i=e("../../logging/console-plain-log-stream"),o=e("../../logging/iframe-bridge-log-stream"),a=e("../../logging/buffered-log-stream"),s=function(){n.call(this)};s.prototype=Object.create(n.prototype),s.prototype._createLogStreams=function(e){var t=new i({printTimestamp:!0,printLevel:!0}),r=new a;r.decorateStream(t),window.bufferedLogStream=r;var n=new o;return[{level:e,stream:n},{level:e,stream:t},{level:e,stream:r}]},s.prototype._renderForPlatform=function(e,t,r){var n=document.getElementsByTagName("html")[0];window.addResizeListener(n,function(){window.cxp.mobile.resizeTo(n.scrollWidth,n.scrollHeight)});var i=e.features?e:e.children;t.start(i,r).then(function(e){window.cxp.mobile.loaded(e.time),window.cxp.mobile.resizeTo(n.scrollWidth,n.scrollHeight);var t="Widget-Engine: Item tree rendered in "+e.time+"ms";console.log(t)})["catch"](function(e){console.log(e)})},t.exports=s},{"../../logging/buffered-log-stream":184,"../../logging/console-plain-log-stream":185,"../../logging/iframe-bridge-log-stream":186,"../../render/page-renderer":193}],190:[function(e,t,r){"use strict";t.exports=function(e){return e=e||[],{name:"add-feature-plugin",postRead:function(t){return 0===e.length?t:(Array.isArray(t.features)||(t.features=[]),e.forEach(function(e){var r=t.features.some(function(t){return t.name===e});r||t.features.push({name:e,required:!1})}),t)}}}},{}],191:[function(e,t,r){"use strict";t.exports=function(){return{name:"expose-children-plugin",preRender:function(e,t,r){return e.children=r.children?r.children.map(function(e){return{id:e.id,name:e.name}}):[],e}}}},{}],192:[function(e,t,r){(function(r){"use strict";var n=r.window,i=e("cxp-web-apis/src/util/deduping-fetch"),o={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",html:"text/html",js:"application/javascript",css:"text/css"},a=function(e){return[].slice.call(e)},s=function(e){var t=n.document.createElement("template");return t.innerHTML=e,t.content.firstChild},c=function(e,t){var r=e.parentNode,n=s(t);return r.replaceChild(n,e),n},l=function(e,t,r){return e+"/contenttemplates/rendered?contextItemName="+t+"&uuid="+r},u=function(e){var t=(new n.DOMParser).parseFromString("<foo>"+e+"</foo>","text/xml");return t&&t.childNodes&&t.childNodes[0]&&t.childNodes[0].textContent},p=function(e){var t=e.match(".([^.]+)$")[1];return o[t]},h=function(e,t){var r=n.document.createEvent("HTMLEvents");r.initEvent(t,!0,!0),e.dispatchEvent(r)},f=function(e){return e.match(/^[^\/]+\/\/[^\/]+/)||""},d=function(e){return"moc-cache-"+e},g=function(e,t){var r=n.localStorage,i=n.cxp&&n.cxp.mobile&&n.cxp.mobile.plugins&&n.cxp.mobile.plugins.PersistentStorage;return new Promise(function(t,n){if(i)i.getItem(function(e){e?t(JSON.parse(e)):t()},function(){t()},d(e));else{var o=r[d(e)];o?t(JSON.parse(o)):t()}})},m=function(e,t){var r=n.localStorage,i=n.cxp&&n.cxp.mobile&&n.cxp.mobile.plugins&&n.cxp.mobile.plugins.PersistentStorage;return new Promise(function(n,o){i?i.setItem(n,o,d(e),JSON.stringify(t)):(r[d(e)]=JSON.stringify(t),n())})},v=function(e){var t=n.localStorage,r=n.cxp&&n.cxp.mobile&&n.cxp.mobile.plugins&&n.cxp.mobile.plugins.PersistentStorage;return new Promise(function(n,i){r?r.removeItem(n,i,d(e)):(t.removeItem(d(e)),n())})},y=function(e){return new Promise(function(t,r){var i=new n.Image;i.onload=function(){var r=n.document.createElement("canvas");r.width=this.naturalWidth,r.height=this.naturalHeight,r.getContext("2d").drawImage(this,0,0),t(r.toDataURL(p(e)))},i.onerror=function(){r()},i.src=e})},b=function(e,t,r){return i(l(e,t,r)).then(function(e){return e.status>=200&&e.status<300?Promise.resolve(e.text()):Promise.reject(e.statusText)}).then(function(e){return e.split(/([^"]+\/content\/atom\/[^"]+)|([^"]+\/content\/bbp\/repositories\/[^"]+)/g)}).then(function(t){return Promise.all(t.map(function(t){return/\/content\/atom\/|\/content\/bbp\/repositories\//.test(t)?y(f(e)+u(t)):t}))}).then(function(e){return e.join("")})},w=function(e,t,r){return g(r.id).then(function(n){var i=r.preferences.widgetContentsUpdated?r.preferences.widgetContentsUpdated.value:0,o=!r.preferences.contentsCached||"true"===r.preferences.contentsCached.value;return o===!1&&v(r.id),o&&n&&n.cacheKey===i?n.data:b(e,t,r.id).then(function(e){return o&&m(r.id,{cacheKey:i,data:e}),e})})};t.exports=function(e){return{name:"mobile-optimized-content-plugin",postRender:function(t,r,n){var i=t.features.cxp.config.get("portalName"),o=a(t.body.getElementsByTagName("g:include")).filter(function(e){return/\/contenttemplates\/rendered/.test(e.getAttribute("src"))&&0===e.querySelectorAll('[name="templateUrl"]').length}).map(function(t){var r=c(t,t.outerHTML.replace(/g:include/g,"moc:include"));return w(e,i,n).then(function(e){c(r,e)})});return o.length&&Promise.all(o).then(function(){h(t.body,"contentLoaded")})["catch"](function(){h(t.body,"contentError")}),t}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"cxp-web-apis/src/util/deduping-fetch":179}],193:[function(e,t,r){(function(r){"use strict";var n=r.window||{};r.window||(r.window=n);var i=e("cxp-web-apis"),o=e("../plugins/add-feature-plugin"),a=e("../plugins/expose-children-plugin"),s=e("../plugins/mobile-optimised-content-plugin"),c="bbCSRF",l=c,u=function(e){};u.prototype.render=function(e,t,r,n){n=n||{};var c=n.logLevel||"warn",u=n.localContextRoot||"",p=n.remoteContextRoot||"",h=n.apiRoot||"",f=n.portalName||"anonymous-portal",d=i.createConfiguration({logStreams:this._createLogStreams(c)});d.enable("compat"),d.enable("fullConfigReplacement"),d.set("portalName",f),d.set("contextRoot",u),d.set("remoteContextRoot",p),d.set("apiRoot",h);var g=null;g&&d.set("csrfToken",{name:l,value:g});var m=i.getRenderer(d);m.addPlugin(s(d.get("remoteContextRoot"))),m.addPlugin(a());var v={name:"cxp",config:d,render:m,model:i.getModel(d)};m.addPlugin(o([v.name])),m.addFeature(v),m.addFeature(r),this._renderForPlatform(t,m,e)},u.prototype._createLogStreams=function(e){throw new Error("PageRenderer#_createLogStreams must be overridden.")},u.prototype._renderForPlatform=function(e,t,r){throw new Error("PageRenderer#_renderForPlatform must be overridden.")},t.exports=u}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../plugins/add-feature-plugin":190,"../plugins/expose-children-plugin":191,"../plugins/mobile-optimised-content-plugin":192,"cxp-web-apis":153}]},{},[183]);
//# sourceMappingURL=web-sdk-mobile.min.js.map
