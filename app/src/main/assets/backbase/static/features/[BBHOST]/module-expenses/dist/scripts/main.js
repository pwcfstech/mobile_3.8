!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("base"),require("core")):"function"==typeof define&&define.amd?define(["base","core"],t):"object"==typeof exports?exports["module-expenses"]=t(require("base"),require("core")):e["module-expenses"]=t(e.base,e.core)}(this,function(e,t){return function(e){function t(s){if(n[s])return n[s].exports;var r=n[s]={exports:{},id:s,loaded:!1};return e[s].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var s;(function(e){s=function(require,e,t){"use strict";t.name="expenses";var s=n(1),r=n(2),a=[r.name];t.exports=s.createModule(t.name,a).factory(n(3))}.call(t,n,t,e),!(void 0!==s&&(e.exports=s))}).call(t,n(4)(e))},function(t){t.exports=e},function(e){e.exports=t},function(e,t,n){var s;s=function(require,e){"use strict";var t=n(1).ng,s=n(1).utils;e.ExpensesModel=function(e){var n={START_OF_THE_MONTH:"First of the month",END_OF_THE_MONTH:"End of the month",LAST_FRIDAY_OF_THE_MONTH:"Last Friday of the month",WEEKLY:"Weekly",MONTHLY:"Monthly",YEARLY:"Yearly"},r=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],a=["January","February","March","April","May","June","July","August","September","October","November","December"],i=function(e){this.expensesEndpoint=e.expensesEndpoint,this.expensesDetailsEndpoint=e.expensesDetailsEndpoint,this.expenses={},this.expenseDetails={}},o=function(e){var n=t.copy(e);return n.setHours(0,-n.getTimezoneOffset(),0,0),n.toISOString().split("T")[0]};return i.prototype.loadExpenses=function(t,n){var s=this.expensesEndpoint+"?startDate="+o(t)+"&endDate="+o(n),r=e.getInstance({endpoint:s}),a=this,i=r.read();return a.loading=!0,i.then(function(e){e&&"null"!==e.data&&a.preprocessExpenses(e.data)},function(e){a.error={code:e.status,message:e.statusText}})["finally"](function(){a.loading=!1}),i},i.prototype.preprocessExpenses=function(e){if(!(e.length<1))for(var t=e.length-1;t>=0;t--){var n=e[t];this.expenses[n.date]||(this.expenses[n.date]={currency:"",payments:[],total:0}),this.expenses[n.date].payments.push(n),this.expenses[n.date].total+=n.amount,this.expenses[n.date].currency=n.currency}},i.prototype.findByDate=function(e){var t,n,s,r={},a=this,i=function(e){t=o(e),a.expenses[t]&&(r[t]=a.expenses[t])};if(e instanceof Array)for(var l=e.length-1;l>=0;l--)n=e[l],s=new Date(n.year,n.month-1,n.date),i(s);else i(e);return"{}"===JSON.stringify(r)?null:r},i.prototype.loadExpensesDetails=function(t){if(!t.details||s.isEmpty(t.details)){var n=e.getInstance({endpoint:this.expensesDetailsEndpoint+"/"+t.paymentOrderId}),r=this,a=n.read();return r.loading=!0,a.then(function(e){e&&"null"!==e.data&&r.preprocessExpensesDetails(e.data,t)},function(e){t.errorCode=e.status||500})["finally"](function(){r.loading=!1,t.displayDetails=t.displayDetails?!1:!0}),a}t.displayDetails=t.displayDetails?!1:!0},i.prototype.preprocessExpensesDetails=function(e,s){var i={};if(e&&(i=t.copy(e),e.schedule)){var o=e.schedule.frequency;if(i.schedule.frequency=n[o],e.schedule.intervals&&e.schedule.intervals.length>0){var l=e.schedule.intervals.split(",");if("WEEKLY"===o||"YEARLY"===o){var u="WEEKLY"===o?r:a;i.schedule.intervals="";for(var p=0;p<l.length;p++){var c=u[parseInt(l[p],10)-1]+", ";i.schedule.intervals=i.schedule.intervals+c}i.schedule.intervals&&(i.schedule.intervals=i.schedule.intervals.substring(0,i.schedule.intervals.length-2))}}else i.schedule.intervals=null}s.details=i},{getInstance:function(e){return new i(e)}}},e.ExpensesModel.$inject=["httpService"]}.call(t,n,t,e),!(void 0!==s&&(e.exports=s))},function(e){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}}])});