<div class="lp-widget-content">
	<div class="lp-alerts successAlerts">
		<div alert="alert" class="alert alert-dismissible" ng-repeat="alert in mainCtrl.alerts.list();" type="{{ alert.type }}" close="mainCtrl.alerts.close()">
			{{ alert.msg | translate }}
		</div>
		<!--<div ng-if="success.tranx.happened">-->
			<!--<div class="img_padding"><img src="static/features/[BBHOST]/theme-idfc/images/tick.png"/>-->
				<!--<img ng-src="{{tick}}"/>-->
			<!--</div>-->
			<!--<div class="alert alert-dismissible successMsgDiv" id="paymentResult">-->
				<!--<span><b>{{ success.tranx.msg1}}</b></span><br>-->
				<!--<span>{{ success.tranx.msg2}}</span>-->
				<!--<span style="color:#ff8f1b">{{ success.tranx.msg3}}</span>-->
				<!--&lt;!&ndash; CPU-6908 done during IFSC Search implementation phase start &ndash;&gt;-->
				<!--<br/>-->
				<!--<span  style="color:#8A0A0A" ng-if="showduplicatebeneerror">The beneficiary could not be added as it already exists.</span>-->
				<!--&lt;!&ndash; CPU-6908 done during IFSC Search implementation phase end &ndash;&gt;-->
			<!--</div>-->
		<!--</div>-->
		<div ng-if="success.tranx.happened" >
			<div class="row" style="background-color:#f7f7f7; border-bottom:1px solid; border-color:#f7f7f7; padding-bottom:3%;padding-top:5%;">
			<div style="text-align: center;">
				<span>
					<img height="17" width="25" alt="FT Widget" title="FT Widget" src="static/features/[BBHOST]/theme-idfc/images/tick_hdpi.png">
				</span>
			</div>
				<div class="col-xs-12" style="padding: 3%; text-align: center; padding-top: 2%;">
					<span class="alert alert-dismissible" id="paymentResult" ng-bind="success.tranx.msg"></span>
				</div>
			</div>
			<div style="color:#8A0A0A" id="paymentResult1" ng-bind="success.tranx.msg1"></div>
			<div style="color:#8A0A0A" ng-show="errMsg">Transaction failed, please try again.</div>
			<div class="" ng-if="buttonSuccess" style="padding-bottom:3%;text-align:left;margin-top:2%;">
				<div class="col-xs-6" style="margin-bottom:5%;font-size:12px !important;" ng-repeat="field in items" ng-if="field.display">
					<div class="row" style="margin-bottom:5%; margin-left:2%;">
						<b>{{field.item}}</b>
					</div>
					<div class="row" ng-if = "(field.item=='Remarks')" style="margin-left:2%;word-break:break-word;">
						{{field.value}}
					</div>
					<div class="row" ng-if = "!(field.currency) && (field.item!='Remarks')" style="margin-left:2%;word-break:break-all;">
						{{field.value}}
					</div>
					<div class="row" ng-if = "field.currency" style="margin-left:2%;">
						<small class="rupee-symbol-span"></small>
						<small lp-amount="field.value" itemprop="amount"></small>
					</div>
				</div>
			</div>
			<div ng-if= "showduplicatebeneerror" class="row">
				<div class="col-lg-12">
					<div style="text-align: center;margin-top: 3%;margin-bottom: -3%;">
						<span class="alert alert-dismissible ng-binding">The beneficiary could not be added as it already exists.</span>
					</div>
				</div>
			</div>
		</div>
		<div ng-if="buttonSuccess" class="row col-lg-12" style="margin-top: 1%; padding-top: 1%;">
			<div class="col-xs-12" style="text-align:right;">
				<button ng-repeat="item in buttons" name={{item.name}} class={{item.className}} style={{item.style}} ng-click="successAction(item.param)" type="button" lp-i18n={{item.name}}></button>
			</div>
			<div class="row col-xs-12" style="text-align:center;padding-left: 10%;" ng-repeat="item in actions">
				<a ng-click=transReceipt(item.receiptType,item.transType)><span class={{item.className}} ></span></a>
				<span ng-if="showMailSuccess" style="color: #007900;font-size: 14px">{{mailSuccessMsg}}</span>
				<small><span ng-if="showMailError" style="font-size: 14px">{{mailSuccessMsg}}</span><span ng-show="showMailError"><a class="emailModLink" ng-click="goToEmailMod()">click here</a>.</span></small>
			</div>
		</div>
		<div style="color:#8A0A0A" ng-show="errMsg">Transaction failed, please try again</div>
	</div>
	<div ng-if="err.happened">
		<div class="text-danger errorMsg-reviewTransfer">{{err.msg}}</div>
		<div ng-show="buttonError" class="newTransferBtn">
			<button name="buttonErr" class="btn btn-primary btn-align secondary-btn-forgot primary-btn-btn review-button" ng-show="update" ng-click="goBack()" type="button" lp-i18n="messages.BUTTON_FUTURE_BACK"></button>
		</div>
	</div>
	<div ng-hide="globalerror">
		<div ng-show="buttonSuccess" class="successAlerts">
			<!--<button name="submit" class="btn btn-default primary-btn-btn review-button success-close-btn" ng-click="goBack()" type="button" ng-show="!update" lp-i18n="messages.BUTTON_BACK"></button>-->
			<button name="submit" class="btn btn-default primary-btn-btn review-button" ng-click="goBack()" type="button" ng-show="update" lp-i18n="messages.BUTTON_FUTURE_BACK"></button>
		</div>
		<div id="trbd" class="lp-transfers-container">
			<div class="panel-message" ng-cloak ng-hide="mainCtrl.ordersModel.pendingOrdersGroups.length" lp-i18n="messages.NO_PENDING_TRANSFERS"></div>
			<ul class="list-group panel panel-default" ng-repeat="group in mainCtrl.ordersModel.pendingOrdersGroups" itemscope="" itemprop="paymentOrderAccount">
				<li ng-cloak class="list-group-item panel-heading review-transfer-li-alignment" tabindex="0">
					<small class="text-muted review-transfer-small-label_From" lp-i18n="messages.TRANSFER_FROM"></small>
					<small class="text-muted review-transfer-small-label_From" aria-hidden="true">{{ftData.accountName}}</small>
					<small class="text-muted review-transfer-small-label_AcNo" aria-hidden="true">{{ftData.accountId}}</small>
				</li>
				<li class="list-group-item clearfix li-transfer-summary" ng-class="{'list-group-item-success': paymentOrder.submitted, 'list-group-item-danger': paymentOrder.verificationFailure}" ng-repeat="paymentOrder in group.paymentOrders" itemscope="" itemtype="http://launchpad.backbase.com/vocab/retail/payment-order" tabindex="0">
					<div class="hidden-xs hidden-sm col-md-1 list-group-item-pic">
						<img height="50" width="50" ng-src="{{mainCtrl.decodePhotoUrl(paymentOrder.counterpartyName)}}"/>
					</div>
					<div class="col-xs-12 col-md-11 valign-middle">
						<div class="row row-danger">
							<div class="col-xs-5 div-ToAccount">
								<small class="text-muted font-label_TO" lp-i18n="messages.TRANSFER_TO">To:</small><span class="h4 font-To-accountName" itemprop="counterpartyName"> {{paymentOrder.counterpartyName}}</span>
							</div>
							<div class="col-xs-5 div-amount">
								<small ng-class="{'rupee-symbol-span':paymentOrder.instructedCurrency === 'INR' }"></small>
								<small itemprop="instructedAmount">{{paymentOrder.instructedAmount | currency:' '}}</small>
							</div>
							<div class="col-xs-1 text-right action" style='visibility:hidden'>
								<button ng-click="editOrder(paymentOrder)" type="button" class="btn btn-sm btn-default"><i class="glyphicon glyphicon-edit"></i></button>
							</div>
						</div>
						<div class="row">
							<div class="col-xs-7 row-padding-account-summary">
								<span class="sr-only"><b>Account Number : </b></span>
<span class="summarylabel-modification">
<small class="text-muted labels-in_Summary"><b>Account Number</b></small>
</span>
<span class="summarycolon-modification">
<small class="text-muted labels-in_Summary"><b>:</b></small>
</span>
								<small ng-class="{'raise': paymentOrder.type === transferTypeEnum.p2pEmail &amp;&amp; !p2pUser.emailVerified}" itemprop="counterpartyIban" class="text-muted values-in-summary">{{ paymentOrder.accountDetails }}
								</small>
							</div>
							<div class="col-xs-8 row-padding-account-summary">
<span class="summarylabel-modification">
<small class="text-muted labels-in_Summary"><b>Transaction Type</b></small>
</span>
<span class="summarycolon-modification">
<small class="text-muted labels-in_Summary"><b>:</b></small>
</span>
								<small class="text-muted values-in-summary" itemprop="txnmode"> {{txnMode}}</small>
							</div>
							<div class="col-xs-8 row-padding-account-summary">
<span class="summarylabel-modification">
<small class="text-muted labels-in_Summary"><b>Payment Mode</b></small>
</span>
<span class="summarycolon-modification">
<small class="text-muted labels-in_Summary"><b>:</b></small>
</span>
								<small class="text-muted values-in-summary" itemprop="paymentmode"> {{paymentMode}}</small>
							</div>
							<div id="schdstartDateLabel" class="col-xs-8 recur row-padding-account-summary" ng-show="recurShow">
<span class="summarylabel-modification">
<small class="text-muted labels-in_Summary"><b>Start Date</b></small>
</span>
<span class="summarycolon-modification">
<small class="text-muted labels-in_Summary"><b>:</b></small>
</span>
								<small class="text-muted values-in-summary">{{ paymentOrder.scheduledTransfer.startDate | date:'dd-MMM-yyyy' }}</small>
							</div>
							<div id="schdendDateLabel" class="col-xs-8 recur row-padding-account-summary" ng-show="recurShow">
<span class="summarylabel-modification">
<small class="text-muted labels-in_Summary"><b>End Date</b></small>
</span>
<span class="summarycolon-modification">
<small class="text-muted labels-in_Summary"><b>:</b></small>
</span>
								<small class="text-muted values-in-summary">{{ paymentOrder.scheduledTransfer.endDate | date:'dd-MMM-yyyy' }}</small>
							</div>
							<div id="schdFrequency" class="col-xs-8 recur row-padding-account-summary" ng-show="recurShow">
<span class="summarylabel-modification">
<small class="text-muted labels-in_Summary"><b>Scheduled Frequency</b>
</small>
</span>
<span class="summarycolon-modification">
<small class="text-muted labels-in_Summary"><b>:</b></small>
</span>
								<small class="text-muted values-in-summary">{{ paymentOrder.scheduledTransfer.frequency}}</small>
							</div>
							<div id="onDateLabel" class="col-xs-4 text-right nonrecur row-padding-account-summary align-date-in-summary" itemprop="instructedDateTime" ng-show="nonrecurShow">
<span class="summarylabel-modification">
<small class="text-muted labels-in_Summary"><b>{{'Date'|translate}}</b></small>
</span>
<span class="summarycolon-modification">
<small class="text-muted labels-in_Summary"><b>:</b></small>
</span>
								<small class="values-in-summary">{{ paymentOrder.onDate | date:'dd-MMM-yyyy' }}</small>
							</div>
							<div class="col-xs-8 recur row-padding-account-summary" ng-show="descShow">
<span class="summarylabel-modification">
<small class="text-muted labels-in_Summary"><b>Payment Description</b></small>
</span>
<span class="summarycolon-modification">
<small class="text-muted labels-in_Summary"><b>:</b></small>
</span>
								<small class="values-in-summary">{{ paymentOrder.paymentDescription}}</small>
							</div>
							<div id="delOrderButton" class="col-xs-1 text-right action" style="visibility:hidden">
								<button ng-click="removeOrder(group, paymentOrder)" type="button" class="btn btn-sm btn-default"><i class="glyphicon glyphicon-trash"></i></button>
							</div>
						</div>
						<div class="row" ng-if="paymentOrder.verificationFailure">
							<div ng-class="{'raise': paymentOrder.type === transferTypeEnum.p2pEmail &amp;&amp; !p2pUser.emailVerified}" class="col-xs-12 verification-error">
								<i class="glyphicon glyphicon-warning-sign"></i> {{"messages.UNSENT_VERIFY_CONTACTDETAILS" | translate}}
							</div>
						</div>
					</div>
				</li>
			</ul>
			<!--tanking changes-->
			<div ng-if="tankingNeeded" class="alert alert-warning"> <!--tankingNeeded added 3.1-->
				<small><strong>Note:</strong></small>
				<small lp-i18n="messages.NEFT_TIMING"></small><br/>
				<small lp-i18n="messages.NEFT_TIMING_TRANSFER"></small>
			</div>
			<div class="text-danger" ng-show="error.happened" style="text-align:center">{{
				error.msg
				}}
			</div>
			<div ng-hide="hideOTPFlag" class="otv-div">
				<h4>
					<div class="text-success sucessOTP" ng-show="success.happened" style="text-align:center">
						<div class="img_padding"><img src="static/features/[BBHOST]/theme-idfc/images/tick.png"/>
							<img ng-src="{{tick}}"/>
						</div>
						{{ success.msg }}
					</div>
				</h4>
				<form name="OTPform" class="form-horizontal otpTipAdjust">
					<div lp-field="lp-field" label="Mobile_Label" style="margin-bottom:0!important">
						<div class="div-mobile-number">
							<input class="form-control input-mobile-number" type="text" name="OTPMobile" ng-model="customerMobMasked" ng-disabled="true"/>
						</div>
					</div>
					<input style="display:none" type="text" name="fakeusernameremembered" />
					<input style="display:none" type="password" name="fakepasswordremembered" />
					<div lp-field="lp-field" label="OTP_Label" tip="{{'Tip_OTP'|translate}}">
						<div class="div-otp-value">
							<input class="form-control input-otp-value" type="tel" name="otp" ng-disabled="lockFieldsOTP" autocomplete="off" ng-pattern="/^[0-9]*$/" ng-minlength="6" ng-maxlength="6" ng-model="mainCtrl.otpValue" required="true" style="-webkit-text-security:disc" />
							<small class="text-danger errorMsg" ng-show="OTPform.submitted &amp;&amp; OTPform.otp.$error.required">
								{{'Error_Required_OTP'|translate}}
							</small>
							<small class="text-danger errorMsg" ng-show="OTPform.submitted &amp;&amp; OTPform.otp.$error.minlength">
								{{'Error_Invalid_Length_OTP'|translate}}
							</small>
							<small class="text-danger errorMsg" ng-show="OTPform.submitted &amp;&amp; OTPform.otp.$error.maxlength">
								{{'Error_Invalid_Length_OTP'|translate}}
							</small>
							<small class="text-danger errorMsg" ng-show="OTPform.otp.$error.pattern">
								{{'Error_Invalid_OTP'|translate}}
							</small>
						</div>
					</div>
					<div class="ft-div-td-dep-ab otp-buttons-alognment">
						<button class="btn btn-primary btn-align primary-btn-forgot primary-btn-btn" type="submit" id="verifyOTP-btn-review-transfer" name="verifyOTP" ng-disabled="lockFieldsOTP" ng-click="OTPform.submitted=true; submitPayments(OTPform.$valid,'OTP')">
							{{'btn_Verify'|translate}}
						</button>
						<button class="btn btn-primary btn-align secondary-btn-forgot secondary-btn-btn" ng-disabled="lockFieldsOTP" type="button" name="resendOTP" ng-click="generateOTP('resend')">{{'btn_ResendOTP'|translate}}
						</button>
					</div>
				</form>
			</div>

			<!-- RSA changes by Xebia starts -->

				<div ng-show="showDenyMessage">
					<div class="rsa-deny-message">
						{{cqObject.RSA_DENY_MESSAGE}} 
					</div>
				</div>

				<div ng-show="showCancelTransactionMessage">
					<div class="rsa-cancel-transaction-message">
							{{cqObject.CANCEL_TRANSACTION}} 
					</div>
					<div class="rsa-button">
							<button class="btn btn-primary primary-btn-btn primary-btn-ft"
								class="rsa-margin-top" type="submit" name="No"
								ng-click="cancelTransfer()">Okay</button>
					</div>
				</div>

				<div ng-show="showSetupCQMessage">
					<p>
						<center class="rsa-setupCQMessage">{{cqObject.SETUP_CQ_MESSAGE}}
						</center>
					</p>
					<div class="rsa-button">
							<button class="btn btn-primary primary-btn-btn primary-btn-ft"
								type="submit" name="Yes"
								ng-click="showSetupCQ()">Update Now</button>

							<button class="btn btn-primary primary-btn-btn primary-btn-ft"
								type="submit" name="No"
								ng-click="showSetupCQMessage = false; showCancelTransactionMessage = true;">Cancel</button>
					</div>
				</div>

				<div ng-hide="hideQuesFlag" class="rsa-border-div">
					
					<div ng-bind="showCQError" class="rsa-cancel-transaction-message">
					</div>

					<!-- <form name="Questionform" class="form-horizontal"> -->
						<div ng-if="showQuestionDiv">
							
								<div class="rsa-margin-top">
									<label ng-bind="challengeQuestions" class="rsa-bold-font"></label>
									<input class="form-control rsa-answer-input" type="text" name="answer" autocomplete="off" placeholder="Enter answer"
									ng-model="challengeQuestion.answer"
									required="true"/>
								</div>
							
							 
							<div class="rsa-text-center rsa-margin-bottom">
								<button class="rsa-button btn btn-primary primary-btn-btn primary-btn-ft"
									type="submit" name="verifyAnswers"
									ng-click="verifyCQAnswer()"
									ng-disabled="!(challengeQuestion.answer)"
									lp-i18n="Submit Answer">  
								</button>
							</div>
						</div>

						<div ng-show="showWrongAnswerMessage" class="rsa-button" >
							<button class="btn btn-primary primary-btn-btn primary-btn-ft"
								type="submit" name="tryAgain"
								ng-click="fetchCQ()">Try Again</button>
						</div>

					<!-- </form> -->
				</div>

				<!-- RSA changes by Xebia ends -->

			<div ng-hide="hideCombineFlag" class="otpques-div">
				<h4>
					<div class="text-success" ng-show="success.happened" style="text-align:center">{{ success.msg }}</div>
				</h4>
				<form name="mainform" class="form-horizontal">
					<div>
						<div lp-field="lp-field" label="Mobile_Label" tip="" class="otp-lp-field">
							<div>
								<input class="form-control" type="text" name="OTPMobile" ng-model="customerMobMasked" ng-disabled="true" style="float:left;width:38%"/>
							</div>
						</div>
						<input style="display:none" type="text" name="fakeusernameremembered"/>
						<input style="display:none" type="password" name="fakepasswordremembered"/>
						<div lp-field="lp-field" label="OTP_Label" class="otp-lp-field otp-lp-field-last" tip="{{'Tip_OTP'|translate}}">
							<div>
								<input class="form-control" type="tel" name="otp" autocomplete="off" ng-pattern="/^[0-9]*$/" ng-minlength="6" ng-maxlength="6" ng-model="mainCtrl.otpValue" required="true" style="width:38%;-webkit-text-security:disc"/>
								<small class="text-danger" ng-show="OTPform.submitted &amp;&amp; OTPform.otp.$error.required">{{'Error_Required_OTP'|translate}}</small>
								<small class="text-danger" ng-show="OTPform.submitted &amp;&amp; OTPform.otp.$error.minlength">{{'Error_Invalid_Length_OTP'|translate}}</small>
								<small class="text-danger" ng-show="OTPform.submitted &amp;&amp; OTPform.otp.$error.maxlength">{{'Error_Invalid_Length_OTP'|translate}}</small>
								<small class="text-danger" ng-show="OTPform.otp.$error.pattern">{{'Error_Invalid_OTP'|translate}}</small>
							</div>
						</div>
						<div class="otp-lp-field otp-lp-field-last">
							<div ng-if="showQuestionDiv">
								<div ng-repeat="question in challengeQuestions" style="margin-top:20px">
									<label>{{question.questionText}} </label>
									<input class="form-control" type="text" name="answer" autocomplete="off" placeholder="Enter answer" ng-model="challengeQuesAnswers[$index].answer" required="true" ng-disabled="isChallengeDisabled" style="width:70%"/>
									<input type="hidden" ng-value="question.questionId" ng-model="challengeQuesAnswers[$index].question" />
								</div>
							</div>
						</div>
						<div class="otp-buttons">
							<button class="btn btn-primary primary-btn-btn" type="submit" name="verifyAnswers_otp" ng-click="mainform.submitted=true; submitPayments(mainform.$valid, credentialType)"> Submit </button>
							<button class="btn btn-primary secondary-btn-btn" type="button" name="resendOTP" ng-click="generateOTP('resend')">{{'btn_ResendOTP'|translate}}</button>
						</div>
					</div>
				</form>
			</div>
		</div>
		<div ng-show="showButton">
			<!--<div class="widget-footer widget-new-footer footer-modification">
				<div class="text-center">
					<button ng-hide="hideSubmit" name="submitPayments" class="btn btn-primary primary-btn-newtransfer idfcActionSearchButton submit-button-border" ng-click="readSMS('send')" ng-disabled="ordersModel.pendingOrdersGroups.length === 0" type="button" lp-i18n="Submit">
					</button>
				</div>
			</div>-->
			<div class="widget-footer widget-new-footer footer-modification">
				<div class="text-center">
					<button ng-hide="hideSubmit" name="submitPayments" class="btn btn-primary primary-btn-btn primary-btn-ft"
							ng-click="enableDisableOTPorQuestion('false');" ng-disabled="ordersModel.pendingOrdersGroups.length === 0"
							type="button" lp-i18n="Submit">
					</button>

					<!--<button ng-if="!NEFTAvailable"  id="submitPayments" class="btn btn-primary primary-btn-btn primary-btn-ft"
							ng-click="enableDisableOTPorQuestion('true');" ng-disabled="ordersModel.pendingOrdersGroups.length === 0"
							type="button" lp-i18n="IMPS">
					</button> --> <!--old tanking--> <!--3.1 change-->
					<button ng-if="tankingNeeded"  id="submitPayments1" class="btn btn-primary primary-btn-btn primary-btn-ft"
							ng-click="enableDisableOTPorQuestion('true');" ng-hide="limitIMPS" ng-disabled="ordersModel.pendingOrdersGroups.length === 0"
							type="button" lp-i18n="IMPS">
					</button>

				</div>
			</div>
		</div>
	</div>
</div>